% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/draw_chart.R
\name{draw_chart}
\alias{draw_chart}
\title{Draw growth chart}
\usage{
draw_chart(
  txt = "",
  session = "",
  format = "1.0",
  chartcode = "",
  selector = c("data", "derive", "chartcode"),
  chartgrp = NULL,
  agegrp = NULL,
  sex = NULL,
  etn = NULL,
  ga = NULL,
  side = "hgt",
  curve_interpolation = TRUE,
  quiet = FALSE,
  dnr = "0-2",
  lo = NULL,
  hi = NULL,
  nmatch = 0L,
  exact_sex = TRUE,
  exact_ga = FALSE,
  break_ties = FALSE,
  show_realized = FALSE,
  show_future = FALSE,
  draw_grob = TRUE,
  loc = "",
  bds_data = "",
  ind_loc = "",
  ...
)
}
\arguments{
\item{txt}{A JSON string, URL or file with the data in JSON
format. The input data adhere to specification
\href{https://www.ncj.nl/themadossiers/informatisering/basisdataset/documentatie/?cat=12}{BDS JGZ 3.2.5},
and are converted to JSON according to \code{schema}.}

\item{session}{OpenCPU session key with the uploaded data}

\item{format}{String. JSON data schema version number. There are currently
three schemas supported: \code{"1.0"}, \code{"1.1"}, \code{"2.0"} and \code{"3.0"}. Formats \code{"1.0"} and
\code{"1.1"} are included for backward compatibility only. Use \code{format = "3.0"}
for new applications.}

\item{chartcode}{Optional. The code of the requested growth chart.}

\item{selector}{Either \code{"chartcode"}, \code{"data"} or \code{"derive"}.
The function can calculate the chart code by looking at the child
data (method \code{"data"}) or user input (method \code{"derive"}).
More in detail, the following behaviour decides between growth charts:
\describe{
\item{\code{"data"}}{Calculate chart code from the individual data.
This setting chooses the "optimal" chart for a given individual set of data.}
\item{\code{"derive"}}{Calculate chart code from a combination of user
data: \code{chartgrp}, \code{agegrp}, \code{side}, \code{sex},
\code{etn}, \code{ga}. The method does not use individual data. Use
this setting when chart choice needs to be reactive on user input.}
\item{\code{"chartcode"}}{Take string specified in \code{chartcode}}
}
If there is a valid \code{tgt} object, then the function simply obeys
the \code{selector} setting. If no valid \code{tgt} object is found,
the \code{"chartcode"} argument is taken. However, if the \code{"chartcode"}
is empty, then the function selects method \code{"derive"}.}

\item{chartgrp}{The chart group: \code{'nl2010'}, \code{'preterm'}, \code{'who'} or \code{character(0)}}

\item{agegrp}{Either \code{'0-15m'}, \code{'0-4y'}, \code{'1-21y'},
\code{'0-21y'} or \code{'0-4ya'}. Age group \code{'0-4ya'}
provides the 0-4 chart with weight for age (design E).}

\item{sex}{Either \code{'male'} or \code{'female'}}

\item{etn}{Either \code{'netherlands'}, \code{'turkish'},
\code{'moroccan'} or \code{'hindustani'}}

\item{ga}{Gestational age (in completed weeks)}

\item{side}{Either \code{'front'}, \code{'back'}, \code{'-hdc'} or
\code{'both'}}

\item{curve_interpolation}{A logical indicating whether curve
interpolation shoud be applied.}

\item{quiet}{Logical indicating whether chart code should be
written to standard output. Default is \code{quiet = TRUE}.}

\item{dnr}{Donor data, Prediction horizon: \code{"0-2"}, \code{"2-4"}
or \code{"4-18"}. May also be \code{"smocc"}, \code{"lollypop"},
\code{"terneuzen"} or \code{"pops"}.}

\item{lo}{Value of the left visit coded as string, e.g. \code{"4w"}
or \code{"7.5m"}}

\item{hi}{Value of the right visit coded as string, e.g. \code{"4w"}
or \code{"7.5m"}}

\item{nmatch}{Integer. Number of matches needed. When
\code{nmatch == 0L} no matches are sought.}

\item{exact_sex}{A logical indicating whether sex should be
matched exactly}

\item{exact_ga}{A logical indicating whether gestational age
should be matched exactly}

\item{break_ties}{A logical indicating whether ties should broken
randomly. The default (\code{TRUE}) breaks ties randomly.}

\item{show_realized}{A logical indicating whether the realized
growth of the target child should be drawn}

\item{show_future}{A logical indicating whether the predicted
growth of the target child should be drawn}

\item{draw_grob}{Logical. Should chart be plotted on current device?
Default is \code{TRUE}. For internal use only.}

\item{loc}{Alternative to \code{txt}. Location where input data is uploaded.
Argument \code{loc} is deprecated and will disappear in Nov 2022; please
use \code{session} instead.}

\item{bds_data}{Legacy. Will disappear in Nov 2022. Use \code{txt} instead.}

\item{ind_loc}{Legacy. Will disappear in Nov 2022. Use \code{loc} instead.}

\item{...}{Ignored}
}
\value{
A \code{gTree} object.
}
\description{
The function \code{draw_chart()} plots individual data on the growth chart.
}
\examples{
fn <- system.file("testdata", "client3.json", package = "james")
g <- draw_chart(txt = fn)
}
\seealso{
\code{\link[=select_chart]{select_chart()}}
}
\author{
Stef van Buuren 2021
}
\keyword{server}
