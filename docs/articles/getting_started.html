<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stef van Buuren">
<meta name="author" content="Arjan Huizing">
<meta name="author" content="Iris Eekhout">

<title>JAMES - Joint Automatic Measurement and Evaluation System</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="getting_started_files/libs/clipboard/clipboard.min.js"></script>
<script src="getting_started_files/libs/quarto-html/quarto.js"></script>
<script src="getting_started_files/libs/quarto-html/popper.min.js"></script>
<script src="getting_started_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="getting_started_files/libs/quarto-html/anchor.min.js"></script>
<link href="getting_started_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="getting_started_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="getting_started_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="getting_started_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="getting_started_files/libs/bootstrap/bootstrap-11fcf1ce0939638b3654d75e7a77d753.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#primary-james-user-functionality" id="toc-primary-james-user-functionality" class="nav-link" data-scroll-target="#primary-james-user-functionality">Primary JAMES user functionality</a></li>
  <li><a href="#output-formats" id="toc-output-formats" class="nav-link" data-scroll-target="#output-formats">Output formats</a></li>
  <li><a href="#objective" id="toc-objective" class="nav-link" data-scroll-target="#objective">Objective</a></li>
  </ul></li>
  <li><a href="#features" id="toc-features" class="nav-link" data-scroll-target="#features">Features</a>
  <ul class="collapse">
  <li><a href="#version-obtain-version-information" id="toc-version-obtain-version-information" class="nav-link" data-scroll-target="#version-obtain-version-information"><strong><code>/version</code></strong>: Obtain version information</a></li>
  <li><a href="#dataupload-upload-child-data" id="toc-dataupload-upload-child-data" class="nav-link" data-scroll-target="#dataupload-upload-child-data"><strong><code>/data/upload</code></strong>: Upload child data</a></li>
  <li><a href="#chartsdraw-draw-child-data-on-growth-chart" id="toc-chartsdraw-draw-child-data-on-growth-chart" class="nav-link" data-scroll-target="#chartsdraw-draw-child-data-on-growth-chart"><strong><code>/charts/draw</code></strong>: Draw child data on growth chart</a></li>
  <li><a href="#chartslist-list-available-growth-charts" id="toc-chartslist-list-available-growth-charts" class="nav-link" data-scroll-target="#chartslist-list-available-growth-charts"><strong><code>/charts/list</code></strong>: List available growth charts</a></li>
  <li><a href="#chartsvalidate-validate-chart-codes" id="toc-chartsvalidate-validate-chart-codes" class="nav-link" data-scroll-target="#chartsvalidate-validate-chart-codes"><strong><code>/charts/validate</code></strong>: Validate chart codes</a></li>
  <li><a href="#dscorecalculate-calculate-d-score" id="toc-dscorecalculate-calculate-d-score" class="nav-link" data-scroll-target="#dscorecalculate-calculate-d-score"><strong><code>/dscore/calculate</code></strong>: Calculate D-score</a></li>
  <li><a href="#ddomaincalculate-calculate-domain-scores" id="toc-ddomaincalculate-calculate-domain-scores" class="nav-link" data-scroll-target="#ddomaincalculate-calculate-domain-scores"><strong><code>/ddomain/calculate</code></strong>: Calculate domain scores</a></li>
  <li><a href="#vwcselect-select-van-wiechen-development-milestones-based-on-d-score-and-age" id="toc-vwcselect-select-van-wiechen-development-milestones-based-on-d-score-and-age" class="nav-link" data-scroll-target="#vwcselect-select-van-wiechen-development-milestones-based-on-d-score-and-age"><strong><code>/vwc/select</code></strong>: Select Van Wiechen development milestones based on D-score and age</a></li>
  <li><a href="#vwcpercentiles-select-van-wiechen-development-milestones-with-detailed-cut-off-information" id="toc-vwcpercentiles-select-van-wiechen-development-milestones-with-detailed-cut-off-information" class="nav-link" data-scroll-target="#vwcpercentiles-select-van-wiechen-development-milestones-with-detailed-cut-off-information"><strong><code>/vwc/percentiles</code></strong>: Select Van Wiechen development milestones with detailed cut-off information</a></li>
  <li><a href="#dcatcalculate-calculate-next-milestone-item" id="toc-dcatcalculate-calculate-next-milestone-item" class="nav-link" data-scroll-target="#dcatcalculate-calculate-next-milestone-item"><strong><code>/dcat/calculate</code></strong>: Calculate next milestone item</a></li>
  <li><a href="#screenerslist-list-available-growth-screeners" id="toc-screenerslist-list-available-growth-screeners" class="nav-link" data-scroll-target="#screenerslist-list-available-growth-screeners"><strong><code>/screeners/list</code></strong>: List available growth screeners</a></li>
  <li><a href="#screenersapply-apply-growth-screeners-to-child-data" id="toc-screenersapply-apply-growth-screeners-to-child-data" class="nav-link" data-scroll-target="#screenersapply-apply-growth-screeners-to-child-data"><strong><code>/screeners/apply</code></strong>: Apply growth screeners to child data</a></li>
  <li><a href="#site-request-an-empty-site" id="toc-site-request-an-empty-site" class="nav-link" data-scroll-target="#site-request-an-empty-site"><strong><code>/site</code></strong>: Request an empty site</a></li>
  <li><a href="#siterequest-request-personalised-site" id="toc-siterequest-request-personalised-site" class="nav-link" data-scroll-target="#siterequest-request-personalised-site"><strong><code>/site/request</code></strong>: Request personalised site</a></li>
  <li><a href="#blendrequest-obtain-a-blend-from-multiple-end-points" id="toc-blendrequest-obtain-a-blend-from-multiple-end-points" class="nav-link" data-scroll-target="#blendrequest-obtain-a-blend-from-multiple-end-points"><strong><code>/blend/request</code></strong>: Obtain a blend from multiple end points</a></li>
  </ul></li>
  <li><a href="#authentication" id="toc-authentication" class="nav-link" data-scroll-target="#authentication">Authentication</a>
  <ul class="collapse">
  <li><a href="#overview-1" id="toc-overview-1" class="nav-link" data-scroll-target="#overview-1">Overview</a></li>
  <li><a href="#authentication-conventions" id="toc-authentication-conventions" class="nav-link" data-scroll-target="#authentication-conventions">Authentication Conventions</a></li>
  <li><a href="#how-to-set-up-authentication" id="toc-how-to-set-up-authentication" class="nav-link" data-scroll-target="#how-to-set-up-authentication">How to Set Up Authentication</a></li>
  <li><a href="#manual-authentication" id="toc-manual-authentication" class="nav-link" data-scroll-target="#manual-authentication">Manual Authentication</a></li>
  <li><a href="#switching-between-servers" id="toc-switching-between-servers" class="nav-link" data-scroll-target="#switching-between-servers">Switching Between Servers</a></li>
  <li><a href="#troubleshooting-authentication" id="toc-troubleshooting-authentication" class="nav-link" data-scroll-target="#troubleshooting-authentication">Troubleshooting Authentication</a></li>
  </ul></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a>
  <ul class="collapse">
  <li><a href="#internal" id="toc-internal" class="nav-link" data-scroll-target="#internal">Internal</a></li>
  <li><a href="#external" id="toc-external" class="nav-link" data-scroll-target="#external">External</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">JAMES - Joint Automatic Measurement and Evaluation System</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">JAMES 1.11.0 (January 2026)</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://stefvanbuuren.name">Stef van Buuren</a> </p>
             <p><a href="https://nl.linkedin.com/in/arjanhjhuizing">Arjan Huizing</a> </p>
             <p><a href="https://iriseekhout.com">Iris Eekhout</a> </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>JAMES is a web service for creating and interpreting charts of child growth and development. The current version of JAMES</p>
<ol type="1">
<li>provides access to high-quality growth charts used by the Dutch youth health care;</li>
<li>screens for abnormal height, weight and head circumference;</li>
<li>converts developmental data into the D-score;</li>
<li>predicts future growth and development.</li>
</ol>
<p>JAMES is a RESTful API that runs on a remote host. The system accepts requests from the Dutch Digital Child Health Record System <a href="https://www.ddjgz.nl">DD-JGZ</a> and other clients using a the <a href="https://decor.nictiz.nl/pub/jeugdgezondheidszorg/jgz-html-20240426T081156/index.html">Basisdataset JGZ 4.0.0</a> protocol. Child data are coded according to the <a href="https://james.groeidiagrammen.nl/schemas/bds_v3.0.json">JSON data schema 3.0</a>.</p>
<blockquote class="blockquote">
<blockquote class="blockquote">
<p>Get to know JAMES. Browse the <a href="http://growthcharts.org/arnhem2025/">tutorial</a> (in Dutch).</p>
</blockquote>
</blockquote>
<p>The following sections illustrate how a client can make requests to JAMES using various client languages. In principle, any <code>HTTP</code> client will work with JAMES. The document highlights some applications of the service and provides pointers to relevant background information.</p>
<p>The service aids in monitoring and evaluating childhood growth. JAMES is created and maintained by the Netherlands Organisation for Applied Scientific Research TNO. Please contact Stef van Buuren &lt;stef.vanbuuren at tno.nl&gt; for further information.</p>
<section id="primary-james-user-functionality" class="level3">
<h3 class="anchored" data-anchor-id="primary-james-user-functionality">Primary JAMES user functionality</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 6%">
<col style="width: 26%">
<col style="width: 41%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Verb</th>
<th style="text-align: left;">API end point</th>
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Maps to <code>james</code> function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/version/{dfm}</code></td>
<td style="text-align: left;">Obtain version information</td>
<td style="text-align: left;"><code>version()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/data/upload/{dfm}</code></td>
<td style="text-align: left;">Upload child data</td>
<td style="text-align: left;"><code>upload_data()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/charts/draw/{ffm}</code></td>
<td style="text-align: left;">Draw child data on growth chart</td>
<td style="text-align: left;"><code>draw_chart()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/charts/list/{dfm}</code></td>
<td style="text-align: left;">List available growth charts</td>
<td style="text-align: left;"><code>list_charts()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/charts/validate/{dfm}</code></td>
<td style="text-align: left;">Validate a chart code</td>
<td style="text-align: left;"><code>validate_chartcode()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/dscore/calculate/{dfm}</code></td>
<td style="text-align: left;">Calculate developmental score (D-score)</td>
<td style="text-align: left;"><code>calculate_dscore()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/ddomain/calculate/{dfm}</code></td>
<td style="text-align: left;">Calculate developmental domain scores</td>
<td style="text-align: left;"><code>calculate_ddomain()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/vwc/select/{dfm}</code></td>
<td style="text-align: left;">Select developmental milestones for age</td>
<td style="text-align: left;"><code>select_vwc()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/vwc/percentiles/{dfm}</code></td>
<td style="text-align: left;">Obtain developmental milestone percentiles</td>
<td style="text-align: left;"><code>percentiles_vwc()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/dcat/calculate/{dfm}</code></td>
<td style="text-align: left;">Adaptive testing of milestones</td>
<td style="text-align: left;"><code>dcat()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/screeners/list/{dfm}</code></td>
<td style="text-align: left;">List available growth screeners</td>
<td style="text-align: left;"><code>list_screeners()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/screeners/apply/{dfm}</code></td>
<td style="text-align: left;">Apply growth screeners to child data</td>
<td style="text-align: left;"><code>apply_screeners()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
</tr>
<tr class="odd">
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/site</code></td>
<td style="text-align: left;">Request empty site</td>
<td style="text-align: left;"><code>request_site()</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/site/request/{dfm}</code></td>
<td style="text-align: left;">Request personalised site</td>
<td style="text-align: left;"><code>request_site()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
</tr>
<tr class="even">
<td style="text-align: left;">POST</td>
<td style="text-align: left;"><code>/blend/request/{sfm}</code></td>
<td style="text-align: left;">Obtain a blend from multiple end points</td>
<td style="text-align: left;"><code>request_blend()</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
<td style="text-align: left;">&nbsp;</td>
</tr>
<tr class="even">
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/{session}/{info}</code></td>
<td style="text-align: left;">Extract session details</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">GET</td>
<td style="text-align: left;"><code>/{2}/{1}/man</code></td>
<td style="text-align: left;">Consult R help</td>
<td style="text-align: left;"><code>help({1}_{2})</code></td>
</tr>
</tbody>
</table>
<p>The table lists the defined API end points and the mapping to each end point to the corresponding R function.</p>
<p>The definition of the JAMES endpoints can be found at <a href="https://james.groeidiagrammen.nl/docs/">OpenAPI specification</a>.</p>
</section>
<section id="output-formats" class="level3">
<h3 class="anchored" data-anchor-id="output-formats">Output formats</h3>
<p>JAMES is built on top of the <a href="https://www.opencpu.org/api.html"><strong>OpenCPU API</strong></a>, a powerful and flexible way for online deployment of R functionality. Although it is possible to use JAMES without knowledge of OpenCPU, it is useful to browse the OpenCPU features.</p>
<p>OpenCPU offers multiple output formats out of the box. JAMES supports a subset of these through the <code>/{session}/{info}</code> end point. Here <code>session</code> is a special session code generated by OpenCPU that identifies the server location containing the results of a request. The output format <code>info</code> is one of the following:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;"><code>{info}</code></th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>json</code></td>
<td style="text-align: left;">Function result as JSON</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>print</code></td>
<td style="text-align: left;">Function result as formatted as print</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>csv</code></td>
<td style="text-align: left;">Function result as comma-separated format</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>tab</code></td>
<td style="text-align: left;">Function result as tab-delimited format</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>md</code></td>
<td style="text-align: left;">Function result as markdown format</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>svglite</code></td>
<td style="text-align: left;">Function result as SVG graph</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>warnings</code></td>
<td style="text-align: left;">Warnings from the R execution</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>messages</code></td>
<td style="text-align: left;">Messages, especially data validation info</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>console</code></td>
<td style="text-align: left;">Console print out, useful for locating errors</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>stdout</code></td>
<td style="text-align: left;">Standard output</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>info</code></td>
<td style="text-align: left;">Overview of JAMES deployment</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>parent</code></td>
<td style="text-align: left;">Parent directory of all OpenCPU session output</td>
</tr>
</tbody>
</table>
<p>In addition, the user can request the function result in a particular form. JAMES distinguishes the following groups of formats.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 81%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Format group</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>dfm</code></td>
<td style="text-align: left;">Data format: <code>json</code>, <code>csv</code>, <code>tab</code>, <code>md</code>, <code>print</code>, <code>parent</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ffm</code></td>
<td style="text-align: left;">Figure format: <code>svglite</code>, <code>print</code>, <code>parent</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>sfm</code></td>
<td style="text-align: left;">System format: <code>json</code>, <code>print</code>, <code>parent</code></td>
</tr>
</tbody>
</table>
<p>In general, the user can specify the desired format by appending the format name to the URL. See <a href="https://www.opencpu.org/api.html#api-formats" class="uri">https://www.opencpu.org/api.html#api-formats</a> for examples.</p>
</section>
<section id="objective" class="level3">
<h3 class="anchored" data-anchor-id="objective">Objective</h3>
<p>This document provides a quick introduction into the main JAMES features, and how these can be assessed from <code>R</code> and from the command line.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>Target host:  test </code></pre>
</div>
</div>
</section>
</section>
<section id="features" class="level2">
<h2 class="anchored" data-anchor-id="features">Features</h2>
<section id="version-obtain-version-information" class="level3">
<h3 class="anchored" data-anchor-id="version-obtain-version-information"><strong><code>/version</code></strong>: Obtain version information</h3>
<p>Let us first check whether JAMES is running. The following code makes a simple request to JAMES to see whether it is alive and to return the version number of the underlying <code>james</code> R package. We illustrate both requests in <code>R</code> and in <code>bash</code>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>We first need to install and load packages.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"remotes"</span>, <span class="st">"httr"</span>, <span class="st">"jsonlite"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"growthcharts/jamesclient"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"growthcharts/jamesdemodata"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"growthcharts/bdsreader"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jamesclient)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jsonlite)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The server that hosts JAMES was already defined in the setup block at the top of this document. The <code>host</code> variable is now available for use in all subsequent code chunks.</p>
<p>For bash chunks that need authentication, we use an <code>auth_curl</code> helper function that automatically adds Bearer token when available.</p>
<p>We first illustrate a method that makes two requests to the server. The following commands call the <code>/version/json</code> end point in the JAMES API.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"version/json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We added the <code>/json</code> to the pathname to extract the JSON representation of the result of the <code>R</code> function <code>james::version()</code>. The function result is an object of class <code>james_post</code> and consists of various components.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "url"          "status_code"  "headers"      "all_headers"  "cookies"     
 [6] "content"      "date"         "times"        "request"      "handle"      
[11] "request_path" "parsed"       "warnings"     "messages"     "session"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://james.groeidiagrammen.nl/version/json"</code></pre>
</div>
</div>
<p>Most of the element are documented in the <code>response</code> object in the <code>httr</code> package. For example, we could use the call <code>httr::status_code(r)</code> to obtain the status code. The function <code>james_post()</code> adds the last five elements:</p>
<ul>
<li><code>r$request_path</code> echoes the endpoint, here <code>/version/json</code>;</li>
<li><code>r$parsed</code> is a parsed version of the element <code>r$content</code>. Here it is a list of elements like names of the package, its date, and so on. In case of an error of the server function, we find the error message here;</li>
<li><code>r$warnings</code> contain any warnings thrown during execution;</li>
<li><code>r$messages</code> contain any messages, e.g.&nbsp;data reading errors;</li>
<li><code>r$session</code> (like x0b3a7925f732de) is a unique session code.</li>
</ul>
<p>The <code>jamesclient::james_post()</code> function wraps the basis workhorse <code>httr::POST()</code> that does the actual server request. For illustration, we may obtain equivalent content by the POST function directly.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>auth_token <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"JAMES_BEARER_TOKEN"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"version/json"</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">parse_url</span>(host)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">modify_url</span>(url, <span class="at">path =</span> <span class="fu">file.path</span>(url<span class="sc">$</span>path, path), <span class="at">query =</span> <span class="st">"auto_unbox=true"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">POST</span>(url, <span class="fu">add_headers</span>(<span class="at">accept =</span> <span class="st">"application/json"</span>, <span class="at">Authorization =</span> auth_token))</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">fromJSON</span>(<span class="fu">content</span>(r, <span class="at">type =</span> <span class="st">"text"</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$package
[1] "james"

$packageVersion
[1] "1.11.0"

$packageDate
[1] "2026-01-23"

$Rversion
[1] "4.5.0"</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>We use the <code>curl</code> Linux command. If needed, on Ubuntu install <code>curl</code> as</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt <span class="at">-y</span> install curl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Letâ€™s find out the JAMES version number. We first illustrate a method that makes two requests to the server.</p>
<p><strong>Note</strong>: When using the ACC server, authentication is handled automatically via the <code>auth_curl</code> helper function which adds the Bearer token from <code>.bearer</code> file.</p>
<p>The following <code>bash</code> commands call the <code>/version</code> API end point</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> POST <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/version <span class="op">&gt;</span> resp</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> resp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/ocpu/tmp/x0ea820ba55c7c3/R/.val
/ocpu/tmp/x0ea820ba55c7c3/R/version
/ocpu/tmp/x0ea820ba55c7c3/stdout
/ocpu/tmp/x0ea820ba55c7c3/source
/ocpu/tmp/x0ea820ba55c7c3/console
/ocpu/tmp/x0ea820ba55c7c3/info
/ocpu/tmp/x0ea820ba55c7c3/files/DESCRIPTION</code></pre>
</div>
</div>
<p>The response to the request consists of a set of URLs created on the server, each of which contains details on the response.</p>
<p>The path element following <code>tmp/</code> is a unique session key. See <a href="https://www.opencpu.org/api.html" class="uri">https://www.opencpu.org/api.html</a> for the interpretation of the OpenCPU API.</p>
<p>The next snippet constructs the URL of a JSON representation of the result and downloads the contents of the URL as a file <code>value1</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-s</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)$(</span><span class="fu">head</span> <span class="at">-1</span> resp<span class="va">)</span>/json<span class="pp">?</span>auto_unbox=true <span class="op">&gt;</span> value1</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> value1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "package": "james",
  "packageVersion": "1.11.0",
  "packageDate": "2026-01-23",
  "Rversion": "4.5.0"
}</code></pre>
</div>
</div>
<p>The above sequence makes two requests to the server. The following code compacts both steps into one.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> POST <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/version/json<span class="pp">?</span>auto_unbox=true <span class="op">&gt;</span> value2</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> value2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "package": "james",
  "packageVersion": "1.11.0",
  "packageDate": "2026-01-23",
  "Rversion": "4.5.0"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="dataupload-upload-child-data" class="level3">
<h3 class="anchored" data-anchor-id="dataupload-upload-child-data"><strong><code>/data/upload</code></strong>: Upload child data</h3>
<p>JAMES understands data that conform to the <a href="https://www.ncj.nl/onderwerp/digitaal-dossier-jgz/bds-jgz-versiebeheer/">Basisdataset JGZ 4.0.1</a> coded as JSON according to a <a href="https://github.com/growthcharts/bdsreader/blob/master/inst/schemas/bds_v3.0.json">JSON schema</a>. This section explains how we create, validate and upload child data to JAMES.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Let us assume that we have already have child data in <code>R</code> stored as a <code>data.frame</code> or <code>tibble</code>. Here we copy the longitudinal demo data <code>maria.json</code> from the <code>bdsreader</code> package into the working directory.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>success <span class="ot">&lt;-</span> <span class="fu">file.copy</span>(<span class="fu">system.file</span>(<span class="st">"examples/maria.json"</span>, <span class="at">package =</span> <span class="st">"bdsreader"</span>), </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"maria.json"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The contents of the file is <code>json</code> format, ready for upload:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"OrganisatieCode"</span><span class="sc">:</span> <span class="dv">1234</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Referentie"</span><span class="sc">:</span> <span class="st">"fa308134-069e-49ce-9847-ccdae380ed6f"</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"ClientGegevens"</span><span class="sc">:</span> {</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Elementen"</span><span class="sc">:</span> [</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">19</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"2"</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">20</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"20181011"</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">82</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"189"</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">91</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"2"</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">110</span>,</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"990"</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">238</span>,</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"1670"</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">240</span>,</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"1900"</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Groepen"</span><span class="sc">:</span> [</span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Elementen"</span><span class="sc">:</span> [</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">63</span>,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"19950704"</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>          },</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">71</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>          },</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">62</span>,</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"01"</span></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>      },</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>      {</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Elementen"</span><span class="sc">:</span> [</span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">63</span>,</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"19901202"</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>          },</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">71</span></span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>          },</span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>          {</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">62</span>,</span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"02"</span></span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Contactmomenten"</span><span class="sc">:</span> [</span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Tijdstip"</span><span class="sc">:</span> <span class="st">"20181011"</span>,</span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Elementen"</span><span class="sc">:</span> [</span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">245</span>,</span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"990"</span></span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Tijdstip"</span><span class="sc">:</span> <span class="st">"20181111"</span>,</span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Elementen"</span><span class="sc">:</span> [</span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">235</span>,</span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"380"</span></span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb19-85"><a href="#cb19-85" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-86"><a href="#cb19-86" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">245</span>,</span>
<span id="cb19-87"><a href="#cb19-87" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"1250"</span></span>
<span id="cb19-88"><a href="#cb19-88" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb19-89"><a href="#cb19-89" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-90"><a href="#cb19-90" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">252</span>,</span>
<span id="cb19-91"><a href="#cb19-91" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"270"</span></span>
<span id="cb19-92"><a href="#cb19-92" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb19-93"><a href="#cb19-93" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb19-94"><a href="#cb19-94" aria-hidden="true" tabindex="-1"></a>    },</span>
<span id="cb19-95"><a href="#cb19-95" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb19-96"><a href="#cb19-96" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Tijdstip"</span><span class="sc">:</span> <span class="st">"20181211"</span>,</span>
<span id="cb19-97"><a href="#cb19-97" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Elementen"</span><span class="sc">:</span> [</span>
<span id="cb19-98"><a href="#cb19-98" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-99"><a href="#cb19-99" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">235</span>,</span>
<span id="cb19-100"><a href="#cb19-100" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"435"</span></span>
<span id="cb19-101"><a href="#cb19-101" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb19-102"><a href="#cb19-102" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-103"><a href="#cb19-103" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">245</span>,</span>
<span id="cb19-104"><a href="#cb19-104" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"2100"</span></span>
<span id="cb19-105"><a href="#cb19-105" aria-hidden="true" tabindex="-1"></a>        },</span>
<span id="cb19-106"><a href="#cb19-106" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb19-107"><a href="#cb19-107" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Bdsnummer"</span><span class="sc">:</span> <span class="dv">252</span>,</span>
<span id="cb19-108"><a href="#cb19-108" aria-hidden="true" tabindex="-1"></a>          <span class="st">"Waarde"</span><span class="sc">:</span> <span class="st">"305"</span></span>
<span id="cb19-109"><a href="#cb19-109" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb19-110"><a href="#cb19-110" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb19-111"><a href="#cb19-111" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-112"><a href="#cb19-112" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb19-113"><a href="#cb19-113" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are four ways to upload the data to JAMES:</p>
<ol type="1">
<li>Upload the file <code>"maria.json"</code>;</li>
<li>Convert to a string and upload;</li>
<li>Convert to a JSON object and upload;</li>
<li>Read the JSON file from a URL.</li>
</ol>
<p>The <code>/data/upload</code> API end point handles these cases as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test if Bearer token is still active</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">".bearer"</span>)) {</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  bearer_token <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">readLines</span>(<span class="st">".bearer"</span>, <span class="at">n =</span> <span class="dv">1</span>))</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"About to test james_post with token length:"</span>, <span class="fu">nchar</span>(bearer_token), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>About to test james_post with token length: 551 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as file</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="st">"maria.json"</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 201</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as string</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>js <span class="ot">&lt;-</span> <span class="fu">read_json_js</span>(fn)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> js)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 201</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as JSON object</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>jo <span class="ot">&lt;-</span> <span class="fu">read_json_jo</span>(fn)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>r3 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> jo)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 201</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as URL</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/maria.json"</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>r4 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> url)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 201</code></pre>
</div>
</div>
<p>If the status is 201, the data are uploaded to JAMES and processed. For example, the processed data after file upload is available as an R data frame under element <code>r1$parsed</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>r1<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psn
  id  name        dob       dobm       dobf  src    sex gad ga smo  bw hgtm
1 -1 Maria 2018-10-11 1990-12-02 1995-07-04 1234 female 189 27   1 990  167
  hgtf
1  190

$xyz
      age xname yname zname                  zref       x       y      z
1  0.0849   age   hgt hgt_z nl_2012_hgt_female_27  0.0849 38.0000 -0.158
2  0.1670   age   hgt hgt_z nl_2012_hgt_female_27  0.1670 43.5000  0.047
3  0.0000   age   wgt wgt_z nl_2012_wgt_female_27  0.0000  0.9900  0.190
4  0.0849   age   wgt wgt_z nl_2012_wgt_female_27  0.0849  1.2500 -0.203
5  0.1670   age   wgt wgt_z nl_2012_wgt_female_27  0.1670  2.1000  0.015
6  0.0849   age   hdc hdc_z nl_2012_hdc_female_27  0.0849 27.0000 -0.709
7  0.1670   age   hdc hdc_z nl_2012_hdc_female_27  0.1670 30.5000 -0.913
8  0.0000   age   bmi bmi_z nl_1997_bmi_female_nl  0.0000      NA     NA
9  0.0849   age   bmi bmi_z nl_1997_bmi_female_nl  0.0849  8.6565 -5.719
10 0.1670   age   bmi bmi_z nl_1997_bmi_female_nl  0.1670 11.0979 -3.767
11 0.0000   hgt   wfh wfh_z   nl_2012_wfh_female_      NA  0.9900     NA
12 0.0849   hgt   wfh wfh_z   nl_2012_wfh_female_ 38.0000  1.2500 -0.001
13 0.1670   hgt   wfh wfh_z   nl_2012_wfh_female_ 43.5000  2.1000  0.326</code></pre>
</div>
</div>
<p>The session details, including the uploaded data, will remain available for a limited time. After 30 minutes the session is wiped. The session key is your entrance to the resource within the 30-minute window. The key can be retrieved as <code>r1$session</code>. For example, to see the result of the file upload session in markdown use</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(session <span class="ot">&lt;-</span> r1<span class="sc">$</span>session)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "x00caf5265fadb6"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">james_get</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="fu">file.path</span>(session, <span class="st">"md"</span>))</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Handle both text and parsed responses</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.character</span>(resp<span class="sc">$</span>parsed)) {</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(resp<span class="sc">$</span>parsed)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(resp<span class="sc">$</span>parsed)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>

  * **psn**:

    -------------------------------------------------------------------------------
     id   name       dob          dobm         dobf      src    dnr    sex     gad
    ---- ------- ------------ ------------ ------------ ------ ----- -------- -----
     -1   Maria   2018-10-11   1990-12-02   1995-07-04   1234   NA    female   189
    -------------------------------------------------------------------------------

    Table: Table continues below

    -----------------------------------------------------------------------------------
     ga   smo   bw    hgtm   hgtf   agem   etn   pc4   blbf   blbm   eduf   edum   par
    ---- ----- ----- ------ ------ ------ ----- ----- ------ ------ ------ ------ -----
     27    1    990   167    190     NA    NA    NA     NA     NA     NA     NA    NA
    -----------------------------------------------------------------------------------

  * **xyz**:

    ----------------------------------------------------------------------------------
      age     xname   yname   zname           zref              x        y       z
    -------- ------- ------- ------- ----------------------- -------- ------- --------
     0.0849    age     hgt    hgt_z   nl_2012_hgt_female_27   0.0849    38     -0.158

     0.167     age     hgt    hgt_z   nl_2012_hgt_female_27   0.167    43.5    0.047

       0       age     wgt    wgt_z   nl_2012_wgt_female_27     0      0.99     0.19

     0.0849    age     wgt    wgt_z   nl_2012_wgt_female_27   0.0849   1.25    -0.203

     0.167     age     wgt    wgt_z   nl_2012_wgt_female_27   0.167     2.1    0.015

     0.0849    age     hdc    hdc_z   nl_2012_hdc_female_27   0.0849    27     -0.709

     0.167     age     hdc    hdc_z   nl_2012_hdc_female_27   0.167    30.5    -0.913

       0       age     bmi    bmi_z   nl_1997_bmi_female_nl     0       NA       NA

     0.0849    age     bmi    bmi_z   nl_1997_bmi_female_nl   0.0849   8.657   -5.719

     0.167     age     bmi    bmi_z   nl_1997_bmi_female_nl   0.167    11.1    -3.767

       0       hgt     wfh    wfh_z    nl_2012_wfh_female_      NA     0.99      NA

     0.0849    hgt     wfh    wfh_z    nl_2012_wfh_female_      38     1.25    -0.001

     0.167     hgt     wfh    wfh_z    nl_2012_wfh_female_     43.5     2.1    0.326
    ----------------------------------------------------------------------------------


&lt;!-- end of list --&gt;</code></pre>
</div>
</div>
<p><strong>Troubleshooting data upload</strong>: JAMES executes checks on the conversion and ranges of the data. To gain efficiency, it does not automatically validate the input data against the specified JSON schema. JAMES writes diagnostic, sometimes cryptic, messages to the directory <code>{session}/messages</code> if it finds a problem. The user can rerun the data upload with two additional flags that request extra diagnostic output.</p>
<p>Example: Suppose we compromise the data by removing the required <code>"clientDetails"</code> and the optional <code>"nestedDetails"</code> sections. The mangled input data look like:</p>
<pre><code>{"Format":"3.0","organisationCode":12345,"reference":"Maria's mangled data","clientMeasurements":[{"bdsNumber":235,"values":[{"date":"20181111","value":380},{"date":"20181211","value":435}]}]}</code></pre>
<p>Everything appears normal if we read this data by the default:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="st">"maria-mangled.json"</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>r5 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in readLines(con): incomplete final line found on 'maria-mangled.json'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>r5<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$psn
  id                 name   src
1 -1 Maria's mangled data 12345

$xyz
  xname yname zname            zref  y
1   age   hgt hgt_z nl_1997_hgt__nl 38</code></pre>
</div>
</div>
<p>If we upload with the additional <code>validate = TRUE</code> flag, JAMES runs the validation of the uploaded JSON against the JSON schema:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>r6 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn, <span class="at">validate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>mess <span class="ot">&lt;-</span> <span class="fu">james_get</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="fu">file.path</span>(r6<span class="sc">$</span>session, <span class="st">"messages"</span>))</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Handle both text and parsed responses</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.character</span>(mess<span class="sc">$</span>parsed)) {</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(mess<span class="sc">$</span>parsed)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(mess<span class="sc">$</span>parsed)</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>which indicates that the required JSON element <code>"clientDetails"</code> is missing. We inactivated the code chunk above because it may occasionally give the error â€œJAMES API request failed [400] child process has died In call: tryCatch()â€ when <code>validate = TRUE</code>. This is a known, not yet resolved issue.</p>
<p>We may drill down further by setting the <code>intermediate = TRUE</code> flag. This writes five JSON files that document the data flow into <code>{session}/files/{*}.json</code>.</p>
<p>For example, we can ask for the input data as read by JAMES by</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>r7 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn, <span class="at">validate =</span> <span class="cn">TRUE</span>, <span class="at">intermediate =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in readLines(con): incomplete final line found on 'maria-mangled.json'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">file.path</span>(host, r7<span class="sc">$</span>session, <span class="st">"files/input.json"</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://james.groeidiagrammen.nl/x06a16d282fe7b0/files/input.json"</code></pre>
</div>
</div>
<p>With <code>browseURL(url)</code> we may view the file contents in the browser. The <code>files</code> directory contains five JSON files:</p>
<ol type="1">
<li><code>files/input.json</code>: the JSON input data;</li>
<li><code>files/bds.json</code>: a data frame with info per BDS number;</li>
<li><code>files/ddi.json</code>: result of recoding BDS into GSED item names;</li>
<li><code>files/psn.json</code>: known fixed child covariates;</li>
<li><code>files/xy.json</code>: time-varying variables.</li>
</ol>
<p>Inspection of these files may uncover any problems with JAMESâ€™s understanding of the data. If needed, study the underlying R source code at <a href="https://raw.githubusercontent.com/growthcharts/bdsreader/master/R/read_bds.R" class="uri">https://raw.githubusercontent.com/growthcharts/bdsreader/master/R/read_bds.R</a>.</p>
<p>The <code>validate</code> and <code>intermediate</code> flag are useful for development and debugging. In production, we recommend leaving them at their default value (<code>FALSE</code>) and monitor any messages written to <code>{session}/messages</code>.</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>We start from child data in the file <code>maria.json</code> that we wish to process with JAMES. For testing purposes, you may change the values, but keep the general structure intact. The following commands upload the file and process the data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-sF</span> <span class="st">'txt=@maria.json'</span> <span class="at">-D</span> headers <span class="dt">\</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"accept: text/json"</span> <span class="dt">\</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/data/upload/json <span class="kw">|</span> <span class="fu">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "psn": [
    {
      "id": -1,
      "name": "Maria",
      "dob": "2018-10-11",
      "dobm": "1990-12-02",
      "dobf": "1995-07-04",
      "src": "1234",
      "sex": "female",</code></pre>
</div>
</div>
<p>Alternatively, we may read the file into a JSON string, and upload as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="va">JS</span><span class="op">=</span><span class="va">$(</span><span class="ex">jq</span> <span class="st">'.'</span> maria.json <span class="kw">|</span> <span class="ex">jq</span> <span class="at">-sR</span> <span class="st">'.'</span><span class="va">)</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/data/upload/json <span class="dt">\</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">"txt=</span><span class="va">$JS</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "psn": [
    {
      "id": -1,
      "name": "Maria",
      "dob": "2018-10-11",
      "dobm": "1990-12-02",
      "dobf": "1995-07-04",
      "src": "1234",
      "sex": "female",</code></pre>
</div>
</div>
<p>Finally, if the data are located at a URL, use</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="va">URL</span><span class="op">=</span>https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/maria.json</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/data/upload/json <span class="dt">\</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">"txt='</span><span class="va">$URL</span><span class="st">'"</span> <span class="kw">|</span> <span class="fu">head</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "psn": [
    {
      "id": -1,
      "name": "Maria",
      "dob": "2018-10-11",
      "dobm": "1990-12-02",
      "dobf": "1995-07-04",
      "src": "1234",
      "sex": "female",</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="chartsdraw-draw-child-data-on-growth-chart" class="level3">
<h3 class="anchored" data-anchor-id="chartsdraw-draw-child-data-on-growth-chart"><strong><code>/charts/draw</code></strong>: Draw child data on growth chart</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Maria is a preterm born at 27 weeks of gestational age. We already uploaded her data. We may now plot her growth data on the A4 chart for preterms as follows:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>r5 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"/charts/draw/svglite"</span>, </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">session =</span> r1<span class="sc">$</span>session,</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">chartcode =</span> <span class="st">"PMAAN27"</span>, <span class="at">selector =</span> <span class="st">"chartcode"</span>,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">query =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="fl">29.7</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="at">width =</span> <span class="dv">21</span><span class="sc">/</span><span class="fl">2.54</span>))</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(r5<span class="sc">$</span>parsed, <span class="at">con =</span> filename_chart1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./getting_started_files/figures/chart1.svg" class="img-fluid figure-img"></p>
<figcaption>Mariaâ€™s growth plotted on preterm chart, 0-15 months</figcaption>
</figure>
</div>
</div>
</div>
<p>Alternatively, we may upload data for a new child Laura and plot the data in one step:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata/bds_v3.0/smocc/Laura_S.json"</span>, <span class="at">package =</span> <span class="st">"jamesdemodata"</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>r6 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host,</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"/charts/draw/svglite"</span>, <span class="at">txt =</span> fn, </span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">chartcode =</span> <span class="st">"NMBA"</span>, <span class="at">selector =</span> <span class="st">"chartcode"</span>,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">query =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="fl">29.7</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="at">width =</span> <span class="dv">21</span><span class="sc">/</span><span class="fl">2.54</span>))</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(r6<span class="sc">$</span>parsed, <span class="at">con =</span> filename_chart2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For A4 sized charts, we recommend to generate the plot with query arguments <code>list(height = 29.7/2.54, width = 21/2.54)</code>, as illustrated above. If you want to change the chartâ€™s size in your HTML, use the <code>out.width</code> knitr chunk option, e.g.&nbsp;set <code>out.width="500px"</code>. This gives the following output.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./getting_started_files/figures/chart2.svg" class="img-fluid figure-img" width="500"></p>
<figcaption>Lauraâ€™s growth plotted on chart for Dutch girls, 0-4 years</figcaption>
</figure>
</div>
</div>
</div>
<p>JAMES features a built-in prediction module based on curve matching. Suppose we want to predict Lauraâ€™s height at the 3y9m when Laura is 2 years old. The following chart plots 25 matches to Laura as grey curves. The variation between the grey curves at age 3y9m indicates the likely variation in the prediction. The blue line indicates Lauraâ€™s predicted height at age 3y9m.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>r7 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"/charts/draw/svglite"</span>, <span class="at">txt =</span> fn, </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">chartcode =</span> <span class="st">"NMBH"</span>, <span class="at">dnr =</span> <span class="st">"2-4"</span>,</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">lo =</span> <span class="fl">2.0</span>, <span class="at">hi =</span> <span class="fl">3.75</span>, <span class="at">nmatch =</span> <span class="dv">25</span>,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">show_future =</span> <span class="cn">TRUE</span>, <span class="at">show_realized =</span> <span class="cn">TRUE</span>,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">query =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">18</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="at">width =</span> <span class="dv">18</span><span class="sc">/</span><span class="fl">2.54</span>))</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(r7<span class="sc">$</span>parsed, <span class="at">con =</span> filename_chart3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For square charts, use query arguments <code>list(height = 18/2.54, width = 18/2.54)</code> to generate the plot. In order to get the same age units as the previous chart, calculate <code>out.width</code> as <code>500/21*18 = "429px"</code>.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./getting_started_files/figures/chart3.svg" class="img-fluid figure-img" width="429"></p>
<figcaption>Predict Lauraâ€™s future height at the age of 3y9m.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>Upload <code>maria.json</code> and draw the height data on the default chart to produce an SVG file. Specify the proper <code>width</code> and <code>height</code> query parameters.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/draw/svglite?width=7.09&amp;height=7.09'</span> <span class="dt">\</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: image/*'</span> <span class="dt">\</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span> <span class="op">&gt;</span> maria1.svg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We need to set <code>chartcode</code> and <code>selector</code> parameters to choose a different chart.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/draw/svglite?width=8.27&amp;height=11.69'</span> <span class="dt">\</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: image/*'</span> <span class="dt">\</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>-F <span class="st">"chartcode='PMAAN27'"</span> <span class="dt">\</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>-F <span class="st">"selector='chartcode'"</span> <span class="dt">\</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span> <span class="op">&gt;</span> maria2.svg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>An alternative is to read the data from a URL, and use the <code>application/json</code> protocol to specify parameters.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="va">BASE_URL</span><span class="op">=</span><span class="va">$(</span><span class="fu">cat</span> .host <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s|/modules/james$||'</span><span class="va">)</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/draw/svglite?width=8.27&amp;height=11.69'</span> <span class="dt">\</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: image/*'</span> <span class="dt">\</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: application/json'</span> <span class="dt">\</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>-d <span class="st">'{</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="st">"txt": "'</span><span class="va">$BASE_URL</span><span class="st">'/ocpu/library/jamesdemodata/extdata/bds_v3.0/smocc/Laura_S.json",</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="st">"chartcode" : "NMBA",</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="st">"selector" : "chartcode"}'</span> <span class="op">&gt;</span> laura.svg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="chartslist-list-available-growth-charts" class="level3">
<h3 class="anchored" data-anchor-id="chartslist-list-available-growth-charts"><strong><code>/charts/list</code></strong>: List available growth charts</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>JAMES contains a wide variety of built-in growth charts. Each chart has a unique <code>chartcode</code>. A typical chart code looks like <code>NJAA</code>. We obtain the full list of chart codes as</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"charts/list/json"</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>charts <span class="ot">&lt;-</span> r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>charts</code> object is a data frame with 478 rows (charts) and the following variables:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(charts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "chartgrp"   "chartcode"  "population" "sex"        "design"    
[6] "side"       "language"   "week"      </code></pre>
</div>
</div>
<p>JAMES contains charts for various child populations. There are charts for Down syndrome (DS), Hindustan (HS), Moroccan (MA), Dutch (NL)), preterm (PT) and Turkish (TU) children living in the Netherlands and the WHO Growth Standards (WHOblue, WHOpink). These charts contain references for height (hgt), weight (wgt), head circumference (hdc), weight-for-height (wfh), body mass index (bmi) and D-score (dsc), as well as combined charts with multiple references on A4 format (front, back, -hdc).</p>
<p>The most important index variables are <code>population</code> and <code>side</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(charts, <span class="fu">table</span>(population, side))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          side
population -hdc back bmi dsc front hdc hgt wfh wgt
   DS         0    6   2   0     6   6   6   4   2
   HS         4    2   2   0     6   2   6   4   2
   MA         0    6   2   0     6   6   6   4   2
   NL         2    8   2   4     8   8   8   4   4
   PT         0   24   0  48    48  24  48   0  48
   TU         0    6   2   0     6   6   6   4   2
   WHOblue    0    0   0  26     2   1   2   1   1
   WHOpink    0    0   0  26     2   1   2   1   1</code></pre>
</div>
</div>
<p>The URL <code>{host}/site</code> (see below) displays the currently active chart code as a field in the left sidebar.</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>Restrict the listing to the WHO references:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/list/json'</span> <span class="dt">\</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: application/json'</span> <span class="dt">\</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>-d <span class="st">'{</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a><span class="st">"chartgrp": "who"</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="chartsvalidate-validate-chart-codes" class="level3">
<h3 class="anchored" data-anchor-id="chartsvalidate-validate-chart-codes"><strong><code>/charts/validate</code></strong>: Validate chart codes</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p>The <code>/charts/validate</code> end point attempt to find one or more user-specified chart codes. For example, the following cocde checkc five chart codes:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">path =</span> <span class="st">"charts/validate/json"</span>, </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">chartcode =</span> <span class="fu">c</span>(<span class="st">"NMAW"</span>, <span class="st">"NJAb"</span>, <span class="st">"PJAAN23"</span>, <span class="st">"PJAAN25"</span>, <span class="st">"dummy"</span>))</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<p>Check five chart codes:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/validate/json'</span> <span class="dt">\</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: application/json'</span> <span class="dt">\</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>-d <span class="st">'{</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="st">"chartcode": [</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a><span class="st">"NMAW",</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="st">"NJAB",</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="st">"PJAAN23",</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="st">"PJAAN25", </span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a><span class="st">"dummy"</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="st">]</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[true, true, false, true, false]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="dscorecalculate-calculate-d-score" class="level3">
<h3 class="anchored" data-anchor-id="dscorecalculate-calculate-d-score"><strong><code>/dscore/calculate</code></strong>: Calculate D-score</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<p>The D-score is a developmental score that is used to assess the development of children. The <code>/dscore/calculate</code> end point calculates the D-score for a child based on the uploaded data. The D-score is a continuous measure of child development, and it is calculated based on the childâ€™s age and developmental milestones.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata/bds_v3.0/smocc/Laura_S.json"</span>, <span class="at">package =</span> <span class="st">"jamesdemodata"</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"dscore/calculate/json"</span>, <span class="at">output =</span> <span class="st">"table"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>JAMES request:
  Path    : dscore/calculate/json
  Status  : 201
  Session : x04444d02767f10

Parsed response:
'data.frame':   20 obs. of  6 variables:
 $ a  : num  0 0.101 0.159 0.235 0.485 ...
 $ n  : int  0 5 3 5 10 12 11 10 9 10 ...
 $ p  : num  NA 0.6 0.667 0.6 0.5 ...
 $ d  : num  NA 15.7 18 20.9 25.9 ...
 $ sem: num  NA 3.29 3.83 3.32 2.65 ...
 $ daz: num  NA -0.11 -0.182 -0.334 -1.919 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(r<span class="sc">$</span>parsed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       a  n      p     d    sem    daz
1 0.0000  0     NA    NA     NA     NA
2 0.1013  5 0.6000 15.68 3.2945 -0.110
3 0.1588  3 0.6667 18.01 3.8258 -0.182
4 0.2355  5 0.6000 20.93 3.3205 -0.334
5 0.4846 10 0.5000 25.89 2.6506 -1.919
6 0.7529 12 0.9167 44.58 3.2903  0.674</code></pre>
</div>
</div>
<p>The D-score is found in column <code>y</code> and the DAZ is in column <code>z</code>.</p>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">

</div>
</div>
</div>
</section>
<section id="ddomaincalculate-calculate-domain-scores" class="level3">
<h3 class="anchored" data-anchor-id="ddomaincalculate-calculate-domain-scores"><strong><code>/ddomain/calculate</code></strong>: Calculate domain scores</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<p>The D-score is a one-number summary measure of child development. The <code>/ddomain/calculate</code> end point breaks down the D-score into two or more domains.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata/bds_v3.0/smocc/Laura_S.json"</span>, <span class="at">package =</span> <span class="st">"jamesdemodata"</span>)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"ddomain/calculate/json"</span>, <span class="at">output =</span> <span class="st">"table"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>JAMES request:
  Path    : ddomain/calculate/json
  Status  : 201
  Session : x0717dbaea3267e

Parsed response:
List of 6
 $ dscore    :'data.frame': 20 obs. of  6 variables:
  ..$ a  : num [1:20] 0 0.101 0.159 0.235 0.485 ...
  ..$ n  : int [1:20] 0 5 3 5 10 12 11 10 9 10 ...
  ..$ p  : num [1:20] NA 0.6 0.667 0.6 0.5 ...
  ..$ d  : num [1:20] NA 15.7 18 20.9 25.9 ...
  ..$ sem: num [1:20] NA 3.29 3.83 3.32 2.65 ...
  ..$ daz: num [1:20] NA -0.11 -0.182 -0.334 -1.919 ...
 $ grossmotor:'data.frame': 20 obs. of  2 variables:
  ..$ a: num [1:20] 0 0.101 0.159 0.235 0.485 ...
  ..$ n: int [1:20] 0 0 0 0 0 0 0 0 0 0 ...
 $ finemotor :'data.frame': 20 obs. of  2 variables:
  ..$ a: num [1:20] 0 0.101 0.159 0.235 0.485 ...
  ..$ n: int [1:20] 0 0 0 0 0 0 0 0 0 0 ...
 $ language  :'data.frame': 20 obs. of  2 variables:
  ..$ a: num [1:20] 0 0.101 0.159 0.235 0.485 ...
  ..$ n: int [1:20] 0 0 0 0 0 0 0 0 0 0 ...
 $ cognitive :'data.frame': 20 obs. of  2 variables:
  ..$ a: num [1:20] 0 0.101 0.159 0.235 0.485 ...
  ..$ n: int [1:20] 0 0 0 0 0 0 0 0 0 0 ...
 $ social    :'data.frame': 20 obs. of  2 variables:
  ..$ a: num [1:20] 0 0.101 0.159 0.235 0.485 ...
  ..$ n: int [1:20] 0 0 0 0 0 0 0 0 0 0 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(r<span class="sc">$</span>parsed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$dscore
        a  n      p     d    sem    daz
1  0.0000  0     NA    NA     NA     NA
2  0.1013  5 0.6000 15.68 3.2945 -0.110
3  0.1588  3 0.6667 18.01 3.8258 -0.182
4  0.2355  5 0.6000 20.93 3.3205 -0.334
5  0.4846 10 0.5000 25.89 2.6506 -1.919
6  0.7529 12 0.9167 44.58 3.2903  0.674
7  1.0212 11 0.9091 51.59 3.2715  0.550
8  1.2512 10 0.8000 54.82 2.9505  0.013
9  1.5387  9 0.6667 57.08 2.9298 -0.691
10 2.0397 10 1.0000 70.72 3.6740  1.377
11 0.0000  0     NA    NA     NA     NA
12 0.1013  0     NA    NA     NA     NA
13 0.1588  0     NA    NA     NA     NA
14 0.2355  0     NA    NA     NA     NA
15 0.4846  0     NA    NA     NA     NA
16 0.7529  0     NA    NA     NA     NA
17 1.0212  0     NA    NA     NA     NA
18 1.2512  0     NA    NA     NA     NA
19 1.5387  0     NA    NA     NA     NA
20 2.0397  0     NA    NA     NA     NA

$grossmotor
        a n
1  0.0000 0
2  0.1013 0
3  0.1588 0
4  0.2355 0
5  0.4846 0
6  0.7529 0
7  1.0212 0
8  1.2512 0
9  1.5387 0
10 2.0397 0
11 0.0000 0
12 0.1013 0
13 0.1588 0
14 0.2355 0
15 0.4846 0
16 0.7529 0
17 1.0212 0
18 1.2512 0
19 1.5387 0
20 2.0397 0

$finemotor
        a n
1  0.0000 0
2  0.1013 0
3  0.1588 0
4  0.2355 0
5  0.4846 0
6  0.7529 0
7  1.0212 0
8  1.2512 0
9  1.5387 0
10 2.0397 0
11 0.0000 0
12 0.1013 0
13 0.1588 0
14 0.2355 0
15 0.4846 0
16 0.7529 0
17 1.0212 0
18 1.2512 0
19 1.5387 0
20 2.0397 0

$language
        a n
1  0.0000 0
2  0.1013 0
3  0.1588 0
4  0.2355 0
5  0.4846 0
6  0.7529 0
7  1.0212 0
8  1.2512 0
9  1.5387 0
10 2.0397 0
11 0.0000 0
12 0.1013 0
13 0.1588 0
14 0.2355 0
15 0.4846 0
16 0.7529 0
17 1.0212 0
18 1.2512 0
19 1.5387 0
20 2.0397 0

$cognitive
        a n
1  0.0000 0
2  0.1013 0
3  0.1588 0
4  0.2355 0
5  0.4846 0
6  0.7529 0
7  1.0212 0
8  1.2512 0
9  1.5387 0
10 2.0397 0
11 0.0000 0
12 0.1013 0
13 0.1588 0
14 0.2355 0
15 0.4846 0
16 0.7529 0
17 1.0212 0
18 1.2512 0
19 1.5387 0
20 2.0397 0

$social
        a n
1  0.0000 0
2  0.1013 0
3  0.1588 0
4  0.2355 0
5  0.4846 0
6  0.7529 0
7  1.0212 0
8  1.2512 0
9  1.5387 0
10 2.0397 0
11 0.0000 0
12 0.1013 0
13 0.1588 0
14 0.2355 0
15 0.4846 0
16 0.7529 0
17 1.0212 0
18 1.2512 0
19 1.5387 0
20 2.0397 0</code></pre>
</div>
</div>
<p>The D-score is found in column <code>y</code> and the DAZ is in column <code>z</code>.</p>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">

</div>
</div>
</div>
</section>
<section id="vwcselect-select-van-wiechen-development-milestones-based-on-d-score-and-age" class="level3">
<h3 class="anchored" data-anchor-id="vwcselect-select-van-wiechen-development-milestones-based-on-d-score-and-age"><strong><code>/vwc/select</code></strong>: Select Van Wiechen development milestones based on D-score and age</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<p>The Van Wiechenonderzoek is a Dutch screening tool used to track a childâ€™s development from birth to age 4.5. It includes 75 milestones across three areas: fine motor skills, gross motor skills, and communication. The <code>/vwc/select</code> end point suggest the most fitting milestones for a child based on the uploaded data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata/bds_v3.0/smocc/Laura_S.json"</span>, <span class="at">package =</span> <span class="st">"jamesdemodata"</span>)</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"vwc/select/json"</span>, <span class="at">output =</span> <span class="st">"table"</span>, <span class="at">txt =</span> fn, <span class="at">percentiles =</span> <span class="cn">TRUE</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>url</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://james.groeidiagrammen.nl/vwc/select/json"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ddifmd027" "ddigmm073" "ddifmd023" "ddicmm050" "ddicmm047" "ddigmd074"</code></pre>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<p>To be added</p>
</div>
</div>
</div>
</section>
<section id="vwcpercentiles-select-van-wiechen-development-milestones-with-detailed-cut-off-information" class="level3">
<h3 class="anchored" data-anchor-id="vwcpercentiles-select-van-wiechen-development-milestones-with-detailed-cut-off-information"><strong><code>/vwc/percentiles</code></strong>: Select Van Wiechen development milestones with detailed cut-off information</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<p>It is also possible to obtain a table of age and D-score percentiles for a selection of milestones. This can be done either directly using the <code>vwc</code> argument, or indirectly from uploaded child data.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"vwc/percentiles/json"</span>,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"table"</span>,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vwc =</span> <span class="st">"ddifmd018"</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       item      D2     D10  D50     D90     D98      A2     A10     A50
1 ddifmd018 52.1101 55.6762 60.3 64.9238 68.4899 13.9437 16.4593 20.4204
      A90     A98
1 25.3019 29.7694</code></pre>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<p>To be added</p>
</div>
</div>
</div>
</section>
<section id="dcatcalculate-calculate-next-milestone-item" class="level3">
<h3 class="anchored" data-anchor-id="dcatcalculate-calculate-next-milestone-item"><strong><code>/dcat/calculate</code></strong>: Calculate next milestone item</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<p>The DCAT allows users to performa adapative testing using either <code>ddi</code> or <code>gs1</code> items.</p>
<p>The following snippet uploads child data and requests the next item to be tested based on the <code>gs1</code> instrument, the default.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"examples"</span>, <span class="st">"example_v3.1.json"</span>, <span class="at">package =</span> <span class="st">"bdsreader"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"dcat/calculate/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "gs1moc120"</code></pre>
</div>
</div>
<p>By specifying the instrument we can specify whether we want to include <code>ddi</code> or <code>gs1</code> (or even both). In the case of only <code>ddi</code> items, we must additionally specify a key that supports the <code>ddi</code> instrument.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"examples"</span>, <span class="st">"example_v3.1.json"</span>, <span class="at">package =</span> <span class="st">"bdsreader"</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"dcat/calculate/json"</span>,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">txt =</span> fn,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">instrument =</span> <span class="st">"ddi"</span>,</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">key =</span> <span class="st">"gsed2406"</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ddifmd026"</code></pre>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<p>To be added</p>
</div>
</div>
</div>
</section>
<section id="screenerslist-list-available-growth-screeners" class="level3">
<h3 class="anchored" data-anchor-id="screenerslist-list-available-growth-screeners"><strong><code>/screeners/list</code></strong>: List available growth screeners</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<p>JAMES implements several screening algorithms. The <code>/screeners/list</code> end point provides detailed information on each of these.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"/screeners/list/json"</span>,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">session =</span> r1<span class="sc">$</span>session</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(r<span class="sc">$</span>parsed)</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="fu">with</span>(r<span class="sc">$</span>parsed, <span class="fu">table</span>(yname, Categorie))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>There are currently different codes. Codes ending in <code>31</code>, e.g., <code>1031</code> or <code>2031</code> indicate normal growth, whereas code ending in <code>41</code>, <code>42</code> and so on, signal that - according to the guidelines - the child should be referred for further investigation.</p>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<p>We get the details for the guidelines for head circumference as</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/screeners/list/json'</span> <span class="dt">\</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: application/json'</span> <span class="dt">\</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>-d <span class="st">'{"ynames": "hdc"}'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="screenersapply-apply-growth-screeners-to-child-data" class="level3">
<h3 class="anchored" data-anchor-id="screenersapply-apply-growth-screeners-to-child-data"><strong><code>/screeners/apply</code></strong>: Apply growth screeners to child data</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<p>The <code>/screeners/apply</code> end point applies standard screeners to the child data. Invoke the screeners by</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"/screeners/apply/json"</span>,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">session =</span> r1<span class="sc">$</span>session</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Categorie CategorieOmschrijving Code
1      1000                Lengte 1031
2      2000               Gewicht 2031
3      3000           Hoofdomtrek 3031
                                                                                                               CodeOmschrijving
1 Het advies volgens de JGZ-richtlijn lengtegroei is als volgt: In principe geen verwijzing nodig, naar eigen inzicht handelen.
2 Het advies volgens de JGZ-richtlijn overgewicht is als volgt: In principe geen verwijzing nodig, naar eigen inzicht handelen.
3                                                               In principe geen verwijzing nodig, naar eigen inzicht handelen.
  Versie Leeftijd
1 1.24.0    0.167
2 1.24.0    0.167
3 1.24.0    0.167</code></pre>
</div>
</div>
<p>The procedure</p>
<ol type="1">
<li>calculates, per outcome, the intervals between the most recent measurement and all earlier measurements;</li>
<li>tests whether any of those intervals produces a signal according the screening algorithm;</li>
<li>reports the most recent non-standard signal that indicate abnormal growth.</li>
</ol>
<p>In the example, all returned codes (1031, 2031, 3031) end in â€œ31â€, which signals normal growth. The full table of return codes and messages can be obtained by the <code>/screeners/list</code> end point (see above).</p>
<p>There are several possibilities to visualise and integrate multiple evaluations per curve performed in step 2 into one advice. Before May 2023, JAMES returned an advice for each combination of time point and outcome, but that table presented a lot of output that was difficult to act one. Since May 2023, JAMES reports only one signal per curve.</p>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/screeners/apply/json'</span> <span class="dt">\</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: multipart/form-data'</span> <span class="dt">\</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[
  {
    "Categorie": 1000,
    "CategorieOmschrijving": "Lengte",
    "Code": 1031,
    "CodeOmschrijving": "Het advies volgens de JGZ-richtlijn lengtegroei is als volgt: In principe geen verwijzing nodig, naar eigen inzicht handelen.",
    "Versie": "1.24.0",
    "Leeftijd": 0.167
  },
  {
    "Categorie": 2000,
    "CategorieOmschrijving": "Gewicht",
    "Code": 2031,
    "CodeOmschrijving": "Het advies volgens de JGZ-richtlijn overgewicht is als volgt: In principe geen verwijzing nodig, naar eigen inzicht handelen.",
    "Versie": "1.24.0",
    "Leeftijd": 0.167
  },
  {
    "Categorie": 3000,
    "CategorieOmschrijving": "Hoofdomtrek",
    "Code": 3031,
    "CodeOmschrijving": "In principe geen verwijzing nodig, naar eigen inzicht handelen.",
    "Versie": "1.24.0",
    "Leeftijd": 0.167
  }
]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="site-request-an-empty-site" class="level3">
<h3 class="anchored" data-anchor-id="site-request-an-empty-site"><strong><code>/site</code></strong>: Request an empty site</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<p>The <code>/site</code> end point provides interactive site containing all charts, but without child data. This end point is primarily useful to obtain a quick overview of the available charts.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">browseURL</span>(<span class="fu">file.path</span>(host, <span class="st">"site"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">

</div>
</div>
</div>
</section>
<section id="siterequest-request-personalised-site" class="level3">
<h3 class="anchored" data-anchor-id="siterequest-request-personalised-site"><strong><code>/site/request</code></strong>: Request personalised site</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-14-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<p>The <code>/site/request</code> end point creates an URL to a personalised, interactive site containing all charts.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"/site/request/json"</span>,</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sitehost =</span> host,</span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">txt =</span> js</span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://james.groeidiagrammen.nl/site?session=x0f046a4a2a9cb0"</code></pre>
</div>
</div>
<p>Run the command and paste the generated URL in the address field of your browser. The starting chart is chosen by JAMES and depends on the age of the child.</p>
<p>On some systems, the above command may fail with the browser error <code>[400] Couldn't connect to server [localhost]</code>. An alternative is to break the request into two steps. First, we create a session by uploading the child data, and then we use that session to create the URL to the personalised site.</p>
<p>We start by uploading data to JAMES and het <code>r$session</code>. After that, we can use either <code>site\request</code> or manual construction of the URL to the site:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"examples/maria.json"</span>, <span class="at">package =</span> <span class="st">"bdsreader"</span>)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="co"># URL construction by /site/request</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>site1 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"site/request/json"</span>,</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">sitehost =</span> host,</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">session =</span> r<span class="sc">$</span>session,</span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">upload =</span> <span class="cn">FALSE</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>site1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>JAMES request:
  Path    : site/request/json
  Status  : 201
  Session : x005c3698953677

Parsed response:
[1] "https://james.groeidiagrammen.nl/site?session=x0b990dcb8be8a3"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or manual URL construction</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>parsed_host <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">parse_url</span>(host)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>combined_path <span class="ot">&lt;-</span> <span class="fu">paste</span>(parsed_host<span class="sc">$</span>path, <span class="st">"site"</span>, <span class="at">sep =</span> <span class="st">"/"</span>)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>combined_path <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"//+"</span>, <span class="st">"/"</span>, combined_path)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>site2 <span class="ot">&lt;-</span> httr<span class="sc">::</span><span class="fu">modify_url</span>(</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span> host,</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> combined_path,</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">query =</span> <span class="fu">list</span>(<span class="at">session =</span> r<span class="sc">$</span>session)</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>site2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "https://james.groeidiagrammen.nl/site?session=x0b990dcb8be8a3"</code></pre>
</div>
</div>
<p>Paste the generated URL in the address field of your browser. The initial page shown depends on the childâ€™s age. This two-step approach also works for remote servers. In practice, use the two-step approach is stabler and more reliable.</p>
</div>
<div id="tabset-14-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/site/request/json'</span> <span class="dt">\</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: multipart/form-data'</span> <span class="dt">\</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>-F <span class="st">"sitehost='</span><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'"</span> <span class="dt">\</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>["https://james.groeidiagrammen.nl/site?session=x09cbc44ff99b40"]</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="blendrequest-obtain-a-blend-from-multiple-end-points" class="level3">
<h3 class="anchored" data-anchor-id="blendrequest-obtain-a-blend-from-multiple-end-points"><strong><code>/blend/request</code></strong>: Obtain a blend from multiple end points</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-15-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-1" role="tab" aria-controls="tabset-15-1" aria-selected="true" href=""><strong>R</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-2" role="tab" aria-controls="tabset-15-2" aria-selected="false" href=""><strong>bash</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-15-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-15-1-tab">
<p>The <code>/blend/request</code> end point returns the results of multiple end points, and thus functions as a one-stop shop. However, currently it does not support graphics output, so use <code>/{session}/{info}/svglite</code> or <code>/charts/draw/svglite</code> for the charts.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"extdata"</span>,</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"bds_v3.0"</span>,</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"smocc"</span>,</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Laura_S.json"</span>,</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">package =</span> <span class="st">"jamesdemodata"</span>,</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">mustWork =</span> <span class="cn">TRUE</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"/blend/request/json"</span>,</span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">sitehost =</span> host,</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">txt =</span> fn</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>r</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>JAMES request:
  Path    : /blend/request/json
  Status  : 201
  Session : x0cb28df460ffe1

Parsed response:
List of 6
 $ txt      : chr "{\"Format\": \"3.0\",\"organisationCode\": 0,\"reference\": \"Laura S\",\"clientDetails\": [{\"bdsNumber\": 19,"| __truncated__
 $ session  : chr "x092ff8793ea785"
 $ site     : chr "https://james.groeidiagrammen.nl/site?session=x092ff8793ea785"
 $ child    :'data.frame':  1 obs. of  12 variables:
  ..$ id  : int -1
  ..$ name: chr "Laura S"
  ..$ dob : chr "1989-01-21"
  ..$ dobm: chr "1961-07-22"
  ..$ src : chr "0"
  ..$ sex : chr "female"
  ..$ gad : int 276
  ..$ ga  : int 39
  ..$ smo : int 0
  ..$ bw  : int 2950
  ..$ hgtm: int 164
  ..$ hgtf: int 179
 $ time     :'data.frame':  58 obs. of  8 variables:
  ..$ age  : num [1:58] 0 0.101 0.159 0.235 0.485 ...
  ..$ xname: chr [1:58] "age" "age" "age" "age" ...
  ..$ yname: chr [1:58] "hgt" "hgt" "hgt" "hgt" ...
  ..$ zname: chr [1:58] "hgt_z" "hgt_z" "hgt_z" "hgt_z" ...
  ..$ zref : chr [1:58] "nl_1997_hgt_female_nl" "nl_1997_hgt_female_nl" "nl_1997_hgt_female_nl" "nl_1997_hgt_female_nl" ...
  ..$ x    : num [1:58] 0 0.101 0.159 0.235 0.485 ...
  ..$ y    : num [1:58] 48 53.5 56 59.5 65.5 71.5 75 80 84 90 ...
  ..$ z    : num [1:58] -1.515 -0.499 -0.261 0.163 -0.259 ...
 $ screeners:'data.frame':  3 obs. of  6 variables:
  ..$ Categorie            : int [1:3] 1000 2000 3000
  ..$ CategorieOmschrijving: chr [1:3] "Lengte" "Gewicht" "Hoofdomtrek"
  ..$ Code                 : int [1:3] 1031 2075 3021
  ..$ CodeOmschrijving     : chr [1:3] "Het advies volgens de JGZ-richtlijn lengtegroei is als volgt: In principe geen verwijzing nodig, naar eigen inzicht handelen." "Het advies volgens de JGZ-richtlijn ondergewicht is als volgt: Sterke gewichtsafname (-1 SD), advies: Is er spr"| __truncated__ "De richtlijn hoofdomtrek is bedoeld voor kinderen tot 1 jaar."
  ..$ Versie               : chr [1:3] "1.24.0" "1.24.0" "1.24.0"
  ..$ Leeftijd             : num [1:3] 2.04 2.04 2.04</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(r<span class="sc">$</span>parsed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "txt"       "session"   "site"      "child"     "time"      "screeners"</code></pre>
</div>
</div>
<p>The two-step approach is:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>resp1 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>resp2 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"blend/request/json"</span>,</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">session =</span> resp1<span class="sc">$</span>session</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(resp2<span class="sc">$</span>parsed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "txt"       "session"   "site"      "child"     "time"      "screeners"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># browseURL(resp2$parsed$site)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-15-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-2-tab">
<p><strong>Note</strong>: This example requires OpenCPU library access and may not work on ACC server.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="va">BASE_URL</span><span class="op">=</span><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/blend/request/json'</span> <span class="dt">\</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: application/json'</span> <span class="dt">\</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>-d <span class="st">'{</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a><span class="st">"txt": "https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/Laura_S.json",</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="st">"sitehost": "'</span><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'",</span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="st">"blend": "standard"</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{
  "txt": "https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/Laura_S.json",
  "session": "x06ca7fa5ecf297",
  "site": "https://james.groeidiagrammen.nl/site?session=x06ca7fa5ecf297",
  "child": [
    {
      "id": -1,
      "name": "Laura S",
      "dob": "1989-01-21",
      "dobm": "1961-07-22",
      "src": "0",
      "sex": "female",
      "gad": 276,
      "ga": 39,
      "smo": 0,
      "bw": 2950,
      "hgtm": 164,
      "hgtf": 179
    }
  ],
  "time": [
    {
      "age": 0,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 0,
      "y": 48,
      "z": -1.515
    },
    {
      "age": 0.1013,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 0.1013,
      "y": 53.5,
      "z": -0.499
    },
    {
      "age": 0.1588,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 0.1588,
      "y": 56,
      "z": -0.261
    },
    {
      "age": 0.2355,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 0.2355,
      "y": 59.5,
      "z": 0.163
    },
    {
      "age": 0.4846,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 0.4846,
      "y": 65.5,
      "z": -0.259
    },
    {
      "age": 0.7529,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 0.7529,
      "y": 71.5,
      "z": 0.131
    },
    {
      "age": 1.0212,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 1.0212,
      "y": 75,
      "z": -0.18
    },
    {
      "age": 1.2512,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 1.2512,
      "y": 80,
      "z": 0.421
    },
    {
      "age": 1.5387,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 1.5387,
      "y": 84,
      "z": 0.527
    },
    {
      "age": 2.0397,
      "xname": "age",
      "yname": "hgt",
      "zname": "hgt_z",
      "zref": "nl_1997_hgt_female_nl",
      "x": 2.0397,
      "y": 90,
      "z": 0.67
    },
    {
      "age": 0,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 0,
      "y": 2.95,
      "z": -1.055
    },
    {
      "age": 0.1013,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 0.1013,
      "y": 4.18,
      "z": -0.162
    },
    {
      "age": 0.1588,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 0.1588,
      "y": 5,
      "z": 0.401
    },
    {
      "age": 0.2355,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 0.2355,
      "y": 5.9,
      "z": 0.717
    },
    {
      "age": 0.4846,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 0.4846,
      "y": 8.24,
      "z": 1.173
    },
    {
      "age": 0.7529,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 0.7529,
      "y": 9.65,
      "z": 1.052
    },
    {
      "age": 1.0212,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 1.0212,
      "y": 10.95,
      "z": 1.164
    },
    {
      "age": 1.2512,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 1.2512,
      "y": 11.9,
      "z": 1.247
    },
    {
      "age": 1.5387,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 1.5387,
      "y": 12.8,
      "z": 1.228
    },
    {
      "age": 2.0397,
      "xname": "age",
      "yname": "wgt",
      "zname": "wgt_z",
      "zref": "nl_1997_wgt_female_nl",
      "x": 2.0397,
      "y": 13.9,
      "z": 0.989
    },
    {
      "age": 0.1013,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 0.1013,
      "y": 37.6,
      "z": 0.418
    },
    {
      "age": 0.1588,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 0.1588,
      "y": 39,
      "z": 0.605
    },
    {
      "age": 0.2355,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 0.2355,
      "y": 40.5,
      "z": 0.696
    },
    {
      "age": 0.4846,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 0.4846,
      "y": 44.1,
      "z": 1.021
    },
    {
      "age": 0.7529,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 0.7529,
      "y": 46.6,
      "z": 1.418
    },
    {
      "age": 1.0212,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 1.0212,
      "y": 47.8,
      "z": 1.307
    },
    {
      "age": 1.2512,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 1.2512,
      "y": 48.7,
      "z": 1.373
    },
    {
      "age": 1.5387,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 1.5387,
      "y": 49.2,
      "z": 1.246
    },
    {
      "age": 2.0397,
      "xname": "age",
      "yname": "hdc",
      "zname": "hdc_z",
      "zref": "nl_1997_hdc_female_nl",
      "x": 2.0397,
      "y": 50,
      "z": 1.224
    },
    {
      "age": 0,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 0,
      "y": 12.8038,
      "z": 0.259
    },
    {
      "age": 0.1013,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 0.1013,
      "y": 14.6039,
      "z": 0.231
    },
    {
      "age": 0.1588,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 0.1588,
      "y": 15.9439,
      "z": 0.701
    },
    {
      "age": 0.2355,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 0.2355,
      "y": 16.6655,
      "z": 0.734
    },
    {
      "age": 0.4846,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 0.4846,
      "y": 19.2063,
      "z": 1.688
    },
    {
      "age": 0.7529,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 0.7529,
      "y": 18.8762,
      "z": 1.325
    },
    {
      "age": 1.0212,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 1.0212,
      "y": 19.4667,
      "z": 1.78
    },
    {
      "age": 1.2512,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 1.2512,
      "y": 18.5937,
      "z": 1.394
    },
    {
      "age": 1.5387,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 1.5387,
      "y": 18.1406,
      "z": 1.277
    },
    {
      "age": 2.0397,
      "xname": "age",
      "yname": "bmi",
      "zname": "bmi_z",
      "zref": "nl_1997_bmi_female_nl",
      "x": 2.0397,
      "y": 17.1605,
      "z": 0.825
    },
    {
      "age": 0.1013,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 0.1013,
      "y": 15.68,
      "z": -0.058
    },
    {
      "age": 0.1588,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 0.1588,
      "y": 18.01,
      "z": 0.022
    },
    {
      "age": 0.2355,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 0.2355,
      "y": 20.93,
      "z": -0.018
    },
    {
      "age": 0.4846,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 0.4846,
      "y": 25.89,
      "z": -1.476
    },
    {
      "age": 0.7529,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 0.7529,
      "y": 44.58,
      "z": 0.908
    },
    {
      "age": 1.0212,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 1.0212,
      "y": 51.59,
      "z": 0.9
    },
    {
      "age": 1.2512,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 1.2512,
      "y": 54.82,
      "z": 0.457
    },
    {
      "age": 1.5387,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 1.5387,
      "y": 57.08,
      "z": -0.267
    },
    {
      "age": 2.0397,
      "xname": "age",
      "yname": "dsc",
      "zname": "dsc_z",
      "zref": "ph_2023_dsc_female_40",
      "x": 2.0397,
      "y": 70.72,
      "z": 1.727
    },
    {
      "age": 0,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 48,
      "y": 2.95
    },
    {
      "age": 0.1013,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 53.5,
      "y": 4.18,
      "z": 0.215
    },
    {
      "age": 0.1588,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 56,
      "y": 5,
      "z": 0.764
    },
    {
      "age": 0.2355,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 59.5,
      "y": 5.9,
      "z": 0.744
    },
    {
      "age": 0.4846,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 65.5,
      "y": 8.24,
      "z": 1.728
    },
    {
      "age": 0.7529,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 71.5,
      "y": 9.65,
      "z": 1.342
    },
    {
      "age": 1.0212,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 75,
      "y": 10.95,
      "z": 1.726
    },
    {
      "age": 1.2512,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 80,
      "y": 11.9,
      "z": 1.379
    },
    {
      "age": 1.5387,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 84,
      "y": 12.8,
      "z": 1.242
    },
    {
      "age": 2.0397,
      "xname": "hgt",
      "yname": "wfh",
      "zname": "wfh_z",
      "zref": "nl_1997_wfh_female_nla",
      "x": 90,
      "y": 13.9,
      "z": 0.82
    }
  ],
  "screeners": [
    {
      "Categorie": 1000,
      "CategorieOmschrijving": "Lengte",
      "Code": 1031,
      "CodeOmschrijving": "Het advies volgens de JGZ-richtlijn lengtegroei is als volgt: In principe geen verwijzing nodig, naar eigen inzicht handelen.",
      "Versie": "1.24.0",
      "Leeftijd": 2.0397
    },
    {
      "Categorie": 2000,
      "CategorieOmschrijving": "Gewicht",
      "Code": 2075,
      "CodeOmschrijving": "Het advies volgens de JGZ-richtlijn ondergewicht is als volgt: Sterke gewichtsafname (-1 SD), advies: Is er sprake van een afwijkende voedingstoestand en/of klachten of symptomen die kunnen wijzen op onderliggende ziekte of problemen? Indien ja, Verwijzen naar kinderarts. Indien nee, dan is er in principe geen verwijzing nodig. Naar eigen inzicht handelen.",
      "Versie": "1.24.0",
      "Leeftijd": 2.0397
    },
    {
      "Categorie": 3000,
      "CategorieOmschrijving": "Hoofdomtrek",
      "Code": 3021,
      "CodeOmschrijving": "De richtlijn hoofdomtrek is bedoeld voor kinderen tot 1 jaar.",
      "Versie": "1.24.0",
      "Leeftijd": 2.0397
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="authentication" class="level2">
<h2 class="anchored" data-anchor-id="authentication">Authentication</h2>
<section id="overview-1" class="level3">
<h3 class="anchored" data-anchor-id="overview-1">Overview</h3>
<p>JAMES supports both open and authenticated access depending on the deployment environment:</p>
<ul>
<li><strong>Test server</strong> (<code>https://james.groeidiagrammen.nl</code>): Open access, no authentication required</li>
<li><strong>ACC and PROD server</strong> : Requires Bearer token authentication</li>
</ul>
<p>This document uses authentication throughout for compatibility with the ACC server. The authentication mechanism is handled behind the scenes but uses a simple convention that makes it easy to switch between different deployment environments.</p>
</section>
<section id="authentication-conventions" class="level3">
<h3 class="anchored" data-anchor-id="authentication-conventions">Authentication Conventions</h3>
<p>The authentication system in this document uses several files and environment variables:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 44%">
<col style="width: 26%">
<col style="width: 29%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">File/Variable</th>
<th style="text-align: left;">Purpose</th>
<th style="text-align: left;">Location</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>apikey-acc.txt</code></td>
<td style="text-align: left;">Stores your API key for the ACC server</td>
<td style="text-align: left;"><code>vignettes/articles/</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>.bearer</code></td>
<td style="text-align: left;">Stores the authentication token obtained from the API</td>
<td style="text-align: left;"><code>vignettes/articles/</code> (generated)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>.host</code></td>
<td style="text-align: left;">Stores the current server URL</td>
<td style="text-align: left;"><code>vignettes/articles/</code> (generated)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>JAMES_BEARER_TOKEN</code></td>
<td style="text-align: left;">Environment variable containing â€œBearer {token}â€</td>
<td style="text-align: left;">R session (set automatically)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>authenticate-acc.sh</code></td>
<td style="text-align: left;">Script to obtain Bearer token from API key</td>
<td style="text-align: left;"><code>vignettes/articles/</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>auth_curl.sh</code></td>
<td style="text-align: left;">Helper function that adds authentication to curl commands</td>
<td style="text-align: left;"><code>vignettes/articles/</code></td>
</tr>
</tbody>
</table>
<p><strong>Note</strong>: The <code>.bearer</code> and <code>.host</code> files are temporary and are created when rendering this document. Add <code>apikey-acc.txt</code>, <code>.bearer</code>, and <code>.host</code> to your <code>.gitignore</code> to prevent accidentally committing sensitive information.</p>
</section>
<section id="how-to-set-up-authentication" class="level3">
<h3 class="anchored" data-anchor-id="how-to-set-up-authentication">How to Set Up Authentication</h3>
<p>To use the ACC server (or any authenticated JAMES instance), follow these steps:</p>
<section id="obtain-an-api-key" class="level4">
<h4 class="anchored" data-anchor-id="obtain-an-api-key">1. Obtain an API Key</h4>
<p>Contact the JAMES administrator to obtain an API key for the ACC environment. Save this key in a file named <code>apikey-acc.txt</code> (or <code>apikey-prod.txt</code>) in the <code>vignettes/articles/</code> directory:</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"your-api-key-here"</span> <span class="op">&gt;</span> vignettes/articles/apikey-acc.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="authenticate-to-get-bearer-token" class="level4">
<h4 class="anchored" data-anchor-id="authenticate-to-get-bearer-token">2. Authenticate to Get Bearer Token</h4>
<p>Run the authentication script to obtain a Bearer token:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> vignettes/articles</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="ex">./authenticate-acc.sh</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This script: 1. Reads your API key from <code>apikey-acc.txt</code> 2. Sends it to the ACC authentication endpoint 3. Saves the returned Bearer token to <code>.bearer</code> 4. Returns exit code 0 on success, 1 on failure</p>
<p>The Bearer token is typically valid for a limited time (e.g., 24 hours). Re-run the script when the token expires.</p>
</section>
<section id="use-authentication-in-your-code" class="level4">
<h4 class="anchored" data-anchor-id="use-authentication-in-your-code">3. Use Authentication in Your Code</h4>
<p><strong>For R code</strong>: The setup chunk automatically loads the Bearer token into the <code>JAMES_BEARER_TOKEN</code> environment variable, which is used by <code>jamesclient</code> functions:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Token is automatically loaded from .bearer file</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="co"># jamesclient functions automatically use JAMES_BEARER_TOKEN</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"version/json"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>For bash code</strong>: Use the <code>auth_curl</code> helper function instead of <code>curl</code>:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Instead of: curl -X POST https://server/endpoint</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Use:</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> POST <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/endpoint</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>auth_curl</code> function automatically adds the <code>Authorization: Bearer {token}</code> header if the <code>.bearer</code> file exists.</p>
</section>
</section>
<section id="manual-authentication" class="level3">
<h3 class="anchored" data-anchor-id="manual-authentication">Manual Authentication</h3>
<p>If you prefer to handle authentication manually without the helper scripts:</p>
<p><strong>In R</strong>:</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the bearer token</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>bearer_token <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">readLines</span>(<span class="st">".bearer"</span>, <span class="at">n =</span> <span class="dv">1</span>))</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to requests</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="fu">paste0</span>(host, <span class="st">"/version/json"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_headers</span>(<span class="at">Authorization =</span> <span class="fu">paste</span>(<span class="st">"Bearer"</span>, bearer_token)) <span class="sc">|&gt;</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>In bash</strong>:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the bearer token</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="va">TOKEN</span><span class="op">=</span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to curl requests</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-sX</span> POST https://server/endpoint <span class="dt">\</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$TOKEN</span><span class="st">"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="switching-between-servers" class="level3">
<h3 class="anchored" data-anchor-id="switching-between-servers">Switching Between Servers</h3>
<p>To switch between different JAMES servers (test, acc, dev), change the <code>target_host</code> variable in the <code>{r host}</code> setup chunk at the beginning of this document:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"dev"</span>   <span class="co"># localhost for development</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"test"</span>  <span class="co"># No authentication needed</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"acc"</span>   <span class="co"># Requires authentication</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"prod"</span>  <span class="co"># Requires authentication</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The document will automatically:</p>
<ol type="1">
<li>Set the appropriate server URL in <code>host</code> variable</li>
<li>Create the <code>.host</code> file for bash chunks</li>
<li>Load authentication tokens if available</li>
<li>Use authenticated requests when needed</li>
</ol>
</section>
<section id="troubleshooting-authentication" class="level3">
<h3 class="anchored" data-anchor-id="troubleshooting-authentication">Troubleshooting Authentication</h3>
<p><strong>401 Unauthorized errors</strong>:</p>
<ul>
<li>Token may have expired - re-run <code>./authenticate-acc.sh</code></li>
<li>Check that <code>.bearer</code> file exists and is not empty</li>
<li>Verify <code>JAMES_BEARER_TOKEN</code> is set: <code>Sys.getenv("JAMES_BEARER_TOKEN")</code></li>
<li>The <code>jamesclient::james_post()</code> and <code>jamesclient::james_get()</code> functions rely on <code>JAMES_BEARER_TOKEN</code> for authentication</li>
</ul>
<p><strong>Token not found</strong>:</p>
<ul>
<li>Ensure <code>apikey-acc.txt</code> exists and contains your API key</li>
<li>Check that youâ€™re running commands from <code>vignettes/articles/</code> directory</li>
<li>Verify <code>authenticate-acc.sh</code> has execute permissions: <code>chmod +x authenticate-acc.sh</code></li>
</ul>
<p><strong>Connection timeout</strong>:</p>
<ul>
<li>Check your network connection</li>
<li>Verify the ACC server URL is correct</li>
<li>Check if youâ€™re behind a proxy that requires configuration</li>
</ul>
</section>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<section id="internal" class="level3">
<h3 class="anchored" data-anchor-id="internal">Internal</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="http://growthcharts.org/arnhem2025/">Tutorial (Dutch)</a></td>
<td style="text-align: left;">open</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://growthcharts.org/james/news/index.html">Changelog</a></td>
<td style="text-align: left;">open</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://james.groeidiagrammen.nl/docs/">OpenAPI specification</a></td>
<td style="text-align: left;">open</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://james.groeidiagrammen.nl/schemas/bds_v3.0.json">JSON data schema 3.0</a></td>
<td style="text-align: left;">open</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/growthcharts">Source files</a></td>
<td style="text-align: left;">open</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/growthcharts/james/issues">JAMES issue tracker</a></td>
<td style="text-align: left;">open</td>
</tr>
</tbody>
</table>
</section>
<section id="external" class="level3">
<h3 class="anchored" data-anchor-id="external">External</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th style="text-align: left;">Description</th>
<th style="text-align: left;">Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://tnochildhealthstatistics.shinyapps.io/james_tryout/">JAMES demo</a></td>
<td style="text-align: left;">current</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://decor.nictiz.nl/pub/jeugdgezondheidszorg/jgz-html-20240426T081156/index.html">Basisdataset JGZ</a></td>
<td style="text-align: left;">current</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://www.opencpu.org/api.html">OpenCPU API</a></td>
<td style="text-align: left;">current</td>
</tr>
</tbody>
</table>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb117" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> JAMES - Joint Automatic Measurement and Evaluation System</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> JAMES 1.11.0 (January 2026)</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Stef van Buuren</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="co">    url: https://stefvanbuuren.name</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Arjan Huizing</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a><span class="co">    url: https://nl.linkedin.com/in/arjanhjhuizing</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Iris Eekhout</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a><span class="co">    url: https://iriseekhout.com</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a><span class="co">    number-sections: false</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: united</span></span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a><span class="co">    tabset: true</span></span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-21"><a href="#cb117-21" aria-hidden="true" tabindex="-1"></a><span class="in">```{r host}</span></span>
<span id="cb117-22"><a href="#cb117-22" aria-hidden="true" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb117-23"><a href="#cb117-23" aria-hidden="true" tabindex="-1"></a><span class="in"># Define the server that hosts JAMES</span></span>
<span id="cb117-24"><a href="#cb117-24" aria-hidden="true" tabindex="-1"></a><span class="in"># Set target_host to one of: "dev", "test", "acc", "prod"</span></span>
<span id="cb117-25"><a href="#cb117-25" aria-hidden="true" tabindex="-1"></a><span class="in">target_host &lt;- "test"  # Change this to switch hosts</span></span>
<span id="cb117-26"><a href="#cb117-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-27"><a href="#cb117-27" aria-hidden="true" tabindex="-1"></a><span class="in"># Available hosts</span></span>
<span id="cb117-28"><a href="#cb117-28" aria-hidden="true" tabindex="-1"></a><span class="in">hosts &lt;- list(</span></span>
<span id="cb117-29"><a href="#cb117-29" aria-hidden="true" tabindex="-1"></a><span class="in">  dev =  "http://localhost:8080",</span></span>
<span id="cb117-30"><a href="#cb117-30" aria-hidden="true" tabindex="-1"></a><span class="in">  test = "https://james.groeidiagrammen.nl",</span></span>
<span id="cb117-31"><a href="#cb117-31" aria-hidden="true" tabindex="-1"></a><span class="in">  acc =  "https://srminterlayer-az-acc.eaglescience.nl/modules/james",</span></span>
<span id="cb117-32"><a href="#cb117-32" aria-hidden="true" tabindex="-1"></a><span class="in">  prod = "https://ijgz.eaglescience.nl/modules/james"</span></span>
<span id="cb117-33"><a href="#cb117-33" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-34"><a href="#cb117-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-35"><a href="#cb117-35" aria-hidden="true" tabindex="-1"></a><span class="in"># Set host based on target</span></span>
<span id="cb117-36"><a href="#cb117-36" aria-hidden="true" tabindex="-1"></a><span class="in">if (target_host == "acc") {</span></span>
<span id="cb117-37"><a href="#cb117-37" aria-hidden="true" tabindex="-1"></a><span class="in">  # Try ACC with authentication, fall back to test if it fails</span></span>
<span id="cb117-38"><a href="#cb117-38" aria-hidden="true" tabindex="-1"></a><span class="in">  auth_result &lt;- system("./authenticate-acc.sh", ignore.stdout = TRUE, ignore.stderr = TRUE)</span></span>
<span id="cb117-39"><a href="#cb117-39" aria-hidden="true" tabindex="-1"></a><span class="in">  if (auth_result == 0) {</span></span>
<span id="cb117-40"><a href="#cb117-40" aria-hidden="true" tabindex="-1"></a><span class="in">    host &lt;- hosts$acc</span></span>
<span id="cb117-41"><a href="#cb117-41" aria-hidden="true" tabindex="-1"></a><span class="in">    message("Using ACC server: ", host)</span></span>
<span id="cb117-42"><a href="#cb117-42" aria-hidden="true" tabindex="-1"></a><span class="in">  } else {</span></span>
<span id="cb117-43"><a href="#cb117-43" aria-hidden="true" tabindex="-1"></a><span class="in">    host &lt;- hosts$test</span></span>
<span id="cb117-44"><a href="#cb117-44" aria-hidden="true" tabindex="-1"></a><span class="in">    warning("ACC server unavailable, using fallback: ", host)</span></span>
<span id="cb117-45"><a href="#cb117-45" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb117-46"><a href="#cb117-46" aria-hidden="true" tabindex="-1"></a><span class="in">} else if (target_host == "prod") {</span></span>
<span id="cb117-47"><a href="#cb117-47" aria-hidden="true" tabindex="-1"></a><span class="in">  # Try PROD with authentication, fall back to test if it fails</span></span>
<span id="cb117-48"><a href="#cb117-48" aria-hidden="true" tabindex="-1"></a><span class="in">  auth_result &lt;- system("./authenticate-prod.sh", ignore.stdout = TRUE, ignore.stderr = TRUE)</span></span>
<span id="cb117-49"><a href="#cb117-49" aria-hidden="true" tabindex="-1"></a><span class="in">  if (auth_result == 0) {</span></span>
<span id="cb117-50"><a href="#cb117-50" aria-hidden="true" tabindex="-1"></a><span class="in">    host &lt;- hosts$acc</span></span>
<span id="cb117-51"><a href="#cb117-51" aria-hidden="true" tabindex="-1"></a><span class="in">    message("Using PROD server: ", host)</span></span>
<span id="cb117-52"><a href="#cb117-52" aria-hidden="true" tabindex="-1"></a><span class="in">  } else {</span></span>
<span id="cb117-53"><a href="#cb117-53" aria-hidden="true" tabindex="-1"></a><span class="in">    host &lt;- hosts$test</span></span>
<span id="cb117-54"><a href="#cb117-54" aria-hidden="true" tabindex="-1"></a><span class="in">    warning("PROD server unavailable, using fallback: ", host)</span></span>
<span id="cb117-55"><a href="#cb117-55" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb117-56"><a href="#cb117-56" aria-hidden="true" tabindex="-1"></a><span class="in">} else if (target_host %in% names(hosts)) {</span></span>
<span id="cb117-57"><a href="#cb117-57" aria-hidden="true" tabindex="-1"></a><span class="in">  host &lt;- hosts[[target_host]]</span></span>
<span id="cb117-58"><a href="#cb117-58" aria-hidden="true" tabindex="-1"></a><span class="in">  message("Using ", target_host, " server: ", host)</span></span>
<span id="cb117-59"><a href="#cb117-59" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb117-60"><a href="#cb117-60" aria-hidden="true" tabindex="-1"></a><span class="in">  stop("Invalid target_host. Choose: 'dev', 'test', 'acc' or 'prod'.")</span></span>
<span id="cb117-61"><a href="#cb117-61" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-62"><a href="#cb117-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-63"><a href="#cb117-63" aria-hidden="true" tabindex="-1"></a><span class="in"># Save host for bash chunks</span></span>
<span id="cb117-64"><a href="#cb117-64" aria-hidden="true" tabindex="-1"></a><span class="in">system(paste0("echo ", host, " &gt; .host"))</span></span>
<span id="cb117-65"><a href="#cb117-65" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-66"><a href="#cb117-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-67"><a href="#cb117-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb117-68"><a href="#cb117-68" aria-hidden="true" tabindex="-1"></a><span class="in">#| include: false</span></span>
<span id="cb117-69"><a href="#cb117-69" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::opts_chunk$set(echo = TRUE, fig.align = "center")</span></span>
<span id="cb117-70"><a href="#cb117-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-71"><a href="#cb117-71" aria-hidden="true" tabindex="-1"></a><span class="in"># Detect the name of the current Quarto source file (e.g. "getting_started.qmd")</span></span>
<span id="cb117-72"><a href="#cb117-72" aria-hidden="true" tabindex="-1"></a><span class="in">doc &lt;- knitr::current_input()</span></span>
<span id="cb117-73"><a href="#cb117-73" aria-hidden="true" tabindex="-1"></a><span class="in">if (is.null(doc)) {</span></span>
<span id="cb117-74"><a href="#cb117-74" aria-hidden="true" tabindex="-1"></a><span class="in">  doc &lt;- "getting_started.qmd"  # Fallback to default</span></span>
<span id="cb117-75"><a href="#cb117-75" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-76"><a href="#cb117-76" aria-hidden="true" tabindex="-1"></a><span class="in">figdir &lt;- file.path(dirname(doc),</span></span>
<span id="cb117-77"><a href="#cb117-77" aria-hidden="true" tabindex="-1"></a><span class="in">                    paste0(tools::file_path_sans_ext(basename(doc)), "_files"),</span></span>
<span id="cb117-78"><a href="#cb117-78" aria-hidden="true" tabindex="-1"></a><span class="in">                    "figures")</span></span>
<span id="cb117-79"><a href="#cb117-79" aria-hidden="true" tabindex="-1"></a><span class="in">dir.create(figdir, recursive = TRUE, showWarnings = FALSE)</span></span>
<span id="cb117-80"><a href="#cb117-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-81"><a href="#cb117-81" aria-hidden="true" tabindex="-1"></a><span class="in"># Define file names within Quarto's _files/figures/ folder</span></span>
<span id="cb117-82"><a href="#cb117-82" aria-hidden="true" tabindex="-1"></a><span class="in">filename_chart1 &lt;- file.path(figdir, "chart1.svg")</span></span>
<span id="cb117-83"><a href="#cb117-83" aria-hidden="true" tabindex="-1"></a><span class="in">filename_chart2 &lt;- file.path(figdir, "chart2.svg")</span></span>
<span id="cb117-84"><a href="#cb117-84" aria-hidden="true" tabindex="-1"></a><span class="in">filename_chart3 &lt;- file.path(figdir, "chart3.svg")</span></span>
<span id="cb117-85"><a href="#cb117-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-86"><a href="#cb117-86" aria-hidden="true" tabindex="-1"></a><span class="in"># Flag to check if we're on ACC server (for conditional chunk execution)</span></span>
<span id="cb117-87"><a href="#cb117-87" aria-hidden="true" tabindex="-1"></a><span class="in">is_acc &lt;- grepl("srminterlayer-az-acc", host)</span></span>
<span id="cb117-88"><a href="#cb117-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-89"><a href="#cb117-89" aria-hidden="true" tabindex="-1"></a><span class="in"># Set up global authentication for ACC server</span></span>
<span id="cb117-90"><a href="#cb117-90" aria-hidden="true" tabindex="-1"></a><span class="in">if (file.exists(".bearer")) {</span></span>
<span id="cb117-91"><a href="#cb117-91" aria-hidden="true" tabindex="-1"></a><span class="in">  bearer_token &lt;- trimws(readLines(".bearer", n = 1, warn = FALSE))</span></span>
<span id="cb117-92"><a href="#cb117-92" aria-hidden="true" tabindex="-1"></a><span class="in">  if (nchar(bearer_token) &gt; 0) {</span></span>
<span id="cb117-93"><a href="#cb117-93" aria-hidden="true" tabindex="-1"></a><span class="in">    Sys.setenv(JAMES_BEARER_TOKEN = paste("Bearer", bearer_token))</span></span>
<span id="cb117-94"><a href="#cb117-94" aria-hidden="true" tabindex="-1"></a><span class="in">    message("Bearer token set")</span></span>
<span id="cb117-95"><a href="#cb117-95" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb117-96"><a href="#cb117-96" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-97"><a href="#cb117-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-98"><a href="#cb117-98" aria-hidden="true" tabindex="-1"></a><span class="in"># Helper to get base URL (without /modules/james for ACC)</span></span>
<span id="cb117-99"><a href="#cb117-99" aria-hidden="true" tabindex="-1"></a><span class="in">get_base_url &lt;- function(host) {</span></span>
<span id="cb117-100"><a href="#cb117-100" aria-hidden="true" tabindex="-1"></a><span class="in">  sub("/modules/james$", "", host)</span></span>
<span id="cb117-101"><a href="#cb117-101" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-102"><a href="#cb117-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-103"><a href="#cb117-103" aria-hidden="true" tabindex="-1"></a><span class="in"># Helper to fetch URL content with authentication (for OpenCPU library access on ACC)</span></span>
<span id="cb117-104"><a href="#cb117-104" aria-hidden="true" tabindex="-1"></a><span class="in">fetch_url_content &lt;- function(url) {</span></span>
<span id="cb117-105"><a href="#cb117-105" aria-hidden="true" tabindex="-1"></a><span class="in">  # Use httr::GET which inherits our Bearer token config</span></span>
<span id="cb117-106"><a href="#cb117-106" aria-hidden="true" tabindex="-1"></a><span class="in">  resp &lt;- httr::GET(url)</span></span>
<span id="cb117-107"><a href="#cb117-107" aria-hidden="true" tabindex="-1"></a><span class="in">  if (httr::http_error(resp)) {</span></span>
<span id="cb117-108"><a href="#cb117-108" aria-hidden="true" tabindex="-1"></a><span class="in">    stop("Failed to fetch URL: ", url, " (status: ", httr::status_code(resp), ")")</span></span>
<span id="cb117-109"><a href="#cb117-109" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb117-110"><a href="#cb117-110" aria-hidden="true" tabindex="-1"></a><span class="in">  httr::content(resp, as = "text", encoding = "UTF-8")</span></span>
<span id="cb117-111"><a href="#cb117-111" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-112"><a href="#cb117-112" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-113"><a href="#cb117-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-114"><a href="#cb117-114" aria-hidden="true" tabindex="-1"></a><span class="fu">## Overview</span></span>
<span id="cb117-115"><a href="#cb117-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-116"><a href="#cb117-116" aria-hidden="true" tabindex="-1"></a>JAMES is a web service for creating and interpreting charts of child growth and development. The current version of JAMES</span>
<span id="cb117-117"><a href="#cb117-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-118"><a href="#cb117-118" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>provides access to high-quality growth charts used by the Dutch youth health care;</span>
<span id="cb117-119"><a href="#cb117-119" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>screens for abnormal height, weight and head circumference;</span>
<span id="cb117-120"><a href="#cb117-120" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>converts developmental data into the D-score;</span>
<span id="cb117-121"><a href="#cb117-121" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>predicts future growth and development.</span>
<span id="cb117-122"><a href="#cb117-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-123"><a href="#cb117-123" aria-hidden="true" tabindex="-1"></a>JAMES is a RESTful API that runs on a remote host. The system accepts requests from the Dutch Digital Child Health Record System <span class="co">[</span><span class="ot">DD-JGZ</span><span class="co">](https://www.ddjgz.nl)</span> and other clients using a </span>
<span id="cb117-124"><a href="#cb117-124" aria-hidden="true" tabindex="-1"></a>the <span class="co">[</span><span class="ot">Basisdataset JGZ 4.0.0</span><span class="co">](https://decor.nictiz.nl/pub/jeugdgezondheidszorg/jgz-html-20240426T081156/index.html)</span> protocol. Child data are coded according to the <span class="co">[</span><span class="ot">JSON data schema 3.0</span><span class="co">](https://james.groeidiagrammen.nl/schemas/bds_v3.0.json)</span>.</span>
<span id="cb117-125"><a href="#cb117-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-126"><a href="#cb117-126" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;&gt; Get to know JAMES. Browse the </span><span class="co">[</span><span class="ot">tutorial</span><span class="co">](http://growthcharts.org/arnhem2025/)</span><span class="at"> (in Dutch).</span></span>
<span id="cb117-127"><a href="#cb117-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-128"><a href="#cb117-128" aria-hidden="true" tabindex="-1"></a>The following sections illustrate how a client can make requests to JAMES using various client languages. In principle, any <span class="in">`HTTP`</span> client will work with JAMES. The document highlights some applications of the service and provides pointers to relevant background information.</span>
<span id="cb117-129"><a href="#cb117-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-130"><a href="#cb117-130" aria-hidden="true" tabindex="-1"></a>The service aids in monitoring and evaluating childhood growth. JAMES is created and maintained by the Netherlands Organisation for Applied Scientific Research TNO. Please contact Stef van Buuren &lt;stef.vanbuuren at tno.nl&gt; for further information.</span>
<span id="cb117-131"><a href="#cb117-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-132"><a href="#cb117-132" aria-hidden="true" tabindex="-1"></a><span class="fu">### Primary JAMES user functionality</span></span>
<span id="cb117-133"><a href="#cb117-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-134"><a href="#cb117-134" aria-hidden="true" tabindex="-1"></a>| Verb  | API end point              | Description                                | Maps to <span class="in">`james`</span> function |</span>
<span id="cb117-135"><a href="#cb117-135" aria-hidden="true" tabindex="-1"></a>|:------|:-------------------------- |:------------------------------------------ |:-------------------------|</span>
<span id="cb117-136"><a href="#cb117-136" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/version/{dfm}`</span>           | Obtain version information                 | <span class="in">`version()`</span>              |</span>
<span id="cb117-137"><a href="#cb117-137" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/data/upload/{dfm}`</span>       | Upload child data                          | <span class="in">`upload_data()`</span>          |</span>
<span id="cb117-138"><a href="#cb117-138" aria-hidden="true" tabindex="-1"></a>| <span class="dv">&amp;nbsp;</span>| <span class="dv">&amp;nbsp;</span>                     | <span class="dv">&amp;nbsp;</span>                                     | <span class="dv">&amp;nbsp;</span>                   |</span>
<span id="cb117-139"><a href="#cb117-139" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/charts/draw/{ffm}`</span>       | Draw child data on growth chart            | <span class="in">`draw_chart()`</span>           |</span>
<span id="cb117-140"><a href="#cb117-140" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/charts/list/{dfm}`</span>       | List available growth charts               | <span class="in">`list_charts()`</span>          |</span>
<span id="cb117-141"><a href="#cb117-141" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/charts/validate/{dfm}`</span>   | Validate a chart code                      | <span class="in">`validate_chartcode()`</span>   |</span>
<span id="cb117-142"><a href="#cb117-142" aria-hidden="true" tabindex="-1"></a>| <span class="dv">&amp;nbsp;</span>| <span class="dv">&amp;nbsp;</span>                     | <span class="dv">&amp;nbsp;</span>                                     | <span class="dv">&amp;nbsp;</span>                   |</span>
<span id="cb117-143"><a href="#cb117-143" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/dscore/calculate/{dfm}`</span>  | Calculate developmental score (D-score)    | <span class="in">`calculate_dscore()`</span>     |</span>
<span id="cb117-144"><a href="#cb117-144" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/ddomain/calculate/{dfm}`</span> | Calculate developmental domain scores      | <span class="in">`calculate_ddomain()`</span>    |</span>
<span id="cb117-145"><a href="#cb117-145" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/vwc/select/{dfm}`</span>        | Select developmental milestones for age    | <span class="in">`select_vwc()`</span>           |</span>
<span id="cb117-146"><a href="#cb117-146" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/vwc/percentiles/{dfm}`</span>   | Obtain developmental milestone percentiles | <span class="in">`percentiles_vwc()`</span>      |</span>
<span id="cb117-147"><a href="#cb117-147" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/dcat/calculate/{dfm}`</span>    | Adaptive testing of milestones             | <span class="in">`dcat()`</span>                 |</span>
<span id="cb117-148"><a href="#cb117-148" aria-hidden="true" tabindex="-1"></a>| <span class="dv">&amp;nbsp;</span>| <span class="dv">&amp;nbsp;</span>                     | <span class="dv">&amp;nbsp;</span>                                     | <span class="dv">&amp;nbsp;</span>                   |</span>
<span id="cb117-149"><a href="#cb117-149" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/screeners/list/{dfm}`</span>    | List available growth screeners            | <span class="in">`list_screeners()`</span>       |</span>
<span id="cb117-150"><a href="#cb117-150" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/screeners/apply/{dfm}`</span>   | Apply growth screeners to child data       | <span class="in">`apply_screeners()`</span>      |</span>
<span id="cb117-151"><a href="#cb117-151" aria-hidden="true" tabindex="-1"></a>| <span class="dv">&amp;nbsp;</span>| <span class="dv">&amp;nbsp;</span>                     | <span class="dv">&amp;nbsp;</span>                                     | <span class="dv">&amp;nbsp;</span>                   |</span>
<span id="cb117-152"><a href="#cb117-152" aria-hidden="true" tabindex="-1"></a>| GET   | <span class="in">`/site`</span>                    | Request empty site                         | <span class="in">`request_site()`</span>         |</span>
<span id="cb117-153"><a href="#cb117-153" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/site/request/{dfm}`</span>      | Request personalised site                  | <span class="in">`request_site()`</span>         |</span>
<span id="cb117-154"><a href="#cb117-154" aria-hidden="true" tabindex="-1"></a>| <span class="dv">&amp;nbsp;</span>| <span class="dv">&amp;nbsp;</span>                     | <span class="dv">&amp;nbsp;</span>                                     | <span class="dv">&amp;nbsp;</span>                   |</span>
<span id="cb117-155"><a href="#cb117-155" aria-hidden="true" tabindex="-1"></a>| POST  | <span class="in">`/blend/request/{sfm}`</span>     | Obtain a blend from multiple end points    | <span class="in">`request_blend()`</span>        |</span>
<span id="cb117-156"><a href="#cb117-156" aria-hidden="true" tabindex="-1"></a>| <span class="dv">&amp;nbsp;</span>| <span class="dv">&amp;nbsp;</span>                     | <span class="dv">&amp;nbsp;</span>                                     | <span class="dv">&amp;nbsp;</span>                   |</span>
<span id="cb117-157"><a href="#cb117-157" aria-hidden="true" tabindex="-1"></a>| GET   | <span class="in">`/{session}/{info}`</span>        | Extract session details                    |                          |</span>
<span id="cb117-158"><a href="#cb117-158" aria-hidden="true" tabindex="-1"></a>| GET   | <span class="in">`/{2}/{1}/man`</span>             | Consult R help                             | <span class="in">`help({1}_{2})`</span>          |</span>
<span id="cb117-159"><a href="#cb117-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-160"><a href="#cb117-160" aria-hidden="true" tabindex="-1"></a>The table lists the defined API end points and the mapping to each end point to the corresponding R function. </span>
<span id="cb117-161"><a href="#cb117-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-162"><a href="#cb117-162" aria-hidden="true" tabindex="-1"></a>The definition of the JAMES endpoints can be found at <span class="co">[</span><span class="ot">OpenAPI specification</span><span class="co">](https://james.groeidiagrammen.nl/docs/)</span>.</span>
<span id="cb117-163"><a href="#cb117-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-164"><a href="#cb117-164" aria-hidden="true" tabindex="-1"></a><span class="fu">### Output formats</span></span>
<span id="cb117-165"><a href="#cb117-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-166"><a href="#cb117-166" aria-hidden="true" tabindex="-1"></a>JAMES is built on top of the <span class="co">[</span><span class="ot">**OpenCPU API**</span><span class="co">](https://www.opencpu.org/api.html)</span>, a powerful and flexible way for online deployment of R functionality. Although it is possible to use JAMES without knowledge of OpenCPU, it is useful to browse the OpenCPU features. </span>
<span id="cb117-167"><a href="#cb117-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-168"><a href="#cb117-168" aria-hidden="true" tabindex="-1"></a>OpenCPU offers multiple output formats out of the box. JAMES supports a subset of these through the <span class="in">`/{session}/{info}`</span> end point. Here <span class="in">`session`</span> is a special session code generated by OpenCPU that identifies the server location containing the results of a request. The output format <span class="in">`info`</span> is one of the following:</span>
<span id="cb117-169"><a href="#cb117-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-170"><a href="#cb117-170" aria-hidden="true" tabindex="-1"></a>| <span class="in">`{info}`</span>   | Description                                    |</span>
<span id="cb117-171"><a href="#cb117-171" aria-hidden="true" tabindex="-1"></a>|:-----------|:-----------------------------------------------|</span>
<span id="cb117-172"><a href="#cb117-172" aria-hidden="true" tabindex="-1"></a>| <span class="in">`json`</span>     | Function result as JSON                        |</span>
<span id="cb117-173"><a href="#cb117-173" aria-hidden="true" tabindex="-1"></a>| <span class="in">`print`</span>    | Function result as formatted as print          |</span>
<span id="cb117-174"><a href="#cb117-174" aria-hidden="true" tabindex="-1"></a>| <span class="in">`csv`</span>      | Function result as comma-separated format      |</span>
<span id="cb117-175"><a href="#cb117-175" aria-hidden="true" tabindex="-1"></a>| <span class="in">`tab`</span>      | Function result as tab-delimited format        |</span>
<span id="cb117-176"><a href="#cb117-176" aria-hidden="true" tabindex="-1"></a>| <span class="in">`md`</span>       | Function result as markdown format             |</span>
<span id="cb117-177"><a href="#cb117-177" aria-hidden="true" tabindex="-1"></a>| <span class="in">`svglite`</span>  | Function result as SVG graph                   |</span>
<span id="cb117-178"><a href="#cb117-178" aria-hidden="true" tabindex="-1"></a>| <span class="in">`warnings`</span> | Warnings from the R execution                  |</span>
<span id="cb117-179"><a href="#cb117-179" aria-hidden="true" tabindex="-1"></a>| <span class="in">`messages`</span> | Messages, especially data validation info      |</span>
<span id="cb117-180"><a href="#cb117-180" aria-hidden="true" tabindex="-1"></a>| <span class="in">`console`</span>  | Console print out, useful for locating errors  |</span>
<span id="cb117-181"><a href="#cb117-181" aria-hidden="true" tabindex="-1"></a>| <span class="in">`stdout`</span>   | Standard output                                |</span>
<span id="cb117-182"><a href="#cb117-182" aria-hidden="true" tabindex="-1"></a>| <span class="in">`info`</span>     | Overview of JAMES deployment                   |</span>
<span id="cb117-183"><a href="#cb117-183" aria-hidden="true" tabindex="-1"></a>| <span class="in">`parent`</span>   | Parent directory of all OpenCPU session output |</span>
<span id="cb117-184"><a href="#cb117-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-185"><a href="#cb117-185" aria-hidden="true" tabindex="-1"></a>In addition, the user can request the function result in a particular form. JAMES distinguishes the following groups of formats.</span>
<span id="cb117-186"><a href="#cb117-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-187"><a href="#cb117-187" aria-hidden="true" tabindex="-1"></a>| Format group | Description                                                |</span>
<span id="cb117-188"><a href="#cb117-188" aria-hidden="true" tabindex="-1"></a>|:-------------|:-----------------------------------------------------------|</span>
<span id="cb117-189"><a href="#cb117-189" aria-hidden="true" tabindex="-1"></a>| <span class="in">`dfm`</span>        | Data format: <span class="in">`json`</span>, <span class="in">`csv`</span>, <span class="in">`tab`</span>, <span class="in">`md`</span>, <span class="in">`print`</span>, <span class="in">`parent`</span> |</span>
<span id="cb117-190"><a href="#cb117-190" aria-hidden="true" tabindex="-1"></a>| <span class="in">`ffm`</span>        | Figure format: <span class="in">`svglite`</span>, <span class="in">`print`</span>, <span class="in">`parent`</span>                |</span>
<span id="cb117-191"><a href="#cb117-191" aria-hidden="true" tabindex="-1"></a>| <span class="in">`sfm`</span>        | System format:  <span class="in">`json`</span>, <span class="in">`print`</span>, <span class="in">`parent`</span>                  |</span>
<span id="cb117-192"><a href="#cb117-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-193"><a href="#cb117-193" aria-hidden="true" tabindex="-1"></a>In general, the user can specify the desired format by appending the format name to the URL. See <span class="ot">&lt;https://www.opencpu.org/api.html#api-formats&gt;</span> for examples.</span>
<span id="cb117-194"><a href="#cb117-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-195"><a href="#cb117-195" aria-hidden="true" tabindex="-1"></a><span class="fu">### Objective</span></span>
<span id="cb117-196"><a href="#cb117-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-197"><a href="#cb117-197" aria-hidden="true" tabindex="-1"></a>This document provides a quick introduction into the main JAMES features, and how these can be assessed from <span class="in">`R`</span> and from the command line.</span>
<span id="cb117-198"><a href="#cb117-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-199"><a href="#cb117-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r hostset, echo = FALSE}</span></span>
<span id="cb117-200"><a href="#cb117-200" aria-hidden="true" tabindex="-1"></a><span class="in"># print the host for verification</span></span>
<span id="cb117-201"><a href="#cb117-201" aria-hidden="true" tabindex="-1"></a><span class="in">cat("Target host: ", target_host, "\n")</span></span>
<span id="cb117-202"><a href="#cb117-202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-203"><a href="#cb117-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-204"><a href="#cb117-204" aria-hidden="true" tabindex="-1"></a><span class="fu">## Features </span></span>
<span id="cb117-205"><a href="#cb117-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-206"><a href="#cb117-206" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/version`**: Obtain version information</span></span>
<span id="cb117-207"><a href="#cb117-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-208"><a href="#cb117-208" aria-hidden="true" tabindex="-1"></a>Let us first check whether JAMES is running. The following code makes a simple request to JAMES to see whether it is alive and to return the version number of the underlying <span class="in">`james`</span> R package. We illustrate both requests in <span class="in">`R`</span> and in <span class="in">`bash`</span>.</span>
<span id="cb117-209"><a href="#cb117-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-210"><a href="#cb117-210" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-211"><a href="#cb117-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-212"><a href="#cb117-212" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-213"><a href="#cb117-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-214"><a href="#cb117-214" aria-hidden="true" tabindex="-1"></a>We first need to install and load packages.</span>
<span id="cb117-215"><a href="#cb117-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-216"><a href="#cb117-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{r httr, eval=FALSE}</span></span>
<span id="cb117-217"><a href="#cb117-217" aria-hidden="true" tabindex="-1"></a><span class="in">install.packages(c("remotes", "httr", "jsonlite"))</span></span>
<span id="cb117-218"><a href="#cb117-218" aria-hidden="true" tabindex="-1"></a><span class="in">remotes::install_github("growthcharts/jamesclient")</span></span>
<span id="cb117-219"><a href="#cb117-219" aria-hidden="true" tabindex="-1"></a><span class="in">remotes::install_github("growthcharts/jamesdemodata")</span></span>
<span id="cb117-220"><a href="#cb117-220" aria-hidden="true" tabindex="-1"></a><span class="in">remotes::install_github("growthcharts/bdsreader")</span></span>
<span id="cb117-221"><a href="#cb117-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-222"><a href="#cb117-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-223"><a href="#cb117-223" aria-hidden="true" tabindex="-1"></a><span class="in">```{r load}</span></span>
<span id="cb117-224"><a href="#cb117-224" aria-hidden="true" tabindex="-1"></a><span class="in">library(jamesclient)</span></span>
<span id="cb117-225"><a href="#cb117-225" aria-hidden="true" tabindex="-1"></a><span class="in">library(httr)</span></span>
<span id="cb117-226"><a href="#cb117-226" aria-hidden="true" tabindex="-1"></a><span class="in">library(jsonlite)</span></span>
<span id="cb117-227"><a href="#cb117-227" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-228"><a href="#cb117-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-229"><a href="#cb117-229" aria-hidden="true" tabindex="-1"></a>The server that hosts JAMES was already defined in the setup block at the top of this document. The <span class="in">`host`</span> variable is now available for use in all subsequent code chunks.</span>
<span id="cb117-230"><a href="#cb117-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-231"><a href="#cb117-231" aria-hidden="true" tabindex="-1"></a>For bash chunks that need authentication, we use an <span class="in">`auth_curl`</span> helper function that automatically adds Bearer token when available.</span>
<span id="cb117-232"><a href="#cb117-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-233"><a href="#cb117-233" aria-hidden="true" tabindex="-1"></a>We first illustrate a method that makes two requests to the server. The following commands call the <span class="in">`/version/json`</span> end point in the JAMES API.</span>
<span id="cb117-234"><a href="#cb117-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-235"><a href="#cb117-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r versiontwostep}</span></span>
<span id="cb117-236"><a href="#cb117-236" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(host = host, path = "version/json")</span></span>
<span id="cb117-237"><a href="#cb117-237" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-238"><a href="#cb117-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-239"><a href="#cb117-239" aria-hidden="true" tabindex="-1"></a>We added the <span class="in">`/json`</span> to the pathname to extract the JSON representation of the result of the <span class="in">`R`</span> function <span class="in">`james::version()`</span>. The function result is an object of class <span class="in">`james_post`</span> and consists of various components.</span>
<span id="cb117-240"><a href="#cb117-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-243"><a href="#cb117-243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-244"><a href="#cb117-244" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(r)</span>
<span id="cb117-245"><a href="#cb117-245" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>url</span>
<span id="cb117-246"><a href="#cb117-246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-247"><a href="#cb117-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-248"><a href="#cb117-248" aria-hidden="true" tabindex="-1"></a>Most of the element are documented in the <span class="in">`response`</span> object in the <span class="in">`httr`</span> package. For example, we could use the call <span class="in">`httr::status_code(r)`</span> to obtain the status code. The function <span class="in">`james_post()`</span> adds the last five elements:</span>
<span id="cb117-249"><a href="#cb117-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-250"><a href="#cb117-250" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`r$request_path`</span> echoes the endpoint, here <span class="in">`/version/json`</span>;</span>
<span id="cb117-251"><a href="#cb117-251" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`r$parsed`</span> is a parsed version of the element <span class="in">`r$content`</span>. Here it is a list of elements like names of the package, its date, and so on. In case of an error of the server function, we find the error message here;</span>
<span id="cb117-252"><a href="#cb117-252" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`r$warnings`</span> contain any warnings thrown during execution;</span>
<span id="cb117-253"><a href="#cb117-253" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`r$messages`</span> contain any messages, e.g. data reading errors;</span>
<span id="cb117-254"><a href="#cb117-254" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`r$session`</span> (like <span class="in">`r r$session`</span>) is a unique session code.</span>
<span id="cb117-255"><a href="#cb117-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-256"><a href="#cb117-256" aria-hidden="true" tabindex="-1"></a>The <span class="in">`jamesclient::james_post()`</span> function wraps the basis workhorse <span class="in">`httr::POST()`</span> that does the actual server request. For illustration, we may obtain equivalent content by the POST function directly.</span>
<span id="cb117-257"><a href="#cb117-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-260"><a href="#cb117-260" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-261"><a href="#cb117-261" aria-hidden="true" tabindex="-1"></a>auth_token <span class="ot">&lt;-</span> <span class="fu">Sys.getenv</span>(<span class="st">"JAMES_BEARER_TOKEN"</span>)</span>
<span id="cb117-262"><a href="#cb117-262" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">"version/json"</span></span>
<span id="cb117-263"><a href="#cb117-263" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">parse_url</span>(host)</span>
<span id="cb117-264"><a href="#cb117-264" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">modify_url</span>(url, <span class="at">path =</span> <span class="fu">file.path</span>(url<span class="sc">$</span>path, path), <span class="at">query =</span> <span class="st">"auto_unbox=true"</span>)</span>
<span id="cb117-265"><a href="#cb117-265" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">POST</span>(url, <span class="fu">add_headers</span>(<span class="at">accept =</span> <span class="st">"application/json"</span>, <span class="at">Authorization =</span> auth_token))</span>
<span id="cb117-266"><a href="#cb117-266" aria-hidden="true" tabindex="-1"></a><span class="fu">fromJSON</span>(<span class="fu">content</span>(r, <span class="at">type =</span> <span class="st">"text"</span>, <span class="at">encoding =</span> <span class="st">"UTF-8"</span>))</span>
<span id="cb117-267"><a href="#cb117-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-268"><a href="#cb117-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-269"><a href="#cb117-269" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-270"><a href="#cb117-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-271"><a href="#cb117-271" aria-hidden="true" tabindex="-1"></a>We use the <span class="in">`curl`</span> Linux command. If needed, on Ubuntu install <span class="in">`curl`</span> as</span>
<span id="cb117-272"><a href="#cb117-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-273"><a href="#cb117-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash, eval=FALSE}</span></span>
<span id="cb117-274"><a href="#cb117-274" aria-hidden="true" tabindex="-1"></a><span class="in">sudo apt update</span></span>
<span id="cb117-275"><a href="#cb117-275" aria-hidden="true" tabindex="-1"></a><span class="in">sudo apt -y install curl</span></span>
<span id="cb117-276"><a href="#cb117-276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-277"><a href="#cb117-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-278"><a href="#cb117-278" aria-hidden="true" tabindex="-1"></a>Let's find out the JAMES version number. We first illustrate a method that makes two requests to the server.</span>
<span id="cb117-279"><a href="#cb117-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-280"><a href="#cb117-280" aria-hidden="true" tabindex="-1"></a>**Note**: When using the ACC server, authentication is handled automatically via the <span class="in">`auth_curl`</span> helper function which adds the Bearer token from <span class="in">`.bearer`</span> file.</span>
<span id="cb117-281"><a href="#cb117-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-282"><a href="#cb117-282" aria-hidden="true" tabindex="-1"></a>The following <span class="in">`bash`</span> commands call the <span class="in">`/version`</span> API end point</span>
<span id="cb117-283"><a href="#cb117-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-284"><a href="#cb117-284" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash bashversion}</span></span>
<span id="cb117-285"><a href="#cb117-285" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-286"><a href="#cb117-286" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -sX POST $(cat .host)/version &gt; resp</span></span>
<span id="cb117-287"><a href="#cb117-287" aria-hidden="true" tabindex="-1"></a><span class="in">cat resp</span></span>
<span id="cb117-288"><a href="#cb117-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-289"><a href="#cb117-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-290"><a href="#cb117-290" aria-hidden="true" tabindex="-1"></a>The response to the request consists of a set of URLs created on the server, each of which contains details on the response. </span>
<span id="cb117-291"><a href="#cb117-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-292"><a href="#cb117-292" aria-hidden="true" tabindex="-1"></a>The path element following <span class="in">`tmp/`</span> is a unique session key. See <span class="ot">&lt;https://www.opencpu.org/api.html&gt;</span> for the interpretation of the OpenCPU API.</span>
<span id="cb117-293"><a href="#cb117-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-294"><a href="#cb117-294" aria-hidden="true" tabindex="-1"></a>The next snippet constructs the URL of a JSON representation of the result and downloads the contents of the URL as a file <span class="in">`value1`</span>.</span>
<span id="cb117-295"><a href="#cb117-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-296"><a href="#cb117-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash bashvalue1}</span></span>
<span id="cb117-297"><a href="#cb117-297" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-298"><a href="#cb117-298" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -s $(cat .host)$(head -1 resp)/json?auto_unbox=true &gt; value1</span></span>
<span id="cb117-299"><a href="#cb117-299" aria-hidden="true" tabindex="-1"></a><span class="in">cat value1</span></span>
<span id="cb117-300"><a href="#cb117-300" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-301"><a href="#cb117-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-302"><a href="#cb117-302" aria-hidden="true" tabindex="-1"></a>The above sequence makes two requests to the server. The following code compacts both steps into one.</span>
<span id="cb117-303"><a href="#cb117-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-304"><a href="#cb117-304" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash vashvalue2}</span></span>
<span id="cb117-305"><a href="#cb117-305" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-306"><a href="#cb117-306" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -sX POST $(cat .host)/version/json?auto_unbox=true &gt; value2</span></span>
<span id="cb117-307"><a href="#cb117-307" aria-hidden="true" tabindex="-1"></a><span class="in">cat value2</span></span>
<span id="cb117-308"><a href="#cb117-308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-309"><a href="#cb117-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-310"><a href="#cb117-310" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash removevalues, echo=FALSE}</span></span>
<span id="cb117-311"><a href="#cb117-311" aria-hidden="true" tabindex="-1"></a><span class="in">rm resp value1 value2</span></span>
<span id="cb117-312"><a href="#cb117-312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-313"><a href="#cb117-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-314"><a href="#cb117-314" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-315"><a href="#cb117-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-316"><a href="#cb117-316" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/data/upload`**: Upload child data</span></span>
<span id="cb117-317"><a href="#cb117-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-318"><a href="#cb117-318" aria-hidden="true" tabindex="-1"></a>JAMES understands data that conform to the <span class="co">[</span><span class="ot">Basisdataset JGZ 4.0.1</span><span class="co">](https://www.ncj.nl/onderwerp/digitaal-dossier-jgz/bds-jgz-versiebeheer/)</span> coded as JSON according to a <span class="co">[</span><span class="ot">JSON schema</span><span class="co">](https://github.com/growthcharts/bdsreader/blob/master/inst/schemas/bds_v3.0.json)</span>. This section explains how we create, validate and upload child data to JAMES.</span>
<span id="cb117-319"><a href="#cb117-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-320"><a href="#cb117-320" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-321"><a href="#cb117-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-322"><a href="#cb117-322" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-323"><a href="#cb117-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-324"><a href="#cb117-324" aria-hidden="true" tabindex="-1"></a>Let us assume that we have already have child data in <span class="in">`R`</span> stored as a <span class="in">`data.frame`</span> or <span class="in">`tibble`</span>. Here we copy the longitudinal demo data <span class="in">`maria.json`</span> from the <span class="in">`bdsreader`</span> package into the working directory.</span>
<span id="cb117-325"><a href="#cb117-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-328"><a href="#cb117-328" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-329"><a href="#cb117-329" aria-hidden="true" tabindex="-1"></a>success <span class="ot">&lt;-</span> <span class="fu">file.copy</span>(<span class="fu">system.file</span>(<span class="st">"examples/maria.json"</span>, <span class="at">package =</span> <span class="st">"bdsreader"</span>), </span>
<span id="cb117-330"><a href="#cb117-330" aria-hidden="true" tabindex="-1"></a>                     <span class="st">"maria.json"</span>, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb117-331"><a href="#cb117-331" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-332"><a href="#cb117-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-333"><a href="#cb117-333" aria-hidden="true" tabindex="-1"></a>The contents of the file is <span class="in">`json`</span> format, ready for upload:</span>
<span id="cb117-334"><a href="#cb117-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-335"><a href="#cb117-335" aria-hidden="true" tabindex="-1"></a><span class="in">```{r, eval=FALSE}</span></span>
<span id="cb117-336"><a href="#cb117-336" aria-hidden="true" tabindex="-1"></a><span class="in">{</span></span>
<span id="cb117-337"><a href="#cb117-337" aria-hidden="true" tabindex="-1"></a><span class="in">  "OrganisatieCode": 1234,</span></span>
<span id="cb117-338"><a href="#cb117-338" aria-hidden="true" tabindex="-1"></a><span class="in">  "Referentie": "fa308134-069e-49ce-9847-ccdae380ed6f",</span></span>
<span id="cb117-339"><a href="#cb117-339" aria-hidden="true" tabindex="-1"></a><span class="in">  "ClientGegevens": {</span></span>
<span id="cb117-340"><a href="#cb117-340" aria-hidden="true" tabindex="-1"></a><span class="in">    "Elementen": [</span></span>
<span id="cb117-341"><a href="#cb117-341" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-342"><a href="#cb117-342" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 19,</span></span>
<span id="cb117-343"><a href="#cb117-343" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "2"</span></span>
<span id="cb117-344"><a href="#cb117-344" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-345"><a href="#cb117-345" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-346"><a href="#cb117-346" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 20,</span></span>
<span id="cb117-347"><a href="#cb117-347" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "20181011"</span></span>
<span id="cb117-348"><a href="#cb117-348" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-349"><a href="#cb117-349" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-350"><a href="#cb117-350" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 82,</span></span>
<span id="cb117-351"><a href="#cb117-351" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "189"</span></span>
<span id="cb117-352"><a href="#cb117-352" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-353"><a href="#cb117-353" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-354"><a href="#cb117-354" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 91,</span></span>
<span id="cb117-355"><a href="#cb117-355" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "2"</span></span>
<span id="cb117-356"><a href="#cb117-356" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-357"><a href="#cb117-357" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-358"><a href="#cb117-358" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 110,</span></span>
<span id="cb117-359"><a href="#cb117-359" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "990"</span></span>
<span id="cb117-360"><a href="#cb117-360" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-361"><a href="#cb117-361" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-362"><a href="#cb117-362" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 238,</span></span>
<span id="cb117-363"><a href="#cb117-363" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "1670"</span></span>
<span id="cb117-364"><a href="#cb117-364" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-365"><a href="#cb117-365" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-366"><a href="#cb117-366" aria-hidden="true" tabindex="-1"></a><span class="in">        "Bdsnummer": 240,</span></span>
<span id="cb117-367"><a href="#cb117-367" aria-hidden="true" tabindex="-1"></a><span class="in">        "Waarde": "1900"</span></span>
<span id="cb117-368"><a href="#cb117-368" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb117-369"><a href="#cb117-369" aria-hidden="true" tabindex="-1"></a><span class="in">    ],</span></span>
<span id="cb117-370"><a href="#cb117-370" aria-hidden="true" tabindex="-1"></a><span class="in">    "Groepen": [</span></span>
<span id="cb117-371"><a href="#cb117-371" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-372"><a href="#cb117-372" aria-hidden="true" tabindex="-1"></a><span class="in">        "Elementen": [</span></span>
<span id="cb117-373"><a href="#cb117-373" aria-hidden="true" tabindex="-1"></a><span class="in">          {</span></span>
<span id="cb117-374"><a href="#cb117-374" aria-hidden="true" tabindex="-1"></a><span class="in">            "Bdsnummer": 63,</span></span>
<span id="cb117-375"><a href="#cb117-375" aria-hidden="true" tabindex="-1"></a><span class="in">            "Waarde": "19950704"</span></span>
<span id="cb117-376"><a href="#cb117-376" aria-hidden="true" tabindex="-1"></a><span class="in">          },</span></span>
<span id="cb117-377"><a href="#cb117-377" aria-hidden="true" tabindex="-1"></a><span class="in">          {</span></span>
<span id="cb117-378"><a href="#cb117-378" aria-hidden="true" tabindex="-1"></a><span class="in">            "Bdsnummer": 71</span></span>
<span id="cb117-379"><a href="#cb117-379" aria-hidden="true" tabindex="-1"></a><span class="in">          },</span></span>
<span id="cb117-380"><a href="#cb117-380" aria-hidden="true" tabindex="-1"></a><span class="in">          {</span></span>
<span id="cb117-381"><a href="#cb117-381" aria-hidden="true" tabindex="-1"></a><span class="in">            "Bdsnummer": 62,</span></span>
<span id="cb117-382"><a href="#cb117-382" aria-hidden="true" tabindex="-1"></a><span class="in">            "Waarde": "01"</span></span>
<span id="cb117-383"><a href="#cb117-383" aria-hidden="true" tabindex="-1"></a><span class="in">          }</span></span>
<span id="cb117-384"><a href="#cb117-384" aria-hidden="true" tabindex="-1"></a><span class="in">        ]</span></span>
<span id="cb117-385"><a href="#cb117-385" aria-hidden="true" tabindex="-1"></a><span class="in">      },</span></span>
<span id="cb117-386"><a href="#cb117-386" aria-hidden="true" tabindex="-1"></a><span class="in">      {</span></span>
<span id="cb117-387"><a href="#cb117-387" aria-hidden="true" tabindex="-1"></a><span class="in">        "Elementen": [</span></span>
<span id="cb117-388"><a href="#cb117-388" aria-hidden="true" tabindex="-1"></a><span class="in">          {</span></span>
<span id="cb117-389"><a href="#cb117-389" aria-hidden="true" tabindex="-1"></a><span class="in">            "Bdsnummer": 63,</span></span>
<span id="cb117-390"><a href="#cb117-390" aria-hidden="true" tabindex="-1"></a><span class="in">            "Waarde": "19901202"</span></span>
<span id="cb117-391"><a href="#cb117-391" aria-hidden="true" tabindex="-1"></a><span class="in">          },</span></span>
<span id="cb117-392"><a href="#cb117-392" aria-hidden="true" tabindex="-1"></a><span class="in">          {</span></span>
<span id="cb117-393"><a href="#cb117-393" aria-hidden="true" tabindex="-1"></a><span class="in">            "Bdsnummer": 71</span></span>
<span id="cb117-394"><a href="#cb117-394" aria-hidden="true" tabindex="-1"></a><span class="in">          },</span></span>
<span id="cb117-395"><a href="#cb117-395" aria-hidden="true" tabindex="-1"></a><span class="in">          {</span></span>
<span id="cb117-396"><a href="#cb117-396" aria-hidden="true" tabindex="-1"></a><span class="in">            "Bdsnummer": 62,</span></span>
<span id="cb117-397"><a href="#cb117-397" aria-hidden="true" tabindex="-1"></a><span class="in">            "Waarde": "02"</span></span>
<span id="cb117-398"><a href="#cb117-398" aria-hidden="true" tabindex="-1"></a><span class="in">          }</span></span>
<span id="cb117-399"><a href="#cb117-399" aria-hidden="true" tabindex="-1"></a><span class="in">        ]</span></span>
<span id="cb117-400"><a href="#cb117-400" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb117-401"><a href="#cb117-401" aria-hidden="true" tabindex="-1"></a><span class="in">    ]</span></span>
<span id="cb117-402"><a href="#cb117-402" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb117-403"><a href="#cb117-403" aria-hidden="true" tabindex="-1"></a><span class="in">  "Contactmomenten": [</span></span>
<span id="cb117-404"><a href="#cb117-404" aria-hidden="true" tabindex="-1"></a><span class="in">    {</span></span>
<span id="cb117-405"><a href="#cb117-405" aria-hidden="true" tabindex="-1"></a><span class="in">      "Tijdstip": "20181011",</span></span>
<span id="cb117-406"><a href="#cb117-406" aria-hidden="true" tabindex="-1"></a><span class="in">      "Elementen": [</span></span>
<span id="cb117-407"><a href="#cb117-407" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-408"><a href="#cb117-408" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 245,</span></span>
<span id="cb117-409"><a href="#cb117-409" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "990"</span></span>
<span id="cb117-410"><a href="#cb117-410" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb117-411"><a href="#cb117-411" aria-hidden="true" tabindex="-1"></a><span class="in">      ]</span></span>
<span id="cb117-412"><a href="#cb117-412" aria-hidden="true" tabindex="-1"></a><span class="in">    },</span></span>
<span id="cb117-413"><a href="#cb117-413" aria-hidden="true" tabindex="-1"></a><span class="in">    {</span></span>
<span id="cb117-414"><a href="#cb117-414" aria-hidden="true" tabindex="-1"></a><span class="in">      "Tijdstip": "20181111",</span></span>
<span id="cb117-415"><a href="#cb117-415" aria-hidden="true" tabindex="-1"></a><span class="in">      "Elementen": [</span></span>
<span id="cb117-416"><a href="#cb117-416" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-417"><a href="#cb117-417" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 235,</span></span>
<span id="cb117-418"><a href="#cb117-418" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "380"</span></span>
<span id="cb117-419"><a href="#cb117-419" aria-hidden="true" tabindex="-1"></a><span class="in">        },</span></span>
<span id="cb117-420"><a href="#cb117-420" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-421"><a href="#cb117-421" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 245,</span></span>
<span id="cb117-422"><a href="#cb117-422" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "1250"</span></span>
<span id="cb117-423"><a href="#cb117-423" aria-hidden="true" tabindex="-1"></a><span class="in">        },</span></span>
<span id="cb117-424"><a href="#cb117-424" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-425"><a href="#cb117-425" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 252,</span></span>
<span id="cb117-426"><a href="#cb117-426" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "270"</span></span>
<span id="cb117-427"><a href="#cb117-427" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb117-428"><a href="#cb117-428" aria-hidden="true" tabindex="-1"></a><span class="in">      ]</span></span>
<span id="cb117-429"><a href="#cb117-429" aria-hidden="true" tabindex="-1"></a><span class="in">    },</span></span>
<span id="cb117-430"><a href="#cb117-430" aria-hidden="true" tabindex="-1"></a><span class="in">    {</span></span>
<span id="cb117-431"><a href="#cb117-431" aria-hidden="true" tabindex="-1"></a><span class="in">      "Tijdstip": "20181211",</span></span>
<span id="cb117-432"><a href="#cb117-432" aria-hidden="true" tabindex="-1"></a><span class="in">      "Elementen": [</span></span>
<span id="cb117-433"><a href="#cb117-433" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-434"><a href="#cb117-434" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 235,</span></span>
<span id="cb117-435"><a href="#cb117-435" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "435"</span></span>
<span id="cb117-436"><a href="#cb117-436" aria-hidden="true" tabindex="-1"></a><span class="in">        },</span></span>
<span id="cb117-437"><a href="#cb117-437" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-438"><a href="#cb117-438" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 245,</span></span>
<span id="cb117-439"><a href="#cb117-439" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "2100"</span></span>
<span id="cb117-440"><a href="#cb117-440" aria-hidden="true" tabindex="-1"></a><span class="in">        },</span></span>
<span id="cb117-441"><a href="#cb117-441" aria-hidden="true" tabindex="-1"></a><span class="in">        {</span></span>
<span id="cb117-442"><a href="#cb117-442" aria-hidden="true" tabindex="-1"></a><span class="in">          "Bdsnummer": 252,</span></span>
<span id="cb117-443"><a href="#cb117-443" aria-hidden="true" tabindex="-1"></a><span class="in">          "Waarde": "305"</span></span>
<span id="cb117-444"><a href="#cb117-444" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb117-445"><a href="#cb117-445" aria-hidden="true" tabindex="-1"></a><span class="in">      ]</span></span>
<span id="cb117-446"><a href="#cb117-446" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb117-447"><a href="#cb117-447" aria-hidden="true" tabindex="-1"></a><span class="in">  ]</span></span>
<span id="cb117-448"><a href="#cb117-448" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-449"><a href="#cb117-449" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-450"><a href="#cb117-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-451"><a href="#cb117-451" aria-hidden="true" tabindex="-1"></a>There are four ways to upload the data to JAMES:</span>
<span id="cb117-452"><a href="#cb117-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-453"><a href="#cb117-453" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Upload the file <span class="in">`"maria.json"`</span>;</span>
<span id="cb117-454"><a href="#cb117-454" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Convert to a string and upload;</span>
<span id="cb117-455"><a href="#cb117-455" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Convert to a JSON object and upload;</span>
<span id="cb117-456"><a href="#cb117-456" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Read the JSON file from a URL.</span>
<span id="cb117-457"><a href="#cb117-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-458"><a href="#cb117-458" aria-hidden="true" tabindex="-1"></a>The <span class="in">`/data/upload`</span> API end point handles these cases as follows:</span>
<span id="cb117-459"><a href="#cb117-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-462"><a href="#cb117-462" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-463"><a href="#cb117-463" aria-hidden="true" tabindex="-1"></a><span class="co"># Test if Bearer token is still active</span></span>
<span id="cb117-464"><a href="#cb117-464" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">".bearer"</span>)) {</span>
<span id="cb117-465"><a href="#cb117-465" aria-hidden="true" tabindex="-1"></a>  bearer_token <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">readLines</span>(<span class="st">".bearer"</span>, <span class="at">n =</span> <span class="dv">1</span>))</span>
<span id="cb117-466"><a href="#cb117-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"About to test james_post with token length:"</span>, <span class="fu">nchar</span>(bearer_token), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb117-467"><a href="#cb117-467" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb117-468"><a href="#cb117-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-469"><a href="#cb117-469" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as file</span></span>
<span id="cb117-470"><a href="#cb117-470" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="st">"maria.json"</span></span>
<span id="cb117-471"><a href="#cb117-471" aria-hidden="true" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb117-472"><a href="#cb117-472" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r1)</span>
<span id="cb117-473"><a href="#cb117-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-474"><a href="#cb117-474" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as string</span></span>
<span id="cb117-475"><a href="#cb117-475" aria-hidden="true" tabindex="-1"></a>js <span class="ot">&lt;-</span> <span class="fu">read_json_js</span>(fn)</span>
<span id="cb117-476"><a href="#cb117-476" aria-hidden="true" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> js)</span>
<span id="cb117-477"><a href="#cb117-477" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r2)</span>
<span id="cb117-478"><a href="#cb117-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-479"><a href="#cb117-479" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as JSON object</span></span>
<span id="cb117-480"><a href="#cb117-480" aria-hidden="true" tabindex="-1"></a>jo <span class="ot">&lt;-</span> <span class="fu">read_json_jo</span>(fn)</span>
<span id="cb117-481"><a href="#cb117-481" aria-hidden="true" tabindex="-1"></a>r3 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> jo)</span>
<span id="cb117-482"><a href="#cb117-482" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r3)</span>
<span id="cb117-483"><a href="#cb117-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-484"><a href="#cb117-484" aria-hidden="true" tabindex="-1"></a><span class="co"># upload as URL</span></span>
<span id="cb117-485"><a href="#cb117-485" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/maria.json"</span></span>
<span id="cb117-486"><a href="#cb117-486" aria-hidden="true" tabindex="-1"></a>r4 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> url)</span>
<span id="cb117-487"><a href="#cb117-487" aria-hidden="true" tabindex="-1"></a><span class="fu">status_code</span>(r4)</span>
<span id="cb117-488"><a href="#cb117-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-489"><a href="#cb117-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-490"><a href="#cb117-490" aria-hidden="true" tabindex="-1"></a>If the status is 201, the data are uploaded to JAMES and processed. For example, the processed data after file upload is available as an R data frame under element <span class="in">`r1$parsed`</span>. </span>
<span id="cb117-491"><a href="#cb117-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-494"><a href="#cb117-494" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-495"><a href="#cb117-495" aria-hidden="true" tabindex="-1"></a>r1<span class="sc">$</span>parsed</span>
<span id="cb117-496"><a href="#cb117-496" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-497"><a href="#cb117-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-498"><a href="#cb117-498" aria-hidden="true" tabindex="-1"></a>The session details, including the uploaded data, will remain available for a limited time. After 30 minutes the session is wiped. The session key is your entrance to the resource within the 30-minute window. The key can be retrieved as <span class="in">`r1$session`</span>. For example, to see the result of the file upload session in markdown use</span>
<span id="cb117-499"><a href="#cb117-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-502"><a href="#cb117-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-503"><a href="#cb117-503" aria-hidden="true" tabindex="-1"></a>(session <span class="ot">&lt;-</span> r1<span class="sc">$</span>session)</span>
<span id="cb117-504"><a href="#cb117-504" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">james_get</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="fu">file.path</span>(session, <span class="st">"md"</span>))</span>
<span id="cb117-505"><a href="#cb117-505" aria-hidden="true" tabindex="-1"></a><span class="co"># Handle both text and parsed responses</span></span>
<span id="cb117-506"><a href="#cb117-506" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.character</span>(resp<span class="sc">$</span>parsed)) {</span>
<span id="cb117-507"><a href="#cb117-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(resp<span class="sc">$</span>parsed)</span>
<span id="cb117-508"><a href="#cb117-508" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb117-509"><a href="#cb117-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(resp<span class="sc">$</span>parsed)</span>
<span id="cb117-510"><a href="#cb117-510" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb117-511"><a href="#cb117-511" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-512"><a href="#cb117-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-513"><a href="#cb117-513" aria-hidden="true" tabindex="-1"></a>**Troubleshooting data upload**: JAMES executes checks on the conversion and ranges of the data. To gain efficiency, it does not automatically validate the input data against the specified JSON schema. JAMES writes diagnostic, sometimes cryptic, messages to the directory <span class="in">`{session}/messages`</span> if it finds a problem. The user can rerun the data upload with two additional flags that request extra diagnostic output.</span>
<span id="cb117-514"><a href="#cb117-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-515"><a href="#cb117-515" aria-hidden="true" tabindex="-1"></a>Example: Suppose we compromise the data by removing the required <span class="in">`"clientDetails"`</span> and the optional <span class="in">`"nestedDetails"`</span> sections. The mangled input data look like:</span>
<span id="cb117-516"><a href="#cb117-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-517"><a href="#cb117-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-518"><a href="#cb117-518" aria-hidden="true" tabindex="-1"></a><span class="in">{"Format":"3.0","organisationCode":12345,"reference":"Maria's mangled data","clientMeasurements":[{"bdsNumber":235,"values":[{"date":"20181111","value":380},{"date":"20181211","value":435}]}]}</span></span>
<span id="cb117-519"><a href="#cb117-519" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-520"><a href="#cb117-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-521"><a href="#cb117-521" aria-hidden="true" tabindex="-1"></a>Everything appears normal if we read this data by the default:</span>
<span id="cb117-522"><a href="#cb117-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-525"><a href="#cb117-525" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-526"><a href="#cb117-526" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="st">"maria-mangled.json"</span></span>
<span id="cb117-527"><a href="#cb117-527" aria-hidden="true" tabindex="-1"></a>r5 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb117-528"><a href="#cb117-528" aria-hidden="true" tabindex="-1"></a>r5<span class="sc">$</span>parsed</span>
<span id="cb117-529"><a href="#cb117-529" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-530"><a href="#cb117-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-531"><a href="#cb117-531" aria-hidden="true" tabindex="-1"></a>If we upload with the additional <span class="in">`validate = TRUE`</span> flag, JAMES runs the validation of the uploaded JSON against the JSON schema:</span>
<span id="cb117-532"><a href="#cb117-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-533"><a href="#cb117-533" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb117-534"><a href="#cb117-534" aria-hidden="true" tabindex="-1"></a><span class="in">r6 &lt;- james_post(host = host, path = "data/upload/json", txt = fn, validate = TRUE)</span></span>
<span id="cb117-535"><a href="#cb117-535" aria-hidden="true" tabindex="-1"></a><span class="in">mess &lt;- james_get(host = host, path = file.path(r6$session, "messages"))</span></span>
<span id="cb117-536"><a href="#cb117-536" aria-hidden="true" tabindex="-1"></a><span class="in"># Handle both text and parsed responses</span></span>
<span id="cb117-537"><a href="#cb117-537" aria-hidden="true" tabindex="-1"></a><span class="in">if (is.character(mess$parsed)) {</span></span>
<span id="cb117-538"><a href="#cb117-538" aria-hidden="true" tabindex="-1"></a><span class="in">  cat(mess$parsed)</span></span>
<span id="cb117-539"><a href="#cb117-539" aria-hidden="true" tabindex="-1"></a><span class="in">} else {</span></span>
<span id="cb117-540"><a href="#cb117-540" aria-hidden="true" tabindex="-1"></a><span class="in">  print(mess$parsed)</span></span>
<span id="cb117-541"><a href="#cb117-541" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb117-542"><a href="#cb117-542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-543"><a href="#cb117-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-544"><a href="#cb117-544" aria-hidden="true" tabindex="-1"></a>which indicates that the required JSON element <span class="in">`"clientDetails"`</span> is missing. We inactivated the code chunk above because it may occasionally give the error "JAMES API request failed <span class="co">[</span><span class="ot">400</span><span class="co">]</span> child process has died In call: tryCatch()" when <span class="in">`validate = TRUE`</span>. This is a known, not yet resolved issue.</span>
<span id="cb117-545"><a href="#cb117-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-546"><a href="#cb117-546" aria-hidden="true" tabindex="-1"></a>We may drill down further by setting the <span class="in">`intermediate = TRUE`</span> flag. This writes five JSON files that document the data flow into <span class="in">`{session}/files/{*}.json`</span>.</span>
<span id="cb117-547"><a href="#cb117-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-548"><a href="#cb117-548" aria-hidden="true" tabindex="-1"></a>For example, we can ask for the input data as read by JAMES by</span>
<span id="cb117-549"><a href="#cb117-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-552"><a href="#cb117-552" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-553"><a href="#cb117-553" aria-hidden="true" tabindex="-1"></a>r7 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn, <span class="at">validate =</span> <span class="cn">TRUE</span>, <span class="at">intermediate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb117-554"><a href="#cb117-554" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">file.path</span>(host, r7<span class="sc">$</span>session, <span class="st">"files/input.json"</span>)</span>
<span id="cb117-555"><a href="#cb117-555" aria-hidden="true" tabindex="-1"></a>url</span>
<span id="cb117-556"><a href="#cb117-556" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-557"><a href="#cb117-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-558"><a href="#cb117-558" aria-hidden="true" tabindex="-1"></a>With <span class="in">`browseURL(url)`</span> we may view the file contents in the browser. The <span class="in">`files`</span> directory contains five JSON files:</span>
<span id="cb117-559"><a href="#cb117-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-560"><a href="#cb117-560" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span><span class="in">`files/input.json`</span>: the JSON input data;</span>
<span id="cb117-561"><a href="#cb117-561" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span><span class="in">`files/bds.json`</span>: a data frame with info per BDS number;</span>
<span id="cb117-562"><a href="#cb117-562" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span><span class="in">`files/ddi.json`</span>: result of recoding BDS into GSED item names;</span>
<span id="cb117-563"><a href="#cb117-563" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span><span class="in">`files/psn.json`</span>: known fixed child covariates;</span>
<span id="cb117-564"><a href="#cb117-564" aria-hidden="true" tabindex="-1"></a><span class="ss">5. </span><span class="in">`files/xy.json`</span>: time-varying variables.</span>
<span id="cb117-565"><a href="#cb117-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-566"><a href="#cb117-566" aria-hidden="true" tabindex="-1"></a>Inspection of these files may uncover any problems with JAMES's understanding of the data. If needed, study the underlying R source code at <span class="ot">&lt;https://raw.githubusercontent.com/growthcharts/bdsreader/master/R/read_bds.R&gt;</span>.</span>
<span id="cb117-567"><a href="#cb117-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-568"><a href="#cb117-568" aria-hidden="true" tabindex="-1"></a>The <span class="in">`validate`</span> and <span class="in">`intermediate`</span> flag are useful for development and debugging. In production, we recommend leaving them at their default value (<span class="in">`FALSE`</span>) and monitor any messages written to <span class="in">`{session}/messages`</span>.</span>
<span id="cb117-569"><a href="#cb117-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-570"><a href="#cb117-570" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-571"><a href="#cb117-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-572"><a href="#cb117-572" aria-hidden="true" tabindex="-1"></a>We start from child data in the file <span class="in">`maria.json`</span> that we wish to process with JAMES. For testing purposes, you may change the values, but keep the general structure intact. The following commands upload the file and process the data.</span>
<span id="cb117-573"><a href="#cb117-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-576"><a href="#cb117-576" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-577"><a href="#cb117-577" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-sF</span> <span class="st">'txt=@maria.json'</span> <span class="at">-D</span> headers <span class="dt">\</span></span>
<span id="cb117-578"><a href="#cb117-578" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"accept: text/json"</span> <span class="dt">\</span></span>
<span id="cb117-579"><a href="#cb117-579" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb117-580"><a href="#cb117-580" aria-hidden="true" tabindex="-1"></a>  <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/data/upload/json <span class="kw">|</span> <span class="fu">head</span></span>
<span id="cb117-581"><a href="#cb117-581" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-582"><a href="#cb117-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-583"><a href="#cb117-583" aria-hidden="true" tabindex="-1"></a>Alternatively, we may read the file into a JSON string, and upload as follows:</span>
<span id="cb117-584"><a href="#cb117-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-587"><a href="#cb117-587" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-588"><a href="#cb117-588" aria-hidden="true" tabindex="-1"></a><span class="va">JS</span><span class="op">=</span><span class="va">$(</span><span class="ex">jq</span> <span class="st">'.'</span> maria.json <span class="kw">|</span> <span class="ex">jq</span> <span class="at">-sR</span> <span class="st">'.'</span><span class="va">)</span></span>
<span id="cb117-589"><a href="#cb117-589" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/data/upload/json <span class="dt">\</span></span>
<span id="cb117-590"><a href="#cb117-590" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb117-591"><a href="#cb117-591" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">"txt=</span><span class="va">$JS</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">head</span></span>
<span id="cb117-592"><a href="#cb117-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-593"><a href="#cb117-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-594"><a href="#cb117-594" aria-hidden="true" tabindex="-1"></a>Finally, if the data are located at a URL, use</span>
<span id="cb117-595"><a href="#cb117-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-598"><a href="#cb117-598" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-599"><a href="#cb117-599" aria-hidden="true" tabindex="-1"></a><span class="va">URL</span><span class="op">=</span>https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/maria.json</span>
<span id="cb117-600"><a href="#cb117-600" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/data/upload/json <span class="dt">\</span></span>
<span id="cb117-601"><a href="#cb117-601" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span><span class="st">"</span> <span class="dt">\</span></span>
<span id="cb117-602"><a href="#cb117-602" aria-hidden="true" tabindex="-1"></a>  <span class="at">-d</span> <span class="st">"txt='</span><span class="va">$URL</span><span class="st">'"</span> <span class="kw">|</span> <span class="fu">head</span></span>
<span id="cb117-603"><a href="#cb117-603" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-604"><a href="#cb117-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-605"><a href="#cb117-605" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-606"><a href="#cb117-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-607"><a href="#cb117-607" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/charts/draw`**: Draw child data on growth chart</span></span>
<span id="cb117-608"><a href="#cb117-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-609"><a href="#cb117-609" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-610"><a href="#cb117-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-611"><a href="#cb117-611" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-612"><a href="#cb117-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-613"><a href="#cb117-613" aria-hidden="true" tabindex="-1"></a>Maria is a preterm born at 27 weeks of gestational age. We already uploaded her data. We may now plot her growth data on the A4 chart for preterms as follows:</span>
<span id="cb117-614"><a href="#cb117-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-617"><a href="#cb117-617" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-618"><a href="#cb117-618" aria-hidden="true" tabindex="-1"></a>r5 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, </span>
<span id="cb117-619"><a href="#cb117-619" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"/charts/draw/svglite"</span>, </span>
<span id="cb117-620"><a href="#cb117-620" aria-hidden="true" tabindex="-1"></a>                 <span class="at">session =</span> r1<span class="sc">$</span>session,</span>
<span id="cb117-621"><a href="#cb117-621" aria-hidden="true" tabindex="-1"></a>                 <span class="at">chartcode =</span> <span class="st">"PMAAN27"</span>, <span class="at">selector =</span> <span class="st">"chartcode"</span>,</span>
<span id="cb117-622"><a href="#cb117-622" aria-hidden="true" tabindex="-1"></a>                 <span class="at">query =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="fl">29.7</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="at">width =</span> <span class="dv">21</span><span class="sc">/</span><span class="fl">2.54</span>))</span>
<span id="cb117-623"><a href="#cb117-623" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(r5<span class="sc">$</span>parsed, <span class="at">con =</span> filename_chart1)</span>
<span id="cb117-624"><a href="#cb117-624" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-625"><a href="#cb117-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-626"><a href="#cb117-626" aria-hidden="true" tabindex="-1"></a><span class="in">```{r displaysvg1, echo=FALSE, fig.align="center", fig.cap="Maria's growth plotted on preterm chart, 0-15 months"}</span></span>
<span id="cb117-627"><a href="#cb117-627" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::include_graphics(filename_chart1)</span></span>
<span id="cb117-628"><a href="#cb117-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-629"><a href="#cb117-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-630"><a href="#cb117-630" aria-hidden="true" tabindex="-1"></a>Alternatively, we may upload data for a new child Laura and plot the data in one step:</span>
<span id="cb117-631"><a href="#cb117-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-634"><a href="#cb117-634" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-635"><a href="#cb117-635" aria-hidden="true" tabindex="-1"></a>fn <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">"extdata/bds_v3.0/smocc/Laura_S.json"</span>, <span class="at">package =</span> <span class="st">"jamesdemodata"</span>)</span>
<span id="cb117-636"><a href="#cb117-636" aria-hidden="true" tabindex="-1"></a>r6 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host,</span>
<span id="cb117-637"><a href="#cb117-637" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"/charts/draw/svglite"</span>, <span class="at">txt =</span> fn, </span>
<span id="cb117-638"><a href="#cb117-638" aria-hidden="true" tabindex="-1"></a>                 <span class="at">chartcode =</span> <span class="st">"NMBA"</span>, <span class="at">selector =</span> <span class="st">"chartcode"</span>,</span>
<span id="cb117-639"><a href="#cb117-639" aria-hidden="true" tabindex="-1"></a>                 <span class="at">query =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="fl">29.7</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="at">width =</span> <span class="dv">21</span><span class="sc">/</span><span class="fl">2.54</span>))</span>
<span id="cb117-640"><a href="#cb117-640" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(r6<span class="sc">$</span>parsed, <span class="at">con =</span> filename_chart2)</span>
<span id="cb117-641"><a href="#cb117-641" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-642"><a href="#cb117-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-643"><a href="#cb117-643" aria-hidden="true" tabindex="-1"></a>For A4 sized charts, we recommend to generate the plot with query arguments <span class="in">`list(height = 29.7/2.54, width = 21/2.54)`</span>, as illustrated above. If you want to change the chart's size in your HTML, use the <span class="in">`out.width`</span> knitr chunk option, e.g. set <span class="in">`out.width="500px"`</span>. This gives the following output.</span>
<span id="cb117-644"><a href="#cb117-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-645"><a href="#cb117-645" aria-hidden="true" tabindex="-1"></a><span class="in">```{r displaysvg2, echo=FALSE, out.width="500px", fig.align="center", fig.cap="Laura's growth plotted on chart for Dutch girls, 0-4 years"}</span></span>
<span id="cb117-646"><a href="#cb117-646" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::include_graphics(filename_chart2)</span></span>
<span id="cb117-647"><a href="#cb117-647" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-648"><a href="#cb117-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-649"><a href="#cb117-649" aria-hidden="true" tabindex="-1"></a>JAMES features a built-in prediction module based on curve matching. Suppose we want to predict Laura's height at the 3y9m when Laura is 2 years old. The following chart plots 25 matches to Laura as grey curves. The variation between the grey curves at age 3y9m indicates the likely variation in the prediction. The blue line indicates Laura's predicted height at age 3y9m. </span>
<span id="cb117-650"><a href="#cb117-650" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-653"><a href="#cb117-653" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-654"><a href="#cb117-654" aria-hidden="true" tabindex="-1"></a>r7 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, </span>
<span id="cb117-655"><a href="#cb117-655" aria-hidden="true" tabindex="-1"></a>                 <span class="at">path =</span> <span class="st">"/charts/draw/svglite"</span>, <span class="at">txt =</span> fn, </span>
<span id="cb117-656"><a href="#cb117-656" aria-hidden="true" tabindex="-1"></a>                 <span class="at">chartcode =</span> <span class="st">"NMBH"</span>, <span class="at">dnr =</span> <span class="st">"2-4"</span>,</span>
<span id="cb117-657"><a href="#cb117-657" aria-hidden="true" tabindex="-1"></a>                 <span class="at">lo =</span> <span class="fl">2.0</span>, <span class="at">hi =</span> <span class="fl">3.75</span>, <span class="at">nmatch =</span> <span class="dv">25</span>,</span>
<span id="cb117-658"><a href="#cb117-658" aria-hidden="true" tabindex="-1"></a>                 <span class="at">show_future =</span> <span class="cn">TRUE</span>, <span class="at">show_realized =</span> <span class="cn">TRUE</span>,</span>
<span id="cb117-659"><a href="#cb117-659" aria-hidden="true" tabindex="-1"></a>                 <span class="at">query =</span> <span class="fu">list</span>(<span class="at">height =</span> <span class="dv">18</span><span class="sc">/</span><span class="fl">2.54</span>, <span class="at">width =</span> <span class="dv">18</span><span class="sc">/</span><span class="fl">2.54</span>))</span>
<span id="cb117-660"><a href="#cb117-660" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(r7<span class="sc">$</span>parsed, <span class="at">con =</span> filename_chart3)</span>
<span id="cb117-661"><a href="#cb117-661" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-662"><a href="#cb117-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-663"><a href="#cb117-663" aria-hidden="true" tabindex="-1"></a>For square charts, use query arguments <span class="in">`list(height = 18/2.54, width = 18/2.54)`</span> to generate the plot. In order to get the same age units as the previous chart, calculate <span class="in">`out.width`</span> as <span class="in">`500/21*18 = "429px"`</span>.</span>
<span id="cb117-664"><a href="#cb117-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-665"><a href="#cb117-665" aria-hidden="true" tabindex="-1"></a><span class="in">```{r displaysvg3, echo=FALSE, out.width="429px", fig.align="center", fig.cap="Predict Laura's future height at the age of 3y9m."}</span></span>
<span id="cb117-666"><a href="#cb117-666" aria-hidden="true" tabindex="-1"></a><span class="in">knitr::include_graphics(filename_chart3)</span></span>
<span id="cb117-667"><a href="#cb117-667" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-668"><a href="#cb117-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-669"><a href="#cb117-669" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-670"><a href="#cb117-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-671"><a href="#cb117-671" aria-hidden="true" tabindex="-1"></a>Upload <span class="in">`maria.json`</span> and draw the height data on the default chart to produce an SVG file. Specify the proper <span class="in">`width`</span> and <span class="in">`height`</span> query parameters.</span>
<span id="cb117-672"><a href="#cb117-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-675"><a href="#cb117-675" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-676"><a href="#cb117-676" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb117-677"><a href="#cb117-677" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/draw/svglite?width=7.09&amp;height=7.09'</span> <span class="dt">\</span></span>
<span id="cb117-678"><a href="#cb117-678" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: image/*'</span> <span class="dt">\</span></span>
<span id="cb117-679"><a href="#cb117-679" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span> <span class="op">&gt;</span> maria1.svg</span>
<span id="cb117-680"><a href="#cb117-680" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-681"><a href="#cb117-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-682"><a href="#cb117-682" aria-hidden="true" tabindex="-1"></a>We need to set <span class="in">`chartcode`</span> and <span class="in">`selector`</span> parameters to choose a different chart.</span>
<span id="cb117-683"><a href="#cb117-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-686"><a href="#cb117-686" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-687"><a href="#cb117-687" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb117-688"><a href="#cb117-688" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/draw/svglite?width=8.27&amp;height=11.69'</span> <span class="dt">\</span></span>
<span id="cb117-689"><a href="#cb117-689" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: image/*'</span> <span class="dt">\</span></span>
<span id="cb117-690"><a href="#cb117-690" aria-hidden="true" tabindex="-1"></a>-F <span class="st">"chartcode='PMAAN27'"</span> <span class="dt">\</span></span>
<span id="cb117-691"><a href="#cb117-691" aria-hidden="true" tabindex="-1"></a>-F <span class="st">"selector='chartcode'"</span> <span class="dt">\</span></span>
<span id="cb117-692"><a href="#cb117-692" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span> <span class="op">&gt;</span> maria2.svg</span>
<span id="cb117-693"><a href="#cb117-693" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-694"><a href="#cb117-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-695"><a href="#cb117-695" aria-hidden="true" tabindex="-1"></a>An alternative is to read the data from a URL, and use the <span class="in">`application/json`</span> protocol to specify parameters.</span>
<span id="cb117-696"><a href="#cb117-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-697"><a href="#cb117-697" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash eval=TRUE}</span></span>
<span id="cb117-698"><a href="#cb117-698" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-699"><a href="#cb117-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-700"><a href="#cb117-700" aria-hidden="true" tabindex="-1"></a><span class="in">BASE_URL=$(cat .host | sed 's|/modules/james$||')</span></span>
<span id="cb117-701"><a href="#cb117-701" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -sX 'POST' \</span></span>
<span id="cb117-702"><a href="#cb117-702" aria-hidden="true" tabindex="-1"></a><span class="in">$(cat .host)'/charts/draw/svglite?width=8.27&amp;height=11.69' \</span></span>
<span id="cb117-703"><a href="#cb117-703" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'accept: image/*' \</span></span>
<span id="cb117-704"><a href="#cb117-704" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'Content-Type: application/json' \</span></span>
<span id="cb117-705"><a href="#cb117-705" aria-hidden="true" tabindex="-1"></a><span class="in">-d '{</span></span>
<span id="cb117-706"><a href="#cb117-706" aria-hidden="true" tabindex="-1"></a><span class="in">"txt": "'$BASE_URL'/ocpu/library/jamesdemodata/extdata/bds_v3.0/smocc/Laura_S.json",</span></span>
<span id="cb117-707"><a href="#cb117-707" aria-hidden="true" tabindex="-1"></a><span class="in">"chartcode" : "NMBA",</span></span>
<span id="cb117-708"><a href="#cb117-708" aria-hidden="true" tabindex="-1"></a><span class="in">"selector" : "chartcode"}' &gt; laura.svg</span></span>
<span id="cb117-709"><a href="#cb117-709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-710"><a href="#cb117-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-711"><a href="#cb117-711" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-712"><a href="#cb117-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-713"><a href="#cb117-713" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/charts/list`**: List available growth charts</span></span>
<span id="cb117-714"><a href="#cb117-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-715"><a href="#cb117-715" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-716"><a href="#cb117-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-717"><a href="#cb117-717" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-718"><a href="#cb117-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-719"><a href="#cb117-719" aria-hidden="true" tabindex="-1"></a>JAMES contains a wide variety of built-in growth charts. Each chart has a unique <span class="in">`chartcode`</span>. A typical chart code looks like <span class="in">`NJAA`</span>. We obtain the full list of chart codes as</span>
<span id="cb117-720"><a href="#cb117-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-723"><a href="#cb117-723" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-724"><a href="#cb117-724" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"charts/list/json"</span>)</span>
<span id="cb117-725"><a href="#cb117-725" aria-hidden="true" tabindex="-1"></a>charts <span class="ot">&lt;-</span> r<span class="sc">$</span>parsed</span>
<span id="cb117-726"><a href="#cb117-726" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-727"><a href="#cb117-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-728"><a href="#cb117-728" aria-hidden="true" tabindex="-1"></a>The <span class="in">`charts`</span> object is a data frame with <span class="in">`r nrow(charts)`</span> rows (charts) and the following variables:</span>
<span id="cb117-729"><a href="#cb117-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-732"><a href="#cb117-732" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-733"><a href="#cb117-733" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(charts)</span>
<span id="cb117-734"><a href="#cb117-734" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-735"><a href="#cb117-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-736"><a href="#cb117-736" aria-hidden="true" tabindex="-1"></a>JAMES contains charts for various child populations. There are charts for Down syndrome (DS), Hindustan (HS), Moroccan (MA), Dutch (NL)), preterm (PT) and Turkish (TU) children living in the Netherlands and the WHO Growth Standards (WHOblue, WHOpink). These charts contain references for height (hgt), weight (wgt), head circumference (hdc), weight-for-height (wfh), body mass index (bmi) and D-score (dsc), as well as combined charts with multiple references on A4 format (front, back, -hdc). </span>
<span id="cb117-737"><a href="#cb117-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-738"><a href="#cb117-738" aria-hidden="true" tabindex="-1"></a>The most important index variables are <span class="in">`population`</span> and <span class="in">`side`</span>:</span>
<span id="cb117-739"><a href="#cb117-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-740"><a href="#cb117-740" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=TRUE}</span></span>
<span id="cb117-741"><a href="#cb117-741" aria-hidden="true" tabindex="-1"></a><span class="in">with(charts, table(population, side))</span></span>
<span id="cb117-742"><a href="#cb117-742" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-743"><a href="#cb117-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-744"><a href="#cb117-744" aria-hidden="true" tabindex="-1"></a>The URL <span class="in">`{host}/site`</span> (see below) displays the currently active chart code as a field in the left sidebar.</span>
<span id="cb117-745"><a href="#cb117-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-746"><a href="#cb117-746" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-747"><a href="#cb117-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-748"><a href="#cb117-748" aria-hidden="true" tabindex="-1"></a>Restrict the listing to the WHO references:</span>
<span id="cb117-749"><a href="#cb117-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-750"><a href="#cb117-750" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash eval=FALSE}</span></span>
<span id="cb117-751"><a href="#cb117-751" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-752"><a href="#cb117-752" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -sX 'POST' \</span></span>
<span id="cb117-753"><a href="#cb117-753" aria-hidden="true" tabindex="-1"></a><span class="in">$(cat .host)'/charts/list/json' \</span></span>
<span id="cb117-754"><a href="#cb117-754" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'accept: application/json' \</span></span>
<span id="cb117-755"><a href="#cb117-755" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'Content-Type: application/json' \</span></span>
<span id="cb117-756"><a href="#cb117-756" aria-hidden="true" tabindex="-1"></a><span class="in">-d '{</span></span>
<span id="cb117-757"><a href="#cb117-757" aria-hidden="true" tabindex="-1"></a><span class="in">"chartgrp": "who"</span></span>
<span id="cb117-758"><a href="#cb117-758" aria-hidden="true" tabindex="-1"></a><span class="in">}'</span></span>
<span id="cb117-759"><a href="#cb117-759" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-760"><a href="#cb117-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-761"><a href="#cb117-761" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-762"><a href="#cb117-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-763"><a href="#cb117-763" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/charts/validate`**: Validate chart codes</span></span>
<span id="cb117-764"><a href="#cb117-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-765"><a href="#cb117-765" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-766"><a href="#cb117-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-767"><a href="#cb117-767" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-768"><a href="#cb117-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-769"><a href="#cb117-769" aria-hidden="true" tabindex="-1"></a>The <span class="in">`/charts/validate`</span> end point attempt to find one or more user-specified chart codes. For example, the following cocde checkc five chart codes:</span>
<span id="cb117-770"><a href="#cb117-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-773"><a href="#cb117-773" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-774"><a href="#cb117-774" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, </span>
<span id="cb117-775"><a href="#cb117-775" aria-hidden="true" tabindex="-1"></a>                <span class="at">path =</span> <span class="st">"charts/validate/json"</span>, </span>
<span id="cb117-776"><a href="#cb117-776" aria-hidden="true" tabindex="-1"></a>                <span class="at">chartcode =</span> <span class="fu">c</span>(<span class="st">"NMAW"</span>, <span class="st">"NJAb"</span>, <span class="st">"PJAAN23"</span>, <span class="st">"PJAAN25"</span>, <span class="st">"dummy"</span>))</span>
<span id="cb117-777"><a href="#cb117-777" aria-hidden="true" tabindex="-1"></a>r<span class="sc">$</span>parsed</span>
<span id="cb117-778"><a href="#cb117-778" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-779"><a href="#cb117-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-780"><a href="#cb117-780" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-781"><a href="#cb117-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-782"><a href="#cb117-782" aria-hidden="true" tabindex="-1"></a>Check five chart codes:</span>
<span id="cb117-783"><a href="#cb117-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-786"><a href="#cb117-786" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-787"><a href="#cb117-787" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb117-788"><a href="#cb117-788" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb117-789"><a href="#cb117-789" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/charts/validate/json'</span> <span class="dt">\</span></span>
<span id="cb117-790"><a href="#cb117-790" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb117-791"><a href="#cb117-791" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: application/json'</span> <span class="dt">\</span></span>
<span id="cb117-792"><a href="#cb117-792" aria-hidden="true" tabindex="-1"></a>-d <span class="st">'{</span></span>
<span id="cb117-793"><a href="#cb117-793" aria-hidden="true" tabindex="-1"></a><span class="st">"chartcode": [</span></span>
<span id="cb117-794"><a href="#cb117-794" aria-hidden="true" tabindex="-1"></a><span class="st">"NMAW",</span></span>
<span id="cb117-795"><a href="#cb117-795" aria-hidden="true" tabindex="-1"></a><span class="st">"NJAB",</span></span>
<span id="cb117-796"><a href="#cb117-796" aria-hidden="true" tabindex="-1"></a><span class="st">"PJAAN23",</span></span>
<span id="cb117-797"><a href="#cb117-797" aria-hidden="true" tabindex="-1"></a><span class="st">"PJAAN25", </span></span>
<span id="cb117-798"><a href="#cb117-798" aria-hidden="true" tabindex="-1"></a><span class="st">"dummy"</span></span>
<span id="cb117-799"><a href="#cb117-799" aria-hidden="true" tabindex="-1"></a><span class="st">]</span></span>
<span id="cb117-800"><a href="#cb117-800" aria-hidden="true" tabindex="-1"></a><span class="st">}'</span></span>
<span id="cb117-801"><a href="#cb117-801" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-802"><a href="#cb117-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-803"><a href="#cb117-803" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-804"><a href="#cb117-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-805"><a href="#cb117-805" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/dscore/calculate`**: Calculate D-score</span></span>
<span id="cb117-806"><a href="#cb117-806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-807"><a href="#cb117-807" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-808"><a href="#cb117-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-809"><a href="#cb117-809" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-810"><a href="#cb117-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-811"><a href="#cb117-811" aria-hidden="true" tabindex="-1"></a>The D-score is a developmental score that is used to assess the development of children. The <span class="in">`/dscore/calculate`</span> end point calculates the D-score for a child based on the uploaded data. The D-score is a continuous measure of child development, and it is calculated based on the child's age and developmental milestones.</span>
<span id="cb117-812"><a href="#cb117-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-813"><a href="#cb117-813" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dscorecalculate}</span></span>
<span id="cb117-814"><a href="#cb117-814" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file("extdata/bds_v3.0/smocc/Laura_S.json", package = "jamesdemodata")</span></span>
<span id="cb117-815"><a href="#cb117-815" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(host = host, path = "dscore/calculate/json", output = "table", txt = fn)</span></span>
<span id="cb117-816"><a href="#cb117-816" aria-hidden="true" tabindex="-1"></a><span class="in">r</span></span>
<span id="cb117-817"><a href="#cb117-817" aria-hidden="true" tabindex="-1"></a><span class="in">head(r$parsed)</span></span>
<span id="cb117-818"><a href="#cb117-818" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-819"><a href="#cb117-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-820"><a href="#cb117-820" aria-hidden="true" tabindex="-1"></a>The D-score is found in column <span class="in">`y`</span> and the DAZ is in column <span class="in">`z`</span>.</span>
<span id="cb117-821"><a href="#cb117-821" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-822"><a href="#cb117-822" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-823"><a href="#cb117-823" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-824"><a href="#cb117-824" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-825"><a href="#cb117-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-826"><a href="#cb117-826" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/ddomain/calculate`**: Calculate domain scores</span></span>
<span id="cb117-827"><a href="#cb117-827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-828"><a href="#cb117-828" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-829"><a href="#cb117-829" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-830"><a href="#cb117-830" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-831"><a href="#cb117-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-832"><a href="#cb117-832" aria-hidden="true" tabindex="-1"></a>The D-score is a one-number summary measure of child development. The <span class="in">`/ddomain/calculate`</span> end point breaks down the D-score into two or more domains. </span>
<span id="cb117-833"><a href="#cb117-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-834"><a href="#cb117-834" aria-hidden="true" tabindex="-1"></a><span class="in">```{r ddomaincalculate}</span></span>
<span id="cb117-835"><a href="#cb117-835" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file("extdata/bds_v3.0/smocc/Laura_S.json", package = "jamesdemodata")</span></span>
<span id="cb117-836"><a href="#cb117-836" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(host = host, path = "ddomain/calculate/json", output = "table", txt = fn)</span></span>
<span id="cb117-837"><a href="#cb117-837" aria-hidden="true" tabindex="-1"></a><span class="in">r</span></span>
<span id="cb117-838"><a href="#cb117-838" aria-hidden="true" tabindex="-1"></a><span class="in">head(r$parsed)</span></span>
<span id="cb117-839"><a href="#cb117-839" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-840"><a href="#cb117-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-841"><a href="#cb117-841" aria-hidden="true" tabindex="-1"></a>The D-score is found in column <span class="in">`y`</span> and the DAZ is in column <span class="in">`z`</span>.</span>
<span id="cb117-842"><a href="#cb117-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-843"><a href="#cb117-843" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-844"><a href="#cb117-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-845"><a href="#cb117-845" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-846"><a href="#cb117-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-847"><a href="#cb117-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-848"><a href="#cb117-848" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/vwc/select`**: Select Van Wiechen development milestones based on D-score and age</span></span>
<span id="cb117-849"><a href="#cb117-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-850"><a href="#cb117-850" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-851"><a href="#cb117-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-852"><a href="#cb117-852" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-853"><a href="#cb117-853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-854"><a href="#cb117-854" aria-hidden="true" tabindex="-1"></a>The Van Wiechenonderzoek is a Dutch screening tool used to track a childâ€™s development from birth to age 4.5. It includes 75 milestones across three areas: fine motor skills, gross motor skills, and communication. The <span class="in">`/vwc/select`</span> end point suggest the most fitting milestones for a child based on the uploaded data.</span>
<span id="cb117-855"><a href="#cb117-855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-856"><a href="#cb117-856" aria-hidden="true" tabindex="-1"></a><span class="in">```{r selectvanwiechen}</span></span>
<span id="cb117-857"><a href="#cb117-857" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file("extdata/bds_v3.0/smocc/Laura_S.json", package = "jamesdemodata")</span></span>
<span id="cb117-858"><a href="#cb117-858" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(host = host, path = "vwc/select/json", output = "table", txt = fn, percentiles = TRUE)</span></span>
<span id="cb117-859"><a href="#cb117-859" aria-hidden="true" tabindex="-1"></a><span class="in">r$url</span></span>
<span id="cb117-860"><a href="#cb117-860" aria-hidden="true" tabindex="-1"></a><span class="in">r$parsed</span></span>
<span id="cb117-861"><a href="#cb117-861" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-862"><a href="#cb117-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-863"><a href="#cb117-863" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-864"><a href="#cb117-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-865"><a href="#cb117-865" aria-hidden="true" tabindex="-1"></a>To be added</span>
<span id="cb117-866"><a href="#cb117-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-867"><a href="#cb117-867" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-868"><a href="#cb117-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-869"><a href="#cb117-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-870"><a href="#cb117-870" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/vwc/percentiles`**: Select Van Wiechen development milestones with detailed cut-off information</span></span>
<span id="cb117-871"><a href="#cb117-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-872"><a href="#cb117-872" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-873"><a href="#cb117-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-874"><a href="#cb117-874" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-875"><a href="#cb117-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-876"><a href="#cb117-876" aria-hidden="true" tabindex="-1"></a>It is also possible to obtain a table of age and D-score percentiles for a selection of milestones. This can be done either directly using the <span class="in">`vwc`</span> argument, or indirectly from uploaded child data.</span>
<span id="cb117-877"><a href="#cb117-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-878"><a href="#cb117-878" aria-hidden="true" tabindex="-1"></a><span class="in">```{r vwcpercentiles}</span></span>
<span id="cb117-879"><a href="#cb117-879" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(</span></span>
<span id="cb117-880"><a href="#cb117-880" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-881"><a href="#cb117-881" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "vwc/percentiles/json",</span></span>
<span id="cb117-882"><a href="#cb117-882" aria-hidden="true" tabindex="-1"></a><span class="in">  output = "table",</span></span>
<span id="cb117-883"><a href="#cb117-883" aria-hidden="true" tabindex="-1"></a><span class="in">  vwc = "ddifmd018"</span></span>
<span id="cb117-884"><a href="#cb117-884" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-885"><a href="#cb117-885" aria-hidden="true" tabindex="-1"></a><span class="in">r$parsed</span></span>
<span id="cb117-886"><a href="#cb117-886" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-887"><a href="#cb117-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-888"><a href="#cb117-888" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-889"><a href="#cb117-889" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-890"><a href="#cb117-890" aria-hidden="true" tabindex="-1"></a>To be added</span>
<span id="cb117-891"><a href="#cb117-891" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-892"><a href="#cb117-892" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-893"><a href="#cb117-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-894"><a href="#cb117-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-895"><a href="#cb117-895" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/dcat/calculate`**: Calculate next milestone item</span></span>
<span id="cb117-896"><a href="#cb117-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-897"><a href="#cb117-897" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-898"><a href="#cb117-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-899"><a href="#cb117-899" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-900"><a href="#cb117-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-901"><a href="#cb117-901" aria-hidden="true" tabindex="-1"></a>The DCAT allows users to performa adapative testing using either <span class="in">`ddi`</span> or <span class="in">`gs1`</span> items.</span>
<span id="cb117-902"><a href="#cb117-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-903"><a href="#cb117-903" aria-hidden="true" tabindex="-1"></a>The following snippet uploads child data and requests the next item to be tested based on the <span class="in">`gs1`</span> instrument, the default.</span>
<span id="cb117-904"><a href="#cb117-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-905"><a href="#cb117-905" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dcatcalculate}</span></span>
<span id="cb117-906"><a href="#cb117-906" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file("examples", "example_v3.1.json", package = "bdsreader")</span></span>
<span id="cb117-907"><a href="#cb117-907" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(host = host, path = "dcat/calculate/json", txt = fn)</span></span>
<span id="cb117-908"><a href="#cb117-908" aria-hidden="true" tabindex="-1"></a><span class="in">r$parsed</span></span>
<span id="cb117-909"><a href="#cb117-909" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-910"><a href="#cb117-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-911"><a href="#cb117-911" aria-hidden="true" tabindex="-1"></a>By specifying the instrument we can specify whether we want to include <span class="in">`ddi`</span> or <span class="in">`gs1`</span> (or even both). In the case of only <span class="in">`ddi`</span> items, we must additionally specify a key that supports the <span class="in">`ddi`</span> instrument.</span>
<span id="cb117-912"><a href="#cb117-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-913"><a href="#cb117-913" aria-hidden="true" tabindex="-1"></a><span class="in">```{r dcatcalculateddi}</span></span>
<span id="cb117-914"><a href="#cb117-914" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file("examples", "example_v3.1.json", package = "bdsreader")</span></span>
<span id="cb117-915"><a href="#cb117-915" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(</span></span>
<span id="cb117-916"><a href="#cb117-916" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-917"><a href="#cb117-917" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "dcat/calculate/json",</span></span>
<span id="cb117-918"><a href="#cb117-918" aria-hidden="true" tabindex="-1"></a><span class="in">  txt = fn,</span></span>
<span id="cb117-919"><a href="#cb117-919" aria-hidden="true" tabindex="-1"></a><span class="in">  instrument = "ddi",</span></span>
<span id="cb117-920"><a href="#cb117-920" aria-hidden="true" tabindex="-1"></a><span class="in">  key = "gsed2406"</span></span>
<span id="cb117-921"><a href="#cb117-921" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-922"><a href="#cb117-922" aria-hidden="true" tabindex="-1"></a><span class="in">r$parsed</span></span>
<span id="cb117-923"><a href="#cb117-923" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-924"><a href="#cb117-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-925"><a href="#cb117-925" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-926"><a href="#cb117-926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-927"><a href="#cb117-927" aria-hidden="true" tabindex="-1"></a>To be added</span>
<span id="cb117-928"><a href="#cb117-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-929"><a href="#cb117-929" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-930"><a href="#cb117-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-931"><a href="#cb117-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-932"><a href="#cb117-932" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/screeners/list`**: List available growth screeners</span></span>
<span id="cb117-933"><a href="#cb117-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-934"><a href="#cb117-934" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-935"><a href="#cb117-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-936"><a href="#cb117-936" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-937"><a href="#cb117-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-938"><a href="#cb117-938" aria-hidden="true" tabindex="-1"></a>JAMES implements several screening algorithms. The <span class="in">`/screeners/list`</span> end point provides detailed information on each of these.</span>
<span id="cb117-939"><a href="#cb117-939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-940"><a href="#cb117-940" aria-hidden="true" tabindex="-1"></a><span class="in">```{r screenerslist, eval=FALSE}</span></span>
<span id="cb117-941"><a href="#cb117-941" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(</span></span>
<span id="cb117-942"><a href="#cb117-942" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-943"><a href="#cb117-943" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "/screeners/list/json",</span></span>
<span id="cb117-944"><a href="#cb117-944" aria-hidden="true" tabindex="-1"></a><span class="in">  session = r1$session</span></span>
<span id="cb117-945"><a href="#cb117-945" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-946"><a href="#cb117-946" aria-hidden="true" tabindex="-1"></a><span class="in">names(r$parsed)</span></span>
<span id="cb117-947"><a href="#cb117-947" aria-hidden="true" tabindex="-1"></a><span class="in">with(r$parsed, table(yname, Categorie))</span></span>
<span id="cb117-948"><a href="#cb117-948" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-949"><a href="#cb117-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-950"><a href="#cb117-950" aria-hidden="true" tabindex="-1"></a>There are currently <span class="in">`r nrow(r$parsed)`</span> different codes. Codes ending in <span class="in">`31`</span>, e.g., <span class="in">`1031`</span> or <span class="in">`2031`</span> indicate normal growth, whereas code ending in <span class="in">`41`</span>, <span class="in">`42`</span> and so on, signal that - according to the guidelines - the child should be referred for further investigation. </span>
<span id="cb117-951"><a href="#cb117-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-952"><a href="#cb117-952" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-953"><a href="#cb117-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-954"><a href="#cb117-954" aria-hidden="true" tabindex="-1"></a>We get the details for the guidelines for head circumference as</span>
<span id="cb117-955"><a href="#cb117-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-956"><a href="#cb117-956" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash bashscreenerslist, eval=FALSE}</span></span>
<span id="cb117-957"><a href="#cb117-957" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-958"><a href="#cb117-958" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -sX 'POST' \</span></span>
<span id="cb117-959"><a href="#cb117-959" aria-hidden="true" tabindex="-1"></a><span class="in">$(cat .host)'/screeners/list/json' \</span></span>
<span id="cb117-960"><a href="#cb117-960" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'accept: application/json' \</span></span>
<span id="cb117-961"><a href="#cb117-961" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'Content-Type: application/json' \</span></span>
<span id="cb117-962"><a href="#cb117-962" aria-hidden="true" tabindex="-1"></a><span class="in">-d '{"ynames": "hdc"}'</span></span>
<span id="cb117-963"><a href="#cb117-963" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-964"><a href="#cb117-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-965"><a href="#cb117-965" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-966"><a href="#cb117-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-967"><a href="#cb117-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-968"><a href="#cb117-968" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/screeners/apply`**: Apply growth screeners to child data</span></span>
<span id="cb117-969"><a href="#cb117-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-970"><a href="#cb117-970" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-971"><a href="#cb117-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-972"><a href="#cb117-972" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-973"><a href="#cb117-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-974"><a href="#cb117-974" aria-hidden="true" tabindex="-1"></a>The <span class="in">`/screeners/apply`</span> end point applies standard screeners to the child data. Invoke the screeners by</span>
<span id="cb117-975"><a href="#cb117-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-976"><a href="#cb117-976" aria-hidden="true" tabindex="-1"></a><span class="in">```{r screenersapply, eval=TRUE}</span></span>
<span id="cb117-977"><a href="#cb117-977" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(</span></span>
<span id="cb117-978"><a href="#cb117-978" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-979"><a href="#cb117-979" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "/screeners/apply/json",</span></span>
<span id="cb117-980"><a href="#cb117-980" aria-hidden="true" tabindex="-1"></a><span class="in">  session = r1$session</span></span>
<span id="cb117-981"><a href="#cb117-981" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-982"><a href="#cb117-982" aria-hidden="true" tabindex="-1"></a><span class="in">r$parsed</span></span>
<span id="cb117-983"><a href="#cb117-983" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-984"><a href="#cb117-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-985"><a href="#cb117-985" aria-hidden="true" tabindex="-1"></a>The procedure</span>
<span id="cb117-986"><a href="#cb117-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-987"><a href="#cb117-987" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>calculates, per outcome, the intervals between the most recent measurement and all earlier measurements;</span>
<span id="cb117-988"><a href="#cb117-988" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>tests whether any of those intervals produces a signal according the screening algorithm;</span>
<span id="cb117-989"><a href="#cb117-989" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>reports the most recent non-standard signal that indicate abnormal growth.</span>
<span id="cb117-990"><a href="#cb117-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-991"><a href="#cb117-991" aria-hidden="true" tabindex="-1"></a>In the example, all returned codes (1031, 2031, 3031) end in "31", which signals normal growth. The full table of return codes and messages can be obtained by the <span class="in">`/screeners/list`</span> end point (see above).</span>
<span id="cb117-992"><a href="#cb117-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-993"><a href="#cb117-993" aria-hidden="true" tabindex="-1"></a>There are several possibilities to visualise and integrate multiple evaluations per curve performed in step 2 into one advice. Before May 2023, JAMES returned an advice for each combination of time point and outcome, but that table presented a lot of output that was difficult to act one. Since May 2023, JAMES reports only one signal per curve.</span>
<span id="cb117-994"><a href="#cb117-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-995"><a href="#cb117-995" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-996"><a href="#cb117-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-999"><a href="#cb117-999" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-1000"><a href="#cb117-1000" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb117-1001"><a href="#cb117-1001" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb117-1002"><a href="#cb117-1002" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/screeners/apply/json'</span> <span class="dt">\</span></span>
<span id="cb117-1003"><a href="#cb117-1003" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb117-1004"><a href="#cb117-1004" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: multipart/form-data'</span> <span class="dt">\</span></span>
<span id="cb117-1005"><a href="#cb117-1005" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span></span>
<span id="cb117-1006"><a href="#cb117-1006" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1007"><a href="#cb117-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1008"><a href="#cb117-1008" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-1009"><a href="#cb117-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1010"><a href="#cb117-1010" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/site`**: Request an empty site</span></span>
<span id="cb117-1011"><a href="#cb117-1011" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1012"><a href="#cb117-1012" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-1013"><a href="#cb117-1013" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1014"><a href="#cb117-1014" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-1015"><a href="#cb117-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1016"><a href="#cb117-1016" aria-hidden="true" tabindex="-1"></a>The <span class="in">`/site`</span> end point provides interactive site containing all charts, but without child data. This end point is primarily useful to obtain a quick overview of the available charts.</span>
<span id="cb117-1017"><a href="#cb117-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1018"><a href="#cb117-1018" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb117-1019"><a href="#cb117-1019" aria-hidden="true" tabindex="-1"></a><span class="in">browseURL(file.path(host, "site"))</span></span>
<span id="cb117-1020"><a href="#cb117-1020" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1021"><a href="#cb117-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1022"><a href="#cb117-1022" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-1023"><a href="#cb117-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1024"><a href="#cb117-1024" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-1025"><a href="#cb117-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1026"><a href="#cb117-1026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1027"><a href="#cb117-1027" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/site/request`**: Request personalised site</span></span>
<span id="cb117-1028"><a href="#cb117-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1029"><a href="#cb117-1029" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-1030"><a href="#cb117-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1031"><a href="#cb117-1031" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-1032"><a href="#cb117-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1033"><a href="#cb117-1033" aria-hidden="true" tabindex="-1"></a>The <span class="in">`/site/request`</span> end point creates an URL to a personalised, interactive site containing all charts. </span>
<span id="cb117-1034"><a href="#cb117-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1035"><a href="#cb117-1035" aria-hidden="true" tabindex="-1"></a><span class="in">```{r siterequest1}</span></span>
<span id="cb117-1036"><a href="#cb117-1036" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(</span></span>
<span id="cb117-1037"><a href="#cb117-1037" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-1038"><a href="#cb117-1038" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "/site/request/json",</span></span>
<span id="cb117-1039"><a href="#cb117-1039" aria-hidden="true" tabindex="-1"></a><span class="in">  sitehost = host,</span></span>
<span id="cb117-1040"><a href="#cb117-1040" aria-hidden="true" tabindex="-1"></a><span class="in">  txt = js</span></span>
<span id="cb117-1041"><a href="#cb117-1041" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-1042"><a href="#cb117-1042" aria-hidden="true" tabindex="-1"></a><span class="in">r$parsed</span></span>
<span id="cb117-1043"><a href="#cb117-1043" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1044"><a href="#cb117-1044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1045"><a href="#cb117-1045" aria-hidden="true" tabindex="-1"></a>Run the command and paste the generated URL in the address field of your browser. The starting chart is chosen by JAMES and depends on the age of the child.</span>
<span id="cb117-1046"><a href="#cb117-1046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1047"><a href="#cb117-1047" aria-hidden="true" tabindex="-1"></a>On some systems, the above command may fail with the browser error  <span class="in">`[400] Couldn't connect to server [localhost]`</span>. An alternative is to break the request into two steps. First, we create a session by uploading the child data, and then we use that session to create the URL to the personalised site.</span>
<span id="cb117-1048"><a href="#cb117-1048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1049"><a href="#cb117-1049" aria-hidden="true" tabindex="-1"></a>We start by uploading data to JAMES and het <span class="in">`r$session`</span>. After that, we can use either <span class="in">`site\request`</span> or manual construction of the URL to the site:</span>
<span id="cb117-1050"><a href="#cb117-1050" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1051"><a href="#cb117-1051" aria-hidden="true" tabindex="-1"></a><span class="in">```{r siterequest2}</span></span>
<span id="cb117-1052"><a href="#cb117-1052" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file("examples/maria.json", package = "bdsreader")</span></span>
<span id="cb117-1053"><a href="#cb117-1053" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(host = host, path = "data/upload/json", txt = fn)</span></span>
<span id="cb117-1054"><a href="#cb117-1054" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1055"><a href="#cb117-1055" aria-hidden="true" tabindex="-1"></a><span class="in"># URL construction by /site/request</span></span>
<span id="cb117-1056"><a href="#cb117-1056" aria-hidden="true" tabindex="-1"></a><span class="in">site1 &lt;- james_post(</span></span>
<span id="cb117-1057"><a href="#cb117-1057" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-1058"><a href="#cb117-1058" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "site/request/json",</span></span>
<span id="cb117-1059"><a href="#cb117-1059" aria-hidden="true" tabindex="-1"></a><span class="in">  sitehost = host,</span></span>
<span id="cb117-1060"><a href="#cb117-1060" aria-hidden="true" tabindex="-1"></a><span class="in">  session = r$session,</span></span>
<span id="cb117-1061"><a href="#cb117-1061" aria-hidden="true" tabindex="-1"></a><span class="in">  upload = FALSE</span></span>
<span id="cb117-1062"><a href="#cb117-1062" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-1063"><a href="#cb117-1063" aria-hidden="true" tabindex="-1"></a><span class="in">site1</span></span>
<span id="cb117-1064"><a href="#cb117-1064" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1065"><a href="#cb117-1065" aria-hidden="true" tabindex="-1"></a><span class="in"># Or manual URL construction</span></span>
<span id="cb117-1066"><a href="#cb117-1066" aria-hidden="true" tabindex="-1"></a><span class="in">parsed_host &lt;- httr::parse_url(host)</span></span>
<span id="cb117-1067"><a href="#cb117-1067" aria-hidden="true" tabindex="-1"></a><span class="in">combined_path &lt;- paste(parsed_host$path, "site", sep = "/")</span></span>
<span id="cb117-1068"><a href="#cb117-1068" aria-hidden="true" tabindex="-1"></a><span class="in">combined_path &lt;- gsub("//+", "/", combined_path)</span></span>
<span id="cb117-1069"><a href="#cb117-1069" aria-hidden="true" tabindex="-1"></a><span class="in">site2 &lt;- httr::modify_url(</span></span>
<span id="cb117-1070"><a href="#cb117-1070" aria-hidden="true" tabindex="-1"></a><span class="in">  url = host,</span></span>
<span id="cb117-1071"><a href="#cb117-1071" aria-hidden="true" tabindex="-1"></a><span class="in">  path = combined_path,</span></span>
<span id="cb117-1072"><a href="#cb117-1072" aria-hidden="true" tabindex="-1"></a><span class="in">  query = list(session = r$session)</span></span>
<span id="cb117-1073"><a href="#cb117-1073" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-1074"><a href="#cb117-1074" aria-hidden="true" tabindex="-1"></a><span class="in">site2</span></span>
<span id="cb117-1075"><a href="#cb117-1075" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1076"><a href="#cb117-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1077"><a href="#cb117-1077" aria-hidden="true" tabindex="-1"></a>Paste the generated URL in the address field of your browser. The initial page shown depends on the child's age. This two-step approach also works for remote servers. In practice, use the two-step approach is stabler and more reliable.</span>
<span id="cb117-1078"><a href="#cb117-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1079"><a href="#cb117-1079" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-1080"><a href="#cb117-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1083"><a href="#cb117-1083" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash}</span></span>
<span id="cb117-1084"><a href="#cb117-1084" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb117-1085"><a href="#cb117-1085" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> <span class="st">'POST'</span> <span class="dt">\</span></span>
<span id="cb117-1086"><a href="#cb117-1086" aria-hidden="true" tabindex="-1"></a><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'/site/request/json'</span> <span class="dt">\</span></span>
<span id="cb117-1087"><a href="#cb117-1087" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'accept: application/json'</span> <span class="dt">\</span></span>
<span id="cb117-1088"><a href="#cb117-1088" aria-hidden="true" tabindex="-1"></a>-H <span class="st">'Content-Type: multipart/form-data'</span> <span class="dt">\</span></span>
<span id="cb117-1089"><a href="#cb117-1089" aria-hidden="true" tabindex="-1"></a>-F <span class="st">"sitehost='</span><span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span><span class="st">'"</span> <span class="dt">\</span></span>
<span id="cb117-1090"><a href="#cb117-1090" aria-hidden="true" tabindex="-1"></a>-F <span class="st">'txt=@maria.json;type=application/json'</span></span>
<span id="cb117-1091"><a href="#cb117-1091" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1092"><a href="#cb117-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1093"><a href="#cb117-1093" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-1094"><a href="#cb117-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1095"><a href="#cb117-1095" aria-hidden="true" tabindex="-1"></a><span class="fu">### **`/blend/request`**: Obtain a blend from multiple end points </span></span>
<span id="cb117-1096"><a href="#cb117-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1097"><a href="#cb117-1097" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb117-1098"><a href="#cb117-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1099"><a href="#cb117-1099" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **R**</span></span>
<span id="cb117-1100"><a href="#cb117-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1101"><a href="#cb117-1101" aria-hidden="true" tabindex="-1"></a>The <span class="in">`/blend/request`</span> end point returns the results of multiple end points, and thus functions as a one-stop shop. However, currently it does not support graphics output, so use <span class="in">`/{session}/{info}/svglite`</span> or <span class="in">`/charts/draw/svglite`</span> for the charts. </span>
<span id="cb117-1102"><a href="#cb117-1102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1103"><a href="#cb117-1103" aria-hidden="true" tabindex="-1"></a><span class="in">```{r blendrequest}</span></span>
<span id="cb117-1104"><a href="#cb117-1104" aria-hidden="true" tabindex="-1"></a><span class="in">fn &lt;- system.file(</span></span>
<span id="cb117-1105"><a href="#cb117-1105" aria-hidden="true" tabindex="-1"></a><span class="in">  "extdata",</span></span>
<span id="cb117-1106"><a href="#cb117-1106" aria-hidden="true" tabindex="-1"></a><span class="in">  "bds_v3.0",</span></span>
<span id="cb117-1107"><a href="#cb117-1107" aria-hidden="true" tabindex="-1"></a><span class="in">  "smocc",</span></span>
<span id="cb117-1108"><a href="#cb117-1108" aria-hidden="true" tabindex="-1"></a><span class="in">  "Laura_S.json",</span></span>
<span id="cb117-1109"><a href="#cb117-1109" aria-hidden="true" tabindex="-1"></a><span class="in">  package = "jamesdemodata",</span></span>
<span id="cb117-1110"><a href="#cb117-1110" aria-hidden="true" tabindex="-1"></a><span class="in">  mustWork = TRUE</span></span>
<span id="cb117-1111"><a href="#cb117-1111" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-1112"><a href="#cb117-1112" aria-hidden="true" tabindex="-1"></a><span class="in">r &lt;- james_post(</span></span>
<span id="cb117-1113"><a href="#cb117-1113" aria-hidden="true" tabindex="-1"></a><span class="in">  host = host,</span></span>
<span id="cb117-1114"><a href="#cb117-1114" aria-hidden="true" tabindex="-1"></a><span class="in">  path = "/blend/request/json",</span></span>
<span id="cb117-1115"><a href="#cb117-1115" aria-hidden="true" tabindex="-1"></a><span class="in">  sitehost = host,</span></span>
<span id="cb117-1116"><a href="#cb117-1116" aria-hidden="true" tabindex="-1"></a><span class="in">  txt = fn</span></span>
<span id="cb117-1117"><a href="#cb117-1117" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb117-1118"><a href="#cb117-1118" aria-hidden="true" tabindex="-1"></a><span class="in">r</span></span>
<span id="cb117-1119"><a href="#cb117-1119" aria-hidden="true" tabindex="-1"></a><span class="in">names(r$parsed)</span></span>
<span id="cb117-1120"><a href="#cb117-1120" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1121"><a href="#cb117-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1122"><a href="#cb117-1122" aria-hidden="true" tabindex="-1"></a>The two-step approach is: </span>
<span id="cb117-1123"><a href="#cb117-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1126"><a href="#cb117-1126" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb117-1127"><a href="#cb117-1127" aria-hidden="true" tabindex="-1"></a>resp1 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"data/upload/json"</span>, <span class="at">txt =</span> fn)</span>
<span id="cb117-1128"><a href="#cb117-1128" aria-hidden="true" tabindex="-1"></a>resp2 <span class="ot">&lt;-</span> <span class="fu">james_post</span>(</span>
<span id="cb117-1129"><a href="#cb117-1129" aria-hidden="true" tabindex="-1"></a>  <span class="at">host =</span> host,</span>
<span id="cb117-1130"><a href="#cb117-1130" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> <span class="st">"blend/request/json"</span>,</span>
<span id="cb117-1131"><a href="#cb117-1131" aria-hidden="true" tabindex="-1"></a>  <span class="at">session =</span> resp1<span class="sc">$</span>session</span>
<span id="cb117-1132"><a href="#cb117-1132" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb117-1133"><a href="#cb117-1133" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(resp2<span class="sc">$</span>parsed)</span>
<span id="cb117-1134"><a href="#cb117-1134" aria-hidden="true" tabindex="-1"></a><span class="co"># browseURL(resp2$parsed$site)</span></span>
<span id="cb117-1135"><a href="#cb117-1135" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1136"><a href="#cb117-1136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1137"><a href="#cb117-1137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1138"><a href="#cb117-1138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cleanup, include=FALSE}</span></span>
<span id="cb117-1139"><a href="#cb117-1139" aria-hidden="true" tabindex="-1"></a><span class="in">files &lt;- c("laura.svg", "maria.json", "maria1.svg", "maria2.svg")</span></span>
<span id="cb117-1140"><a href="#cb117-1140" aria-hidden="true" tabindex="-1"></a><span class="in">file.remove(files)</span></span>
<span id="cb117-1141"><a href="#cb117-1141" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1142"><a href="#cb117-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1143"><a href="#cb117-1143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1144"><a href="#cb117-1144" aria-hidden="true" tabindex="-1"></a><span class="fu">##### **bash**</span></span>
<span id="cb117-1145"><a href="#cb117-1145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1146"><a href="#cb117-1146" aria-hidden="true" tabindex="-1"></a>**Note**: This example requires OpenCPU library access and may not work on ACC server.</span>
<span id="cb117-1147"><a href="#cb117-1147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1148"><a href="#cb117-1148" aria-hidden="true" tabindex="-1"></a><span class="in">```{bash eval=TRUE}</span></span>
<span id="cb117-1149"><a href="#cb117-1149" aria-hidden="true" tabindex="-1"></a><span class="in">source auth_curl.sh</span></span>
<span id="cb117-1150"><a href="#cb117-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1151"><a href="#cb117-1151" aria-hidden="true" tabindex="-1"></a><span class="in">BASE_URL=$(cat .host)</span></span>
<span id="cb117-1152"><a href="#cb117-1152" aria-hidden="true" tabindex="-1"></a><span class="in">auth_curl -sX 'POST' \</span></span>
<span id="cb117-1153"><a href="#cb117-1153" aria-hidden="true" tabindex="-1"></a><span class="in">$(cat .host)'/blend/request/json' \</span></span>
<span id="cb117-1154"><a href="#cb117-1154" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'accept: application/json' \</span></span>
<span id="cb117-1155"><a href="#cb117-1155" aria-hidden="true" tabindex="-1"></a><span class="in">-H 'Content-Type: application/json' \</span></span>
<span id="cb117-1156"><a href="#cb117-1156" aria-hidden="true" tabindex="-1"></a><span class="in">-d '{</span></span>
<span id="cb117-1157"><a href="#cb117-1157" aria-hidden="true" tabindex="-1"></a><span class="in">"txt": "https://james.groeidiagrammen.nl/ocpu/library/bdsreader/examples/Laura_S.json",</span></span>
<span id="cb117-1158"><a href="#cb117-1158" aria-hidden="true" tabindex="-1"></a><span class="in">"sitehost": "'$(cat .host)'",</span></span>
<span id="cb117-1159"><a href="#cb117-1159" aria-hidden="true" tabindex="-1"></a><span class="in">"blend": "standard"</span></span>
<span id="cb117-1160"><a href="#cb117-1160" aria-hidden="true" tabindex="-1"></a><span class="in">}'</span></span>
<span id="cb117-1161"><a href="#cb117-1161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1162"><a href="#cb117-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1163"><a href="#cb117-1163" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb117-1164"><a href="#cb117-1164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1165"><a href="#cb117-1165" aria-hidden="true" tabindex="-1"></a><span class="fu">## Authentication</span></span>
<span id="cb117-1166"><a href="#cb117-1166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1167"><a href="#cb117-1167" aria-hidden="true" tabindex="-1"></a><span class="fu">### Overview</span></span>
<span id="cb117-1168"><a href="#cb117-1168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1169"><a href="#cb117-1169" aria-hidden="true" tabindex="-1"></a>JAMES supports both open and authenticated access depending on the deployment environment:</span>
<span id="cb117-1170"><a href="#cb117-1170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1171"><a href="#cb117-1171" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Test server** (<span class="in">`https://james.groeidiagrammen.nl`</span>): Open access, no authentication required</span>
<span id="cb117-1172"><a href="#cb117-1172" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**ACC and PROD server** : Requires Bearer token authentication</span>
<span id="cb117-1173"><a href="#cb117-1173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1174"><a href="#cb117-1174" aria-hidden="true" tabindex="-1"></a>This document uses authentication throughout for compatibility with the ACC server. The authentication mechanism is handled behind the scenes but uses a simple convention that makes it easy to switch between different deployment environments.</span>
<span id="cb117-1175"><a href="#cb117-1175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1176"><a href="#cb117-1176" aria-hidden="true" tabindex="-1"></a><span class="fu">### Authentication Conventions</span></span>
<span id="cb117-1177"><a href="#cb117-1177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1178"><a href="#cb117-1178" aria-hidden="true" tabindex="-1"></a>The authentication system in this document uses several files and environment variables:</span>
<span id="cb117-1179"><a href="#cb117-1179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1180"><a href="#cb117-1180" aria-hidden="true" tabindex="-1"></a>| File/Variable | Purpose | Location |</span>
<span id="cb117-1181"><a href="#cb117-1181" aria-hidden="true" tabindex="-1"></a>|:--------------|:--------|:---------|</span>
<span id="cb117-1182"><a href="#cb117-1182" aria-hidden="true" tabindex="-1"></a>| <span class="in">`apikey-acc.txt`</span> | Stores your API key for the ACC server | <span class="in">`vignettes/articles/`</span> |</span>
<span id="cb117-1183"><a href="#cb117-1183" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.bearer`</span> | Stores the authentication token obtained from the API | <span class="in">`vignettes/articles/`</span> (generated) |</span>
<span id="cb117-1184"><a href="#cb117-1184" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.host`</span> | Stores the current server URL | <span class="in">`vignettes/articles/`</span> (generated) |</span>
<span id="cb117-1185"><a href="#cb117-1185" aria-hidden="true" tabindex="-1"></a>| <span class="in">`JAMES_BEARER_TOKEN`</span> | Environment variable containing "Bearer {token}" | R session (set automatically) |</span>
<span id="cb117-1186"><a href="#cb117-1186" aria-hidden="true" tabindex="-1"></a>| <span class="in">`authenticate-acc.sh`</span> | Script to obtain Bearer token from API key | <span class="in">`vignettes/articles/`</span> |</span>
<span id="cb117-1187"><a href="#cb117-1187" aria-hidden="true" tabindex="-1"></a>| <span class="in">`auth_curl.sh`</span> | Helper function that adds authentication to curl commands | <span class="in">`vignettes/articles/`</span> |</span>
<span id="cb117-1188"><a href="#cb117-1188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1189"><a href="#cb117-1189" aria-hidden="true" tabindex="-1"></a>**Note**: The <span class="in">`.bearer`</span> and <span class="in">`.host`</span> files are temporary and are created when rendering this document. Add <span class="in">`apikey-acc.txt`</span>, <span class="in">`.bearer`</span>, and <span class="in">`.host`</span> to your <span class="in">`.gitignore`</span> to prevent accidentally committing sensitive information.</span>
<span id="cb117-1190"><a href="#cb117-1190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1191"><a href="#cb117-1191" aria-hidden="true" tabindex="-1"></a><span class="fu">### How to Set Up Authentication</span></span>
<span id="cb117-1192"><a href="#cb117-1192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1193"><a href="#cb117-1193" aria-hidden="true" tabindex="-1"></a>To use the ACC server (or any authenticated JAMES instance), follow these steps:</span>
<span id="cb117-1194"><a href="#cb117-1194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1195"><a href="#cb117-1195" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 1. Obtain an API Key</span></span>
<span id="cb117-1196"><a href="#cb117-1196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1197"><a href="#cb117-1197" aria-hidden="true" tabindex="-1"></a>Contact the JAMES administrator to obtain an API key for the ACC environment. Save this key in a file named <span class="in">`apikey-acc.txt`</span> (or <span class="in">`apikey-prod.txt`</span>) in the <span class="in">`vignettes/articles/`</span> directory:</span>
<span id="cb117-1198"><a href="#cb117-1198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1199"><a href="#cb117-1199" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb117-1200"><a href="#cb117-1200" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"your-api-key-here"</span> <span class="op">&gt;</span> vignettes/articles/apikey-acc.txt</span>
<span id="cb117-1201"><a href="#cb117-1201" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1202"><a href="#cb117-1202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1203"><a href="#cb117-1203" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 2. Authenticate to Get Bearer Token</span></span>
<span id="cb117-1204"><a href="#cb117-1204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1205"><a href="#cb117-1205" aria-hidden="true" tabindex="-1"></a>Run the authentication script to obtain a Bearer token:</span>
<span id="cb117-1206"><a href="#cb117-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1207"><a href="#cb117-1207" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb117-1208"><a href="#cb117-1208" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> vignettes/articles</span>
<span id="cb117-1209"><a href="#cb117-1209" aria-hidden="true" tabindex="-1"></a><span class="ex">./authenticate-acc.sh</span></span>
<span id="cb117-1210"><a href="#cb117-1210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1211"><a href="#cb117-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1212"><a href="#cb117-1212" aria-hidden="true" tabindex="-1"></a>This script:</span>
<span id="cb117-1213"><a href="#cb117-1213" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Reads your API key from <span class="in">`apikey-acc.txt`</span></span>
<span id="cb117-1214"><a href="#cb117-1214" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Sends it to the ACC authentication endpoint</span>
<span id="cb117-1215"><a href="#cb117-1215" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Saves the returned Bearer token to <span class="in">`.bearer`</span></span>
<span id="cb117-1216"><a href="#cb117-1216" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Returns exit code 0 on success, 1 on failure</span>
<span id="cb117-1217"><a href="#cb117-1217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1218"><a href="#cb117-1218" aria-hidden="true" tabindex="-1"></a>The Bearer token is typically valid for a limited time (e.g., 24 hours). Re-run the script when the token expires.</span>
<span id="cb117-1219"><a href="#cb117-1219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1220"><a href="#cb117-1220" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 3. Use Authentication in Your Code</span></span>
<span id="cb117-1221"><a href="#cb117-1221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1222"><a href="#cb117-1222" aria-hidden="true" tabindex="-1"></a>**For R code**: The setup chunk automatically loads the Bearer token into the <span class="in">`JAMES_BEARER_TOKEN`</span> environment variable, which is used by <span class="in">`jamesclient`</span> functions:</span>
<span id="cb117-1223"><a href="#cb117-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1224"><a href="#cb117-1224" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb117-1225"><a href="#cb117-1225" aria-hidden="true" tabindex="-1"></a><span class="co"># Token is automatically loaded from .bearer file</span></span>
<span id="cb117-1226"><a href="#cb117-1226" aria-hidden="true" tabindex="-1"></a><span class="co"># jamesclient functions automatically use JAMES_BEARER_TOKEN</span></span>
<span id="cb117-1227"><a href="#cb117-1227" aria-hidden="true" tabindex="-1"></a>r <span class="ot">&lt;-</span> <span class="fu">james_post</span>(<span class="at">host =</span> host, <span class="at">path =</span> <span class="st">"version/json"</span>)</span>
<span id="cb117-1228"><a href="#cb117-1228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1229"><a href="#cb117-1229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1230"><a href="#cb117-1230" aria-hidden="true" tabindex="-1"></a>**For bash code**: Use the <span class="in">`auth_curl`</span> helper function instead of <span class="in">`curl`</span>:</span>
<span id="cb117-1231"><a href="#cb117-1231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1232"><a href="#cb117-1232" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb117-1233"><a href="#cb117-1233" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> auth_curl.sh</span>
<span id="cb117-1234"><a href="#cb117-1234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1235"><a href="#cb117-1235" aria-hidden="true" tabindex="-1"></a><span class="co"># Instead of: curl -X POST https://server/endpoint</span></span>
<span id="cb117-1236"><a href="#cb117-1236" aria-hidden="true" tabindex="-1"></a><span class="co"># Use:</span></span>
<span id="cb117-1237"><a href="#cb117-1237" aria-hidden="true" tabindex="-1"></a><span class="ex">auth_curl</span> <span class="at">-sX</span> POST <span class="va">$(</span><span class="fu">cat</span> .host<span class="va">)</span>/endpoint</span>
<span id="cb117-1238"><a href="#cb117-1238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1239"><a href="#cb117-1239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1240"><a href="#cb117-1240" aria-hidden="true" tabindex="-1"></a>The <span class="in">`auth_curl`</span> function automatically adds the <span class="in">`Authorization: Bearer {token}`</span> header if the <span class="in">`.bearer`</span> file exists.</span>
<span id="cb117-1241"><a href="#cb117-1241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1242"><a href="#cb117-1242" aria-hidden="true" tabindex="-1"></a><span class="fu">### Manual Authentication</span></span>
<span id="cb117-1243"><a href="#cb117-1243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1244"><a href="#cb117-1244" aria-hidden="true" tabindex="-1"></a>If you prefer to handle authentication manually without the helper scripts:</span>
<span id="cb117-1245"><a href="#cb117-1245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1246"><a href="#cb117-1246" aria-hidden="true" tabindex="-1"></a>**In R**:</span>
<span id="cb117-1247"><a href="#cb117-1247" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb117-1248"><a href="#cb117-1248" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the bearer token</span></span>
<span id="cb117-1249"><a href="#cb117-1249" aria-hidden="true" tabindex="-1"></a>bearer_token <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">readLines</span>(<span class="st">".bearer"</span>, <span class="at">n =</span> <span class="dv">1</span>))</span>
<span id="cb117-1250"><a href="#cb117-1250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1251"><a href="#cb117-1251" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to requests</span></span>
<span id="cb117-1252"><a href="#cb117-1252" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb117-1253"><a href="#cb117-1253" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">request</span>(<span class="fu">paste0</span>(host, <span class="st">"/version/json"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb117-1254"><a href="#cb117-1254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_headers</span>(<span class="at">Authorization =</span> <span class="fu">paste</span>(<span class="st">"Bearer"</span>, bearer_token)) <span class="sc">|&gt;</span></span>
<span id="cb117-1255"><a href="#cb117-1255" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>()</span>
<span id="cb117-1256"><a href="#cb117-1256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1257"><a href="#cb117-1257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1258"><a href="#cb117-1258" aria-hidden="true" tabindex="-1"></a>**In bash**:</span>
<span id="cb117-1259"><a href="#cb117-1259" aria-hidden="true" tabindex="-1"></a><span class="in">```bash</span></span>
<span id="cb117-1260"><a href="#cb117-1260" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the bearer token</span></span>
<span id="cb117-1261"><a href="#cb117-1261" aria-hidden="true" tabindex="-1"></a><span class="va">TOKEN</span><span class="op">=</span><span class="va">$(</span><span class="fu">cat</span> .bearer<span class="va">)</span></span>
<span id="cb117-1262"><a href="#cb117-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1263"><a href="#cb117-1263" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to curl requests</span></span>
<span id="cb117-1264"><a href="#cb117-1264" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-sX</span> POST https://server/endpoint <span class="dt">\</span></span>
<span id="cb117-1265"><a href="#cb117-1265" aria-hidden="true" tabindex="-1"></a>  <span class="at">-H</span> <span class="st">"Authorization: Bearer </span><span class="va">$TOKEN</span><span class="st">"</span></span>
<span id="cb117-1266"><a href="#cb117-1266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1267"><a href="#cb117-1267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1268"><a href="#cb117-1268" aria-hidden="true" tabindex="-1"></a><span class="fu">### Switching Between Servers</span></span>
<span id="cb117-1269"><a href="#cb117-1269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1270"><a href="#cb117-1270" aria-hidden="true" tabindex="-1"></a>To switch between different JAMES servers (test, acc, dev), change the <span class="in">`target_host`</span> variable in the <span class="in">`{r host}`</span> setup chunk at the beginning of this document:</span>
<span id="cb117-1271"><a href="#cb117-1271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1272"><a href="#cb117-1272" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb117-1273"><a href="#cb117-1273" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"dev"</span>   <span class="co"># localhost for development</span></span>
<span id="cb117-1274"><a href="#cb117-1274" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"test"</span>  <span class="co"># No authentication needed</span></span>
<span id="cb117-1275"><a href="#cb117-1275" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"acc"</span>   <span class="co"># Requires authentication</span></span>
<span id="cb117-1276"><a href="#cb117-1276" aria-hidden="true" tabindex="-1"></a>target_host <span class="ot">&lt;-</span> <span class="st">"prod"</span>  <span class="co"># Requires authentication</span></span>
<span id="cb117-1277"><a href="#cb117-1277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb117-1278"><a href="#cb117-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1279"><a href="#cb117-1279" aria-hidden="true" tabindex="-1"></a>The document will automatically:</span>
<span id="cb117-1280"><a href="#cb117-1280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1281"><a href="#cb117-1281" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Set the appropriate server URL in <span class="in">`host`</span> variable</span>
<span id="cb117-1282"><a href="#cb117-1282" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Create the <span class="in">`.host`</span> file for bash chunks</span>
<span id="cb117-1283"><a href="#cb117-1283" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Load authentication tokens if available</span>
<span id="cb117-1284"><a href="#cb117-1284" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>Use authenticated requests when needed</span>
<span id="cb117-1285"><a href="#cb117-1285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1286"><a href="#cb117-1286" aria-hidden="true" tabindex="-1"></a><span class="fu">### Troubleshooting Authentication</span></span>
<span id="cb117-1287"><a href="#cb117-1287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1288"><a href="#cb117-1288" aria-hidden="true" tabindex="-1"></a>**401 Unauthorized errors**:</span>
<span id="cb117-1289"><a href="#cb117-1289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1290"><a href="#cb117-1290" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Token may have expired - re-run <span class="in">`./authenticate-acc.sh`</span></span>
<span id="cb117-1291"><a href="#cb117-1291" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Check that <span class="in">`.bearer`</span> file exists and is not empty</span>
<span id="cb117-1292"><a href="#cb117-1292" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Verify <span class="in">`JAMES_BEARER_TOKEN`</span> is set: <span class="in">`Sys.getenv("JAMES_BEARER_TOKEN")`</span></span>
<span id="cb117-1293"><a href="#cb117-1293" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>The <span class="in">`jamesclient::james_post()`</span> and <span class="in">`jamesclient::james_get()`</span> functions rely on <span class="in">`JAMES_BEARER_TOKEN`</span> for authentication</span>
<span id="cb117-1294"><a href="#cb117-1294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1295"><a href="#cb117-1295" aria-hidden="true" tabindex="-1"></a>**Token not found**:</span>
<span id="cb117-1296"><a href="#cb117-1296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1297"><a href="#cb117-1297" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Ensure <span class="in">`apikey-acc.txt`</span> exists and contains your API key</span>
<span id="cb117-1298"><a href="#cb117-1298" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Check that you're running commands from <span class="in">`vignettes/articles/`</span> directory</span>
<span id="cb117-1299"><a href="#cb117-1299" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Verify <span class="in">`authenticate-acc.sh`</span> has execute permissions: <span class="in">`chmod +x authenticate-acc.sh`</span></span>
<span id="cb117-1300"><a href="#cb117-1300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1301"><a href="#cb117-1301" aria-hidden="true" tabindex="-1"></a>**Connection timeout**:</span>
<span id="cb117-1302"><a href="#cb117-1302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1303"><a href="#cb117-1303" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Check your network connection</span>
<span id="cb117-1304"><a href="#cb117-1304" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Verify the ACC server URL is correct</span>
<span id="cb117-1305"><a href="#cb117-1305" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Check if you're behind a proxy that requires configuration</span>
<span id="cb117-1306"><a href="#cb117-1306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1307"><a href="#cb117-1307" aria-hidden="true" tabindex="-1"></a><span class="fu">## Resources</span></span>
<span id="cb117-1308"><a href="#cb117-1308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1309"><a href="#cb117-1309" aria-hidden="true" tabindex="-1"></a><span class="fu">### Internal</span></span>
<span id="cb117-1310"><a href="#cb117-1310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1311"><a href="#cb117-1311" aria-hidden="true" tabindex="-1"></a>| Description                                           | Status                                  |</span>
<span id="cb117-1312"><a href="#cb117-1312" aria-hidden="true" tabindex="-1"></a>|:------------------------------------------------------|:----------------------------------------|</span>
<span id="cb117-1313"><a href="#cb117-1313" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">Tutorial (Dutch)</span><span class="co">](http://growthcharts.org/arnhem2025/)</span> | open |</span>
<span id="cb117-1314"><a href="#cb117-1314" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">Changelog</span><span class="co">](https://growthcharts.org/james/news/index.html)</span> | open |</span>
<span id="cb117-1315"><a href="#cb117-1315" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">OpenAPI specification</span><span class="co">](https://james.groeidiagrammen.nl/docs/)</span> | open     |</span>
<span id="cb117-1316"><a href="#cb117-1316" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">JSON data schema 3.0</span><span class="co">](https://james.groeidiagrammen.nl/schemas/bds_v3.0.json)</span> | open |</span>
<span id="cb117-1317"><a href="#cb117-1317" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">Source files</span><span class="co">](https://github.com/growthcharts)</span> | open  |</span>
<span id="cb117-1318"><a href="#cb117-1318" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">JAMES issue tracker</span><span class="co">](https://github.com/growthcharts/james/issues)</span> | open |</span>
<span id="cb117-1319"><a href="#cb117-1319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1320"><a href="#cb117-1320" aria-hidden="true" tabindex="-1"></a><span class="fu">### External</span></span>
<span id="cb117-1321"><a href="#cb117-1321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-1322"><a href="#cb117-1322" aria-hidden="true" tabindex="-1"></a>| Description                                           | Status                                  |</span>
<span id="cb117-1323"><a href="#cb117-1323" aria-hidden="true" tabindex="-1"></a>|:------------------------------------------------------|:----------------------------------------|</span>
<span id="cb117-1324"><a href="#cb117-1324" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">JAMES demo</span><span class="co">](https://tnochildhealthstatistics.shinyapps.io/james_tryout/)</span> | current |</span>
<span id="cb117-1325"><a href="#cb117-1325" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">Basisdataset JGZ</span><span class="co">](https://decor.nictiz.nl/pub/jeugdgezondheidszorg/jgz-html-20240426T081156/index.html)</span> | current |</span>
<span id="cb117-1326"><a href="#cb117-1326" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">OpenCPU API</span><span class="co">](https://www.opencpu.org/api.html)</span> | current |</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>