<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Uploads, parses, converts and stores data on the server — upload_data • james</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Uploads, parses, converts and stores data on the server — upload_data"><meta name="description" content="Uploads JSON data that adhere to the BDS-format, parses its
contents, converts it to a list with elements psn and xyz,
and stores the result on the server for further processing.
The function is useful for caching input data over multiple requests to
OpenCPU. The cached data feed into other JAMES functions by means
of the session header in the response. The server wipes the
cached data after 2 hours."><meta property="og:description" content="Uploads JSON data that adhere to the BDS-format, parses its
contents, converts it to a list with elements psn and xyz,
and stores the result on the server for further processing.
The function is useful for caching input data over multiple requests to
OpenCPU. The cached data feed into other JAMES functions by means
of the session header in the response. The server wipes the
cached data after 2 hours."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">james</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.8.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Overview</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/getting_started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/oldfriends.html">Old Friends</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/growthcharts/james"><span class="fa fab fa-github"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Uploads, parses, converts and stores data on the server</h1>
      <small class="dont-index">Source: <a href="https://github.com/growthcharts/james/blob/HEAD/R/upload_data.R" class="external-link"><code>R/upload_data.R</code></a></small>
      <div class="d-none name"><code>upload_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Uploads JSON data that adhere to the BDS-format, parses its
contents, converts it to a list with elements <code>psn</code> and <code>xyz</code>,
and stores the result on the server for further processing.
The function is useful for caching input data over multiple requests to
<code>OpenCPU</code>. The cached data feed into other JAMES functions by means
of the <code>session</code> header in the response. The server wipes the
cached data after 2 hours.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">upload_data</span><span class="op">(</span></span>
<span>  txt <span class="op">=</span> <span class="st">""</span>,</span>
<span>  auto_format <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"1.0"</span>,</span>
<span>  schema <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  validate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  append_ddi <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  intermediate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-txt">txt<a class="anchor" aria-label="anchor" href="#arg-txt"></a></dt>
<dd><p>A JSON string, URL or file</p></dd>


<dt id="arg-auto-format">auto_format<a class="anchor" aria-label="anchor" href="#arg-auto-format"></a></dt>
<dd><p>Logical. Should the format be read from the data? Default
is <code>TRUE</code>.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>String. JSON data schema version number. There are currently
three schemas supported: <code>"1.0"</code>, <code>"1.1"</code>, <code>"2.0"</code>, <code>"3.0"</code> and <code>"3.1"</code>.
Formats <code>"1.0"</code> and <code>"1.1"</code> are included for backward compatibility only.
Use <code>format = "3.1"</code> for new applications.</p></dd>


<dt id="arg-schema">schema<a class="anchor" aria-label="anchor" href="#arg-schema"></a></dt>
<dd><p>A file name (optionally including the path) with the JSON
validation schema.
The <code>schema</code> argument overrides <code>format</code>. The function extracts the
version number for the basename, and overwrites the
<code>format</code> argument by version number.</p></dd>


<dt id="arg-validate">validate<a class="anchor" aria-label="anchor" href="#arg-validate"></a></dt>
<dd><p>Logical. Should the JSON-input be validated against the
JSON-schema? The default (<code>FALSE</code>) bypasses checking. Set <code>validate = TRUE</code>
to obtain diagnostic information from the <code><a href="https://docs.ropensci.org/jsonvalidate/reference/json_validate.html" class="external-link">jsonvalidate::json_validate()</a></code>
function.</p></dd>


<dt id="arg-append-ddi">append_ddi<a class="anchor" aria-label="anchor" href="#arg-append-ddi"></a></dt>
<dd><p>Should the DDI responses be appended? (only used for JSON
schema V1.0 and V2.0)</p></dd>


<dt id="arg-intermediate">intermediate<a class="anchor" aria-label="anchor" href="#arg-intermediate"></a></dt>
<dd><p>Logical. If <code>TRUE</code> the function writes JSON files with
intermediate result to the working directory. 1. <code>input.json</code>: the JSON
input data; 2. <code>bds.json</code>: a data frame with info per BDS; 3. <code>ddi.json</code>:
result of recoding BDS into GSED item names; 4. <code>psn.json</code>: known fixed
child covariates; 5. <code>xy.json</code>: time-varying variables.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Show verbose output for <code><a href="https://rdrr.io/pkg/centile/man/y2z.html" class="external-link">centile::y2z()</a></code></p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Used for additional parameters</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with elements <code>psn</code> (persondata) and <code>xyz</code> (timedata).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/bdsreader/man/read_bds.html" class="external-link">bdsreader::read_bds()</a></code>
<code><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">jsonlite::fromJSON()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Stef van Buuren 2021</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"testdata"</span>, <span class="st">"client3.json"</span>, package <span class="op">=</span> <span class="st">"james"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">upload_data</span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://stefvanbuuren.name" class="external-link">Stef van Buuren</a>, <a href="https://nl.linkedin.com/in/arjanhjhuizing" class="external-link">Arjan Huizing</a>, <a href="https://iriseekhout.com" class="external-link">Iris Eekhout</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

